<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript"/>

  <title>
    File: globe_3d-textures.adb
  </title>
  <link rel='stylesheet' href='support/docgen.css' type='text/css'/>
  <link rel='stylesheet' href='support/tags.css' type='text/css'/>
  <script src='support/docgen.js' type='text/javascript' charset='utf-8'></script>
</head>
<body onload="onloadDoc();">

<div id='leftSide'>
  <div id='leftSideInside'>
  <div id='header'>
    <h2 class="button">Documentation</h2>
    <a href='toc.html'><div class="button2">Table of Contents</div></a>

    <a href='tree.html'><div class="button2">Class Inheritance Tree</div></a>

  </div>
  </div>
</div> <!-- leftSide -->

<div class='subprograms'>
  <div class='details'><ol><li id="l1"><pre><span class="keyword">with</span> <span class="droplink">GL<ul><li><a href="gl.ads.html#gl.ads:66:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l66" title="To spec">To spec</a></li><li><a href="src_gl.adb.html#l17" title="To body">To body</a></li></ul></span>, <span class="droplink">GL.IO<ul><li><a href="gl-io.ads.html#gl-io.ads:45:12" title="To API doc">To API doc</a></li><li><a href="src_gl-io.ads.html#l45" title="To spec">To spec</a></li><li><a href="src_gl-io.adb.html#l14" title="To body">To body</a></li></ul></span>, <span class="droplink">UnZip.Streams<ul><li><a href="unzip-streams.ads.html#unzip-streams.ads:17:15" title="To API doc">To API doc</a></li><li><a href="src_unzip-streams.ads.html#l17" title="To spec">To spec</a></li><li><a href="src_unzip-streams.adb.html#l7" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l2"><pre> </pre></li>
<li id="l3"><pre><span class="keyword">with</span> Ada.Characters.Handling;           <span class="keyword">use</span> Ada.Characters.Handling; </pre></li>
<li id="l4"><pre><span class="keyword">with</span> Ada.Exceptions;                    <span class="keyword">use</span> Ada.Exceptions; </pre></li>
<li id="l5"><pre><span class="keyword">with</span> Ada.Strings.Fixed;                 <span class="keyword">use</span> Ada.Strings, Ada.Strings.Fixed; </pre></li>
<li id="l6"><pre><span class="keyword">with</span> Ada.Strings.Unbounded;             <span class="keyword">use</span> Ada.Strings.Unbounded; </pre></li>
<li id="l7"><pre><span class="keyword">with</span> Ada.Unchecked_Deallocation; </pre></li>
<li id="l8"><pre><span class="keyword">with</span> Ada.Containers.Hashed_Maps; </pre></li>
<li id="l9"><pre><span class="keyword">with</span> Ada.Strings.Unbounded.Hash; </pre></li>
<li id="l10"><pre> </pre></li>
<li id="l11"><pre><span class="keyword">package</span> <span class="keyword">body</span> <span class="droplink">GLOBE_3D.Textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:1:18" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l1" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l12"><pre> </pre></li>
<li id="l13"><pre>  <span class="comment">------------------------------------------------------------------</span> </pre></li>
<li id="l14"><pre>  <span class="comment">-- 1) Fast access though the number (Image_ID - &gt; Texture_info) : --</span> </pre></li>
<li id="l15"><pre>  <span class="comment">------------------------------------------------------------------</span> </pre></li>
<li id="l16"><pre>  <span class="keyword">type</span> Texture_info <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l17"><pre>    loaded        : Boolean := False; </pre></li>
<li id="l18"><pre>    blending_hint : Boolean := False; </pre></li>
<li id="l19"><pre>    name          : <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span> := <span class="droplink">empty<ul><li><a href="globe_3d.ads.html#globe_3d.ads:83:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l83" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l20"><pre>  <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l21"><pre> </pre></li>
<li id="l22"><pre>  <span class="keyword">type</span> Texture_info_array <span class="keyword">is</span> <span class="keyword">array</span> (<span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span> <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <a href="src_globe_3d-textures.adb.html#l16" title="defined at globe_3d-textures.adb:16:8">Texture_info</a>; </pre></li>
<li id="l23"><pre>  <span class="keyword">type</span> p_Texture_info_array <span class="keyword">is</span> <span class="keyword">access</span> <a href="src_globe_3d-textures.adb.html#l22" title="defined at globe_3d-textures.adb:22:8">Texture_info_array</a>; </pre></li>
<li id="l24"><pre> </pre></li>
<li id="l25"><pre>  <span class="keyword">procedure</span> Dispose <span class="keyword">is</span> <span class="keyword">new</span> Ada.Unchecked_Deallocation (<a href="src_globe_3d-textures.adb.html#l22" title="defined at globe_3d-textures.adb:22:8">Texture_info_array</a>, <a href="src_globe_3d-textures.adb.html#l23" title="defined at globe_3d-textures.adb:23:8">p_Texture_info_array</a>); </pre></li>
<li id="l26"><pre> </pre></li>
<li id="l27"><pre>  <span class="comment">-----------------------------------</span> </pre></li>
<li id="l28"><pre>  <span class="comment">-- 2) Fast access through a name --</span> </pre></li>
<li id="l29"><pre>  <span class="comment">-----------------------------------</span> </pre></li>
<li id="l30"><pre> </pre></li>
<li id="l31"><pre>  <span class="keyword">package</span> Texture_Name_Mapping <span class="keyword">is</span> <span class="keyword">new</span> Ada.Containers.Hashed_Maps </pre></li>
<li id="l32"><pre>     (Key_Type        =&gt; Ada.Strings.Unbounded.Unbounded_String, </pre></li>
<li id="l33"><pre>      Element_Type    =&gt; <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>, </pre></li>
<li id="l34"><pre>      Hash            =&gt; Ada.Strings.Unbounded.Hash, </pre></li>
<li id="l35"><pre>      Equivalent_Keys =&gt; Ada.Strings.Unbounded.&quot;=&quot;); </pre></li>
<li id="l36"><pre> </pre></li>
<li id="l37"><pre>  <span class="keyword">type</span> Texture_2d_infos_type <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l38"><pre>    tex               : <a href="src_globe_3d-textures.adb.html#l23" title="defined at globe_3d-textures.adb:23:8">p_Texture_info_array</a>; </pre></li>
<li id="l39"><pre>    map               : Texture_Name_Mapping.Map; </pre></li>
<li id="l40"><pre>    last_entry_in_use : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l41"><pre>  <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l42"><pre> </pre></li>
<li id="l43"><pre>  empty_texture_2d_infos : <span class="keyword">constant</span> <a href="src_globe_3d-textures.adb.html#l37" title="defined at globe_3d-textures.adb:37:8">Texture_2d_infos_type</a> := </pre></li>
<li id="l44"><pre>    (<span class="keyword">null</span>, </pre></li>
<li id="l45"><pre>      Texture_Name_Mapping.Empty_Map, </pre></li>
<li id="l46"><pre>      <span class="droplink">null_image<ul><li><a href="globe_3d.ads.html#globe_3d.ads:100:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l100" title="To spec">To spec</a></li></ul></span> </pre></li>
<li id="l47"><pre>); </pre></li>
<li id="l48"><pre> </pre></li>
<li id="l49"><pre>  Texture_2d_Infos : <a href="src_globe_3d-textures.adb.html#l37" title="defined at globe_3d-textures.adb:37:8">Texture_2d_infos_type</a> := <a href="src_globe_3d-textures.adb.html#l43" title="defined at globe_3d-textures.adb:43:3">empty_texture_2d_infos</a>; </pre></li>
<li id="l50"><pre> </pre></li>
<li id="l51"><pre>  <span class="comment">-----------------------------</span> </pre></li>
<li id="l52"><pre>  <span class="comment">-- Load_texture (internal) --</span> </pre></li>
<li id="l53"><pre>  <span class="comment">-----------------------------</span> </pre></li>
<li id="l54"><pre> </pre></li>
<li id="l55"><pre>  <span class="keyword">procedure</span> Load_texture_2D (id : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>; blending_hint : <span class="keyword">out</span> Boolean) <span class="keyword">is</span> </pre></li>
<li id="l56"><pre>    tex_name : <span class="keyword">constant</span> String := Trim (Texture_2d_Infos.tex.<span class="keyword">all</span> (<a href="src_globe_3d-textures.adb.html#l55" title="defined at globe_3d-textures.adb:55:30">id</a>).name, Right); </pre></li>
<li id="l57"><pre> </pre></li>
<li id="l58"><pre>    <span class="keyword">procedure</span> Try (zif : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Zip.Zip_info<ul><li><a href="zip.ads.html#zip.ads:53:8" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l53" title="To spec">To spec</a></li><li><a href="src_zip.ads.html#l308" title="To body">To body</a></li></ul></span>; name : String) <span class="keyword">is</span> </pre></li>
<li id="l59"><pre>      <span class="keyword">use</span> <span class="droplink">UnZip.Streams<ul><li><a href="unzip-streams.ads.html#unzip-streams.ads:17:15" title="To API doc">To API doc</a></li><li><a href="src_unzip-streams.ads.html#l17" title="To spec">To spec</a></li><li><a href="src_unzip-streams.adb.html#l7" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l60"><pre>      ftex : <span class="droplink">Zipped_File_Type<ul><li><a href="unzip-streams.ads.html#unzip-streams.ads:21:9" title="To API doc">To API doc</a></li><li><a href="src_unzip-streams.ads.html#l21" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l61"><pre>      <span class="keyword">procedure</span> Try_a_type (tex_name_ext : String; format : <span class="droplink">GL.IO.Supported_format<ul><li><a href="gl-io.ads.html#gl-io.ads:49:8" title="To API doc">To API doc</a></li><li><a href="src_gl-io.ads.html#l49" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l62"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l63"><pre>        <span class="droplink">Open<ul><li><a href="unzip-streams.ads.html#unzip-streams.ads:51:14" title="To API doc">To API doc</a></li><li><a href="src_unzip-streams.ads.html#l51" title="To spec">To spec</a></li><li><a href="src_unzip-streams.adb.html#l182" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l60" title="defined at globe_3d-textures.adb:60:7">ftex</a>, <a href="src_globe_3d-textures.adb.html#l58" title="defined at globe_3d-textures.adb:58:20">zif</a>, <a href="src_globe_3d-textures.adb.html#l61" title="defined at globe_3d-textures.adb:61:29">tex_name_ext</a>); </pre></li>
<li id="l64"><pre>        <span class="droplink">GL.IO.Load<ul><li><a href="gl-io.ads.html#gl-io.ads:83:14" title="To API doc">To API doc</a></li><li><a href="src_gl-io.ads.html#l83" title="To spec">To spec</a></li><li><a href="src_gl-io.adb.html#l740" title="To body">To body</a></li></ul></span> (<span class="droplink">Stream<ul><li><a href="unzip-streams.ads.html#unzip-streams.ads:64:13" title="To API doc">To API doc</a></li><li><a href="src_unzip-streams.ads.html#l64" title="To spec">To spec</a></li><li><a href="src_unzip-streams.adb.html#l320" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l60" title="defined at globe_3d-textures.adb:60:7">ftex</a>), <a href="src_globe_3d-textures.adb.html#l61" title="defined at globe_3d-textures.adb:61:52">format</a>, <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>&apos;<a href="src_globe_3d-textures.adb.html#l142" title="defined at globe_3d-textures.adb:142:5">Pos</a> (<a href="src_globe_3d-textures.adb.html#l55" title="defined at globe_3d-textures.adb:55:30">id</a>) + 1, <a href="src_globe_3d-textures.adb.html#l55" title="defined at globe_3d-textures.adb:55:45">blending_hint</a>); </pre></li>
<li id="l65"><pre>        <span class="droplink">Close<ul><li><a href="unzip-streams.ads.html#unzip-streams.ads:59:14" title="To API doc">To API doc</a></li><li><a href="src_unzip-streams.ads.html#l59" title="To spec">To spec</a></li><li><a href="src_unzip-streams.adb.html#l156" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l60" title="defined at globe_3d-textures.adb:60:7">ftex</a>); </pre></li>
<li id="l66"><pre>      <span class="keyword">exception</span> </pre></li>
<li id="l67"><pre>        <span class="keyword">when</span> <span class="droplink">Zip.File_name_not_found<ul><li><a href="zip.ads.html#zip.ads:191:3" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l191" title="To spec">To spec</a></li></ul></span> =&gt; </pre></li>
<li id="l68"><pre>          <span class="keyword">raise</span>; </pre></li>
<li id="l69"><pre>        <span class="keyword">when</span> e : <span class="keyword">others</span> =&gt; </pre></li>
<li id="l70"><pre>          Raise_Exception ( </pre></li>
<li id="l71"><pre>            Exception_Identity (e), </pre></li>
<li id="l72"><pre>            Exception_Message (e) &amp; <span class="string">&quot; on texture : &quot;</span> &amp; <a href="src_globe_3d-textures.adb.html#l61" title="defined at globe_3d-textures.adb:61:29">tex_name_ext</a>); </pre></li>
<li id="l73"><pre>      <span class="keyword">end</span> <span class="droplink">Try_a_type<ul><li><a href="src_globe_3d-textures.adb.html#l61" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l61" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l74"><pre>    <span class="keyword">begin</span> <span class="comment">-- Try</span> </pre></li>
<li id="l75"><pre>      <span class="droplink">Load_if_needed<ul><li><a href="globe_3d.ads.html#globe_3d.ads:580:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l580" title="To spec">To spec</a></li><li><a href="src_globe_3d.adb.html#l902" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l58" title="defined at globe_3d-textures.adb:58:20">zif</a>, <a href="src_globe_3d-textures.adb.html#l58" title="defined at globe_3d-textures.adb:58:47">name</a>); </pre></li>
<li id="l76"><pre>      <span class="droplink">Try_a_type<ul><li><a href="src_globe_3d-textures.adb.html#l61" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l61" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l56" title="defined at globe_3d-textures.adb:56:5">tex_name</a> &amp; <span class="string">&quot;.TGA&quot;</span>, GL.IO.TGA); </pre></li>
<li id="l77"><pre>    <span class="keyword">exception</span> </pre></li>
<li id="l78"><pre>      <span class="keyword">when</span> <span class="droplink">Zip.File_name_not_found<ul><li><a href="zip.ads.html#zip.ads:191:3" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l191" title="To spec">To spec</a></li></ul></span> =&gt; </pre></li>
<li id="l79"><pre>        <span class="droplink">Try_a_type<ul><li><a href="src_globe_3d-textures.adb.html#l61" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l61" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l56" title="defined at globe_3d-textures.adb:56:5">tex_name</a> &amp; <span class="string">&quot;.BMP&quot;</span>, GL.IO.BMP); </pre></li>
<li id="l80"><pre>    <span class="keyword">end</span> <span class="droplink">Try<ul><li><a href="src_globe_3d-textures.adb.html#l58" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l58" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l81"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l82"><pre>    <span class="keyword">begin</span> </pre></li>
<li id="l83"><pre>      <span class="droplink">Try<ul><li><a href="src_globe_3d-textures.adb.html#l58" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l58" title="To body">To body</a></li></ul></span> (<span class="droplink">zif_level<ul><li><a href="globe_3d.ads.html#globe_3d.ads:578:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l578" title="To spec">To spec</a></li></ul></span>, To_String (<span class="droplink">level_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:572:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l572" title="To spec">To spec</a></li></ul></span>)); </pre></li>
<li id="l84"><pre>    <span class="keyword">exception</span> </pre></li>
<li id="l85"><pre>      <span class="keyword">when</span> <span class="droplink">Zip.File_name_not_found<ul><li><a href="zip.ads.html#zip.ads:191:3" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l191" title="To spec">To spec</a></li></ul></span> | </pre></li>
<li id="l86"><pre>           <span class="droplink">Zip.Zip_file_open_Error<ul><li><a href="zip.ads.html#zip.ads:73:3" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l73" title="To spec">To spec</a></li></ul></span> =&gt; </pre></li>
<li id="l87"><pre>        <span class="comment">-- Not found in level - specific pack</span> </pre></li>
<li id="l88"><pre>        <span class="droplink">Try<ul><li><a href="src_globe_3d-textures.adb.html#l58" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l58" title="To body">To body</a></li></ul></span> (<span class="droplink">zif_global<ul><li><a href="globe_3d.ads.html#globe_3d.ads:578:15" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l578" title="To spec">To spec</a></li></ul></span>, To_String (<span class="droplink">global_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:574:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l574" title="To spec">To spec</a></li></ul></span>)); </pre></li>
<li id="l89"><pre>    <span class="keyword">end</span>; </pre></li>
<li id="l90"><pre>  <span class="keyword">exception</span> </pre></li>
<li id="l91"><pre>    <span class="keyword">when</span> <span class="droplink">Zip.File_name_not_found<ul><li><a href="zip.ads.html#zip.ads:191:3" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l191" title="To spec">To spec</a></li></ul></span> | </pre></li>
<li id="l92"><pre>         <span class="droplink">Zip.Zip_file_open_Error<ul><li><a href="zip.ads.html#zip.ads:73:3" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l73" title="To spec">To spec</a></li></ul></span> =&gt; </pre></li>
<li id="l93"><pre>      <span class="comment">-- Never found - neither in level, nor in global pack</span> </pre></li>
<li id="l94"><pre>      Raise_Exception (<span class="droplink">Missing_texture<ul><li><a href="globe_3d.ads.html#globe_3d.ads:473:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l473" title="To spec">To spec</a></li></ul></span>&apos;Identity, <span class="string">&quot;texture : &quot;</span> &amp; <a href="src_globe_3d-textures.adb.html#l56" title="defined at globe_3d-textures.adb:56:5">tex_name</a>); </pre></li>
<li id="l95"><pre>  <span class="keyword">end</span> <span class="droplink">Load_texture_2D<ul><li><a href="src_globe_3d-textures.adb.html#l55" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l55" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l96"><pre> </pre></li>
<li id="l97"><pre>  <span class="keyword">function</span> <span class="droplink">Valid_texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:86:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l86" title="To spec">To spec</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:86:30" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l86" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> Boolean <span class="keyword">is</span> </pre></li>
<li id="l98"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l99"><pre>    <span class="keyword">return</span> <span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:86:30" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l86" title="To spec">To spec</a></li></ul></span> <span class="keyword">in</span> <span class="droplink">null_image<ul><li><a href="globe_3d.ads.html#globe_3d.ads:100:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l100" title="To spec">To spec</a></li></ul></span> + 1 .. Texture_2d_Infos.last_entry_in_use; </pre></li>
<li id="l100"><pre>  <span class="keyword">end</span> <span class="droplink">Valid_texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:86:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l86" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l97" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l101"><pre> </pre></li>
<li id="l102"><pre>  <span class="keyword">procedure</span> <span class="droplink">Check_2D_texture<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>; <span class="droplink">blending_hint<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span> : <span class="keyword">out</span> Boolean) <span class="keyword">is</span> </pre></li>
<li id="l103"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l104"><pre>    <span class="keyword">if</span> <span class="keyword">not</span> <span class="droplink">Valid_texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:86:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l86" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l97" title="To body">To body</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>) <span class="keyword">then</span> </pre></li>
<li id="l105"><pre>      <span class="keyword">raise</span> <span class="droplink">Undefined_texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:93:3" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l93" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l106"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l107"><pre>    <span class="keyword">if</span> Texture_2d_Infos.tex.<span class="keyword">all</span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>).loaded <span class="keyword">then</span> </pre></li>
<li id="l108"><pre>      <span class="droplink">blending_hint<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span> := Texture_2d_Infos.tex.<span class="keyword">all</span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>).blending_hint; </pre></li>
<li id="l109"><pre>    <span class="keyword">else</span> </pre></li>
<li id="l110"><pre>      <span class="droplink">Load_texture_2D<ul><li><a href="src_globe_3d-textures.adb.html#l55" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l55" title="To body">To body</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>, <span class="droplink">blending_hint<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l111"><pre>      Texture_2d_Infos.tex.<span class="keyword">all</span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>).loaded := True; </pre></li>
<li id="l112"><pre>      Texture_2d_Infos.tex.<span class="keyword">all</span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>).blending_hint := <span class="droplink">blending_hint<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l113"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l114"><pre>  <span class="keyword">end</span> <span class="droplink">Check_2D_texture<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l102" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l115"><pre> </pre></li>
<li id="l116"><pre>  <span class="keyword">procedure</span> <span class="droplink">Check_2D_texture<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:82:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l82" title="To spec">To spec</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:82:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l82" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l117"><pre>    junk_blending_hint : Boolean; <span class="keyword">pragma</span> Unreferenced (<a href="src_globe_3d-textures.adb.html#l117" title="defined at globe_3d-textures.adb:117:5">junk_blending_hint</a>); </pre></li>
<li id="l118"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l119"><pre>    <span class="droplink">Check_2D_texture<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:80:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l80" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l102" title="To body">To body</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:82:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l82" title="To spec">To spec</a></li></ul></span>, <a href="src_globe_3d-textures.adb.html#l117" title="defined at globe_3d-textures.adb:117:5">junk_blending_hint</a>); </pre></li>
<li id="l120"><pre>  <span class="keyword">end</span> <span class="droplink">Check_2D_texture<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:82:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l82" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l116" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l121"><pre> </pre></li>
<li id="l122"><pre>  <span class="keyword">procedure</span> <span class="droplink">Check_all_textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:84:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l84" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l123"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l124"><pre>    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="droplink">null_image<ul><li><a href="globe_3d.ads.html#globe_3d.ads:100:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l100" title="To spec">To spec</a></li></ul></span> + 1 .. Texture_2d_Infos.last_entry_in_use <span class="keyword">loop</span> </pre></li>
<li id="l125"><pre>      <span class="droplink">Check_2D_texture<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:82:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l82" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l116" title="To body">To body</a></li></ul></span> (i); </pre></li>
<li id="l126"><pre>    <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l127"><pre>  <span class="keyword">end</span> <span class="droplink">Check_all_textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:84:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l84" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l122" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l128"><pre> </pre></li>
<li id="l129"><pre>  <span class="keyword">procedure</span> <span class="droplink">Reset_textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:98:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l98" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l130"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l131"><pre>    <span class="keyword">if</span> Texture_2d_Infos.tex /= <span class="keyword">null</span> <span class="keyword">then</span> </pre></li>
<li id="l132"><pre>      <a href="src_globe_3d-textures.adb.html#l25" title="defined at globe_3d-textures.adb:25:13">Dispose</a> (Texture_2d_Infos.tex); </pre></li>
<li id="l133"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l134"><pre>    <a href="src_globe_3d-textures.adb.html#l49" title="defined at globe_3d-textures.adb:49:3">Texture_2d_Infos</a> := <a href="src_globe_3d-textures.adb.html#l43" title="defined at globe_3d-textures.adb:43:3">empty_texture_2d_infos</a>; </pre></li>
<li id="l135"><pre>  <span class="keyword">end</span> <span class="droplink">Reset_textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:98:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l98" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l129" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l136"><pre> </pre></li>
<li id="l137"><pre>  <span class="keyword">procedure</span> <span class="droplink">Add_texture_name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span> (<span class="droplink">name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span> : String; <span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span> : <span class="keyword">out</span> <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l138"><pre>    new_tab : <a href="src_globe_3d-textures.adb.html#l23" title="defined at globe_3d-textures.adb:23:8">p_Texture_info_array</a>; </pre></li>
<li id="l139"><pre>    up_name : <span class="keyword">constant</span> String := To_Upper (<span class="droplink">name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l140"><pre>    <span class="comment">-- Convention : UPPER_CASE for identifiers</span> </pre></li>
<li id="l141"><pre>    n_id : <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span> := <span class="droplink">empty<ul><li><a href="globe_3d.ads.html#globe_3d.ads:83:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l83" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l142"><pre>    pos : Texture_Name_Mapping.Cursor; </pre></li>
<li id="l143"><pre>    success : Boolean; </pre></li>
<li id="l144"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l145"><pre>    <span class="keyword">if</span> Texture_2d_Infos.tex = <span class="keyword">null</span> <span class="keyword">then</span> </pre></li>
<li id="l146"><pre>      Texture_2d_Infos.tex := <span class="keyword">new</span> <a href="src_globe_3d-textures.adb.html#l22" title="defined at globe_3d-textures.adb:22:8">Texture_info_array</a> (0 .. 100); </pre></li>
<li id="l147"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l148"><pre>    <span class="keyword">if</span> Texture_2d_Infos.last_entry_in_use &gt;= Texture_2d_Infos.tex&apos;Last <span class="keyword">then</span> </pre></li>
<li id="l149"><pre>      <span class="comment">-- We need to enlarge the table : we double it .. .</span> </pre></li>
<li id="l150"><pre>      <a href="src_globe_3d-textures.adb.html#l138" title="defined at globe_3d-textures.adb:138:5">new_tab</a> := <span class="keyword">new</span> <a href="src_globe_3d-textures.adb.html#l22" title="defined at globe_3d-textures.adb:22:8">Texture_info_array</a> (0 .. Texture_2d_Infos.tex&apos;Last * 2); </pre></li>
<li id="l151"><pre>      <a href="src_globe_3d-textures.adb.html#l138" title="defined at globe_3d-textures.adb:138:5">new_tab</a>.<span class="keyword">all</span> (Texture_2d_Infos.tex&apos;Range) := Texture_2d_Infos.tex.<span class="keyword">all</span>; </pre></li>
<li id="l152"><pre>      <a href="src_globe_3d-textures.adb.html#l25" title="defined at globe_3d-textures.adb:25:13">Dispose</a> (Texture_2d_Infos.tex); </pre></li>
<li id="l153"><pre>      Texture_2d_Infos.tex := <a href="src_globe_3d-textures.adb.html#l138" title="defined at globe_3d-textures.adb:138:5">new_tab</a>; </pre></li>
<li id="l154"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l155"><pre>    <span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span> := Texture_2d_Infos.last_entry_in_use + 1; </pre></li>
<li id="l156"><pre>    <span class="keyword">for</span> i <span class="keyword">in</span> <a href="src_globe_3d-textures.adb.html#l139" title="defined at globe_3d-textures.adb:139:5">up_name</a>&apos;Range <span class="keyword">loop</span> </pre></li>
<li id="l157"><pre>      <a href="src_globe_3d-textures.adb.html#l141" title="defined at globe_3d-textures.adb:141:5">n_id</a> (<a href="src_globe_3d-textures.adb.html#l141" title="defined at globe_3d-textures.adb:141:5">n_id</a>&apos;First + i - <a href="src_globe_3d-textures.adb.html#l139" title="defined at globe_3d-textures.adb:139:5">up_name</a>&apos;First) := <a href="src_globe_3d-textures.adb.html#l139" title="defined at globe_3d-textures.adb:139:5">up_name</a> (i); </pre></li>
<li id="l158"><pre>    <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l159"><pre>    Texture_2d_Infos.tex.<span class="keyword">all</span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span>).name := <a href="src_globe_3d-textures.adb.html#l141" title="defined at globe_3d-textures.adb:141:5">n_id</a>; </pre></li>
<li id="l160"><pre>    Texture_2d_Infos.last_entry_in_use := </pre></li>
<li id="l161"><pre>      <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>&apos;Max (Texture_2d_Infos.last_entry_in_use, <span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l162"><pre>    <span class="comment">-- Feed the name dictionary with the new name:</span> </pre></li>
<li id="l163"><pre>    Texture_Name_Mapping.Insert ( </pre></li>
<li id="l164"><pre>      Texture_2d_Infos.map, </pre></li>
<li id="l165"><pre>      Ada.Strings.Unbounded.To_Unbounded_String (<a href="src_globe_3d-textures.adb.html#l139" title="defined at globe_3d-textures.adb:139:5">up_name</a>), </pre></li>
<li id="l166"><pre>      <span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:46" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span>, </pre></li>
<li id="l167"><pre>      <a href="src_globe_3d-textures.adb.html#l142" title="defined at globe_3d-textures.adb:142:5">pos</a>, </pre></li>
<li id="l168"><pre>      <a href="src_globe_3d-textures.adb.html#l143" title="defined at globe_3d-textures.adb:143:5">success</a> </pre></li>
<li id="l169"><pre>); </pre></li>
<li id="l170"><pre>    <span class="keyword">if</span> <span class="keyword">not</span> <a href="src_globe_3d-textures.adb.html#l143" title="defined at globe_3d-textures.adb:143:5">success</a> <span class="keyword">then</span> <span class="comment">-- A.18.4. 45/2</span> </pre></li>
<li id="l171"><pre>      <span class="keyword">raise</span> <span class="droplink">Duplicate_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:256:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l256" title="To spec">To spec</a></li></ul></span> <span class="keyword">with</span> <span class="droplink">name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:31" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li></ul></span> &amp; <span class="string">&quot;, already stored as &quot;</span> &amp; <a href="src_globe_3d-textures.adb.html#l139" title="defined at globe_3d-textures.adb:139:5">up_name</a>; </pre></li>
<li id="l172"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l173"><pre>  <span class="keyword">end</span> <span class="droplink">Add_texture_name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l137" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l174"><pre> </pre></li>
<li id="l175"><pre>  <span class="keyword">procedure</span> <span class="droplink">Register_textures_from_resources<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:52:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l52" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l176"><pre> </pre></li>
<li id="l177"><pre>    <span class="keyword">procedure</span> Register (zif : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Zip.Zip_info<ul><li><a href="zip.ads.html#zip.ads:53:8" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l53" title="To spec">To spec</a></li><li><a href="src_zip.ads.html#l308" title="To body">To body</a></li></ul></span>; name : String) <span class="keyword">is</span> </pre></li>
<li id="l178"><pre>      <span class="comment">--</span> </pre></li>
<li id="l179"><pre>      <span class="keyword">procedure</span> Action (Name_String : String) <span class="keyword">is</span> </pre></li>
<li id="l180"><pre>        dummy : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l181"><pre>        ext : <span class="keyword">constant</span> String := To_Upper (<a href="src_globe_3d-textures.adb.html#l179" title="defined at globe_3d-textures.adb:179:25">Name_String</a> (<a href="src_globe_3d-textures.adb.html#l179" title="defined at globe_3d-textures.adb:179:25">Name_String</a>&apos;Last - 3 .. <a href="src_globe_3d-textures.adb.html#l179" title="defined at globe_3d-textures.adb:179:25">Name_String</a>&apos;Last)); </pre></li>
<li id="l182"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l183"><pre>        <span class="keyword">if</span> <a href="src_globe_3d-textures.adb.html#l181" title="defined at globe_3d-textures.adb:181:9">ext</a> = <span class="string">&quot;.BMP&quot;</span> <span class="keyword">or</span> <span class="keyword">else</span> <a href="src_globe_3d-textures.adb.html#l181" title="defined at globe_3d-textures.adb:181:9">ext</a> = <span class="string">&quot;.TGA&quot;</span> <span class="keyword">then</span> </pre></li>
<li id="l184"><pre>          <span class="droplink">Add_texture_name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l137" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l179" title="defined at globe_3d-textures.adb:179:25">Name_String</a> (<a href="src_globe_3d-textures.adb.html#l179" title="defined at globe_3d-textures.adb:179:25">Name_String</a>&apos;First .. <a href="src_globe_3d-textures.adb.html#l179" title="defined at globe_3d-textures.adb:179:25">Name_String</a>&apos;Last - 4), <a href="src_globe_3d-textures.adb.html#l180" title="defined at globe_3d-textures.adb:180:9">dummy</a>); </pre></li>
<li id="l185"><pre>        <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l186"><pre>      <span class="keyword">end</span> <span class="droplink">Action<ul><li><a href="src_globe_3d-textures.adb.html#l179" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l179" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l187"><pre>      <span class="comment">--</span> </pre></li>
<li id="l188"><pre>      <span class="keyword">procedure</span> Traverse <span class="keyword">is</span> <span class="keyword">new</span> <span class="droplink">Zip.Traverse<ul><li><a href="zip.ads.html#zip.ads:140:13" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l140" title="To spec">To spec</a></li><li><a href="src_zip.adb.html#l353" title="To body">To body</a></li></ul></span> (<span class="droplink">Action<ul><li><a href="src_globe_3d-textures.adb.html#l179" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l179" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l189"><pre>    <span class="keyword">begin</span> </pre></li>
<li id="l190"><pre>      <span class="droplink">Load_if_needed<ul><li><a href="globe_3d.ads.html#globe_3d.ads:580:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l580" title="To spec">To spec</a></li><li><a href="src_globe_3d.adb.html#l902" title="To body">To body</a></li></ul></span> (<a href="src_globe_3d-textures.adb.html#l177" title="defined at globe_3d-textures.adb:177:25">zif</a>, <a href="src_globe_3d-textures.adb.html#l177" title="defined at globe_3d-textures.adb:177:52">name</a>); </pre></li>
<li id="l191"><pre>      <a href="src_globe_3d-textures.adb.html#l188" title="defined at globe_3d-textures.adb:188:17">Traverse</a> (<a href="src_globe_3d-textures.adb.html#l177" title="defined at globe_3d-textures.adb:177:25">zif</a>); </pre></li>
<li id="l192"><pre>      <span class="comment">-- That&apos;s it!</span> </pre></li>
<li id="l193"><pre>    <span class="keyword">exception</span> </pre></li>
<li id="l194"><pre>      <span class="keyword">when</span> <span class="droplink">Zip.Zip_file_open_Error<ul><li><a href="zip.ads.html#zip.ads:73:3" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l73" title="To spec">To spec</a></li></ul></span> =&gt; </pre></li>
<li id="l195"><pre>        <span class="keyword">null</span>; </pre></li>
<li id="l196"><pre>    <span class="keyword">end</span> <span class="droplink">Register<ul><li><a href="src_globe_3d-textures.adb.html#l177" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l177" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l197"><pre> </pre></li>
<li id="l198"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l199"><pre>    <span class="droplink">Register<ul><li><a href="src_globe_3d-textures.adb.html#l177" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l177" title="To body">To body</a></li></ul></span> (<span class="droplink">zif_level<ul><li><a href="globe_3d.ads.html#globe_3d.ads:578:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l578" title="To spec">To spec</a></li></ul></span>,  To_String (<span class="droplink">level_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:572:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l572" title="To spec">To spec</a></li></ul></span>)); </pre></li>
<li id="l200"><pre>    <span class="droplink">Register<ul><li><a href="src_globe_3d-textures.adb.html#l177" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l177" title="To body">To body</a></li></ul></span> (<span class="droplink">zif_global<ul><li><a href="globe_3d.ads.html#globe_3d.ads:578:15" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l578" title="To spec">To spec</a></li></ul></span>, To_String (<span class="droplink">global_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:574:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l574" title="To spec">To spec</a></li></ul></span>)); </pre></li>
<li id="l201"><pre>  <span class="keyword">end</span> <span class="droplink">Register_textures_from_resources<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:52:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l52" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l175" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l202"><pre> </pre></li>
<li id="l203"><pre>  <span class="keyword">procedure</span> <span class="droplink">Associate_textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:64:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l64" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l204"><pre>    dummy : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l205"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l206"><pre>    <span class="droplink">Reset_textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:98:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l98" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l129" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l207"><pre>    <span class="keyword">for</span> t <span class="keyword">in</span> <span class="droplink">Texture_enum<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:63:10" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l63" title="To spec">To spec</a></li></ul></span> <span class="keyword">loop</span> </pre></li>
<li id="l208"><pre>      <span class="droplink">Add_texture_name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:34:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l34" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l137" title="To body">To body</a></li></ul></span> (<span class="droplink">Texture_enum<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:63:10" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l63" title="To spec">To spec</a></li></ul></span>&apos;Image (t), <a href="src_globe_3d-textures.adb.html#l204" title="defined at globe_3d-textures.adb:204:5">dummy</a>); </pre></li>
<li id="l209"><pre>    <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l210"><pre>  <span class="keyword">end</span> <span class="droplink">Associate_textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:64:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l64" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l203" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l211"><pre> </pre></li>
<li id="l212"><pre>  <span class="keyword">function</span> <span class="droplink">Texture_name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:75:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l75" title="To spec">To spec</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:75:26" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l75" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span>; <span class="droplink">Trim_Flag<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:75:41" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l75" title="To spec">To spec</a></li></ul></span> : Boolean) <span class="keyword">return</span> <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l213"><pre>    tn : <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l214"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l215"><pre>    <span class="keyword">if</span> <span class="keyword">not</span> <span class="droplink">Valid_texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:86:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l86" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l97" title="To body">To body</a></li></ul></span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:75:26" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l75" title="To spec">To spec</a></li></ul></span>) <span class="keyword">then</span> </pre></li>
<li id="l216"><pre>      <span class="keyword">raise</span> <span class="droplink">Undefined_texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:93:3" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l93" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l217"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l218"><pre>    <a href="src_globe_3d-textures.adb.html#l213" title="defined at globe_3d-textures.adb:213:5">tn</a> := Texture_2d_Infos.tex.<span class="keyword">all</span> (<span class="droplink">id<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:75:26" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l75" title="To spec">To spec</a></li></ul></span>).name; </pre></li>
<li id="l219"><pre>    <span class="keyword">if</span> <span class="droplink">Trim_Flag<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:75:41" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l75" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l220"><pre>      <span class="keyword">return</span> Ada.Strings.Fixed.Trim (<a href="src_globe_3d-textures.adb.html#l213" title="defined at globe_3d-textures.adb:213:5">tn</a>, Right); </pre></li>
<li id="l221"><pre>    <span class="keyword">else</span> </pre></li>
<li id="l222"><pre>      <span class="keyword">return</span> <a href="src_globe_3d-textures.adb.html#l213" title="defined at globe_3d-textures.adb:213:5">tn</a>; </pre></li>
<li id="l223"><pre>    <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l224"><pre>  <span class="keyword">end</span> <span class="droplink">Texture_name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:75:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l75" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l212" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l225"><pre> </pre></li>
<li id="l226"><pre>  <span class="keyword">function</span> <span class="droplink">Texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:71:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l71" title="To spec">To spec</a></li></ul></span> (<span class="droplink">name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:71:24" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l71" title="To spec">To spec</a></li></ul></span> : String) <span class="keyword">return</span> <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l227"><pre>    trimmed : <span class="keyword">constant</span> String := Trim (<span class="droplink">name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:71:24" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l71" title="To spec">To spec</a></li></ul></span>, Both); </pre></li>
<li id="l228"><pre>    up_name : <span class="keyword">constant</span> String := To_Upper (<a href="src_globe_3d-textures.adb.html#l227" title="defined at globe_3d-textures.adb:227:5">trimmed</a>); </pre></li>
<li id="l229"><pre>  <span class="keyword">begin</span> </pre></li>
<li id="l230"><pre>    <span class="keyword">return</span> Texture_Name_Mapping.Element ( </pre></li>
<li id="l231"><pre>            Texture_2d_Infos.map, </pre></li>
<li id="l232"><pre>            Ada.Strings.Unbounded.To_Unbounded_String (<a href="src_globe_3d-textures.adb.html#l228" title="defined at globe_3d-textures.adb:228:5">up_name</a>)); </pre></li>
<li id="l233"><pre>  <span class="keyword">exception</span> </pre></li>
<li id="l234"><pre>    <span class="keyword">when</span> Constraint_Error =&gt; </pre></li>
<li id="l235"><pre>      <span class="keyword">raise</span> <span class="droplink">Undefined_texture_name<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:94:3" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l94" title="To spec">To spec</a></li></ul></span> <span class="keyword">with</span> </pre></li>
<li id="l236"><pre>        <span class="string">&quot;Texture : &quot;</span> &amp; <a href="src_globe_3d-textures.adb.html#l227" title="defined at globe_3d-textures.adb:227:5">trimmed</a> &amp; <span class="string">&quot;, searched as &quot;</span> &amp; <a href="src_globe_3d-textures.adb.html#l228" title="defined at globe_3d-textures.adb:228:5">up_name</a> &amp; <span class="string">&quot;.&quot;</span> &amp; </pre></li>
<li id="l237"><pre>        ASCII.CR &amp; ASCII.LF &amp; </pre></li>
<li id="l238"><pre>        <span class="string">&quot;Check data files:&quot;</span> &amp; </pre></li>
<li id="l239"><pre>        ASCII.CR &amp; ASCII.LF &amp; </pre></li>
<li id="l240"><pre>        <span class="string">&apos; &apos;</span> &amp; To_String (<span class="droplink">global_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:574:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l574" title="To spec">To spec</a></li></ul></span>) &amp; </pre></li>
<li id="l241"><pre>        ASCII.CR &amp; ASCII.LF &amp; </pre></li>
<li id="l242"><pre>        <span class="string">&apos; &apos;</span> &amp; To_String (<span class="droplink">level_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:572:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l572" title="To spec">To spec</a></li></ul></span>) &amp; <span class="string">&apos;.&apos;</span> &amp; </pre></li>
<li id="l243"><pre>        ASCII.CR &amp; ASCII.LF &amp; </pre></li>
<li id="l244"><pre>        <span class="string">&quot;Check calls of Add_texture_name or Associate_textures.&quot;</span>; </pre></li>
<li id="l245"><pre>  <span class="keyword">end</span> <span class="droplink">Texture_ID<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:71:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l71" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l226" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l246"><pre> </pre></li>
<li id="l247"><pre><span class="keyword">end</span> <span class="droplink">GLOBE_3D.Textures<ul><li><a href="globe_3d-textures.ads.html#globe_3d-textures.ads:1:18" title="To API doc">To API doc</a></li><li><a href="src_globe_3d-textures.ads.html#l1" title="To spec">To spec</a></li><li><a href="src_globe_3d-textures.adb.html#l11" title="To body">To body</a></li></ul></span>; </pre></li>
</ol></div>
</div>

</body>
</html>
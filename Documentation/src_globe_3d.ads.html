<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript"/>

  <title>
    File: globe_3d.ads
  </title>
  <link rel='stylesheet' href='support/docgen.css' type='text/css'/>
  <link rel='stylesheet' href='support/tags.css' type='text/css'/>
  <script src='support/docgen.js' type='text/javascript' charset='utf-8'></script>
</head>
<body onload="onloadDoc();">

<div id='leftSide'>
  <div id='leftSideInside'>
  <div id='header'>
    <h2 class="button">Documentation</h2>
    <a href='toc.html'><div class="button2">Table of Contents</div></a>

    <a href='tree.html'><div class="button2">Class Inheritance Tree</div></a>

  </div>
  </div>
</div> <!-- leftSide -->

<div class='subprograms'>
  <div class='details'><ol><li id="l1"><pre><span class="comment">-------------------------------------------------------------------------</span> </pre></li>
<li id="l2"><pre><span class="comment">--  GLOBE_3D - GL - based, real - time, 3D engine</span> </pre></li>
<li id="l3"><pre><span class="comment">--</span> </pre></li>
<li id="l4"><pre><span class="comment">--  Copyright (c) Gautier de Montmollin 2001 .. 2012</span> </pre></li>
<li id="l5"><pre><span class="comment">--  SWITZERLAND</span> </pre></li>
<li id="l6"><pre><span class="comment">--  Copyright (c) Rod Kay 2006 .. 2008</span> </pre></li>
<li id="l7"><pre><span class="comment">--  AUSTRALIA</span> </pre></li>
<li id="l8"><pre><span class="comment">--</span> </pre></li>
<li id="l9"><pre><span class="comment">--  Permission is hereby granted, free of charge, to any person obtaining a copy</span> </pre></li>
<li id="l10"><pre><span class="comment">--  of this software and associated documentation files (the &quot;Software&quot;), to deal</span> </pre></li>
<li id="l11"><pre><span class="comment">--  in the Software without restriction, including without limitation the rights</span> </pre></li>
<li id="l12"><pre><span class="comment">--  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span> </pre></li>
<li id="l13"><pre><span class="comment">--  copies of the Software, and to permit persons to whom the Software is</span> </pre></li>
<li id="l14"><pre><span class="comment">--  furnished to do so, subject to the following conditions:</span> </pre></li>
<li id="l15"><pre> </pre></li>
<li id="l16"><pre><span class="comment">--  The above copyright notice and this permission notice shall be included in</span> </pre></li>
<li id="l17"><pre><span class="comment">--  all copies or substantial portions of the Software.</span> </pre></li>
<li id="l18"><pre> </pre></li>
<li id="l19"><pre><span class="comment">--  THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span> </pre></li>
<li id="l20"><pre><span class="comment">--  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span> </pre></li>
<li id="l21"><pre><span class="comment">--  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span> </pre></li>
<li id="l22"><pre><span class="comment">--  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span> </pre></li>
<li id="l23"><pre><span class="comment">--  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span> </pre></li>
<li id="l24"><pre><span class="comment">--  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span> </pre></li>
<li id="l25"><pre><span class="comment">--  THE SOFTWARE.</span> </pre></li>
<li id="l26"><pre> </pre></li>
<li id="l27"><pre><span class="comment">-- N.  : this is the MIT License, as found 12 - Sep - 2007 on the site</span> </pre></li>
<li id="l28"><pre><span class="comment">-- http://www.opensource.org/licenses/mit - license.php</span> </pre></li>
<li id="l29"><pre> </pre></li>
<li id="l30"><pre><span class="comment">-------------------------------------------------------------------------</span> </pre></li>
<li id="l31"><pre> </pre></li>
<li id="l32"><pre><span class="comment">--</span> </pre></li>
<li id="l33"><pre><span class="comment">-- Added &quot;List_status&quot; and &quot;List_Id&quot; to the Object_3D.</span> </pre></li>
<li id="l34"><pre><span class="comment">-- by default the Display_One routine will now generate a GL command list</span> </pre></li>
<li id="l35"><pre><span class="comment">-- instead of sending the command each time explicitely.</span> </pre></li>
<li id="l36"><pre><span class="comment">-- To disable this feature, set Object_3D.List_Status to &quot;No_List&quot;.</span> </pre></li>
<li id="l37"><pre><span class="comment">-- If memory is not sufficient to hold a list, the Display_One routine will</span> </pre></li>
<li id="l38"><pre><span class="comment">-- automatically default back to &quot;No_List&quot;.</span> </pre></li>
<li id="l39"><pre><span class="comment">--</span> </pre></li>
<li id="l40"><pre><span class="comment">-- Uwe R. Zimmer, July 2011</span> </pre></li>
<li id="l41"><pre><span class="comment">--</span> </pre></li>
<li id="l42"><pre><span class="comment">--</span> </pre></li>
<li id="l43"><pre><span class="comment">-- Added an alternative</span> </pre></li>
<li id="l44"><pre><span class="comment">-- display face routine which is optimized to produce a shorter list</span> </pre></li>
<li id="l45"><pre><span class="comment">-- of GL commands. Runs slower than the original Display face routine</span> </pre></li>
<li id="l46"><pre><span class="comment">-- yet needs to be executed only once.</span> </pre></li>
<li id="l47"><pre><span class="comment">--</span> </pre></li>
<li id="l48"><pre><span class="comment">-- Uwe R. Zimmer, July 2011</span> </pre></li>
<li id="l49"><pre><span class="comment">--</span> </pre></li>
<li id="l50"><pre><span class="comment">-- Cleaned up the whole code base (including the whole GL base) to address</span> </pre></li>
<li id="l51"><pre><span class="comment">-- _every_ warning and style message. Restructed the code in places to</span> </pre></li>
<li id="l52"><pre><span class="comment">-- take advantage of Ada 2012. No identifier hides any other in the surrounding</span> </pre></li>
<li id="l53"><pre><span class="comment">-- scope any more. Compound assignments and function-expressions have been</span> </pre></li>
<li id="l54"><pre><span class="comment">-- used frequently to make the code leaner and safer. The code will no longer</span> </pre></li>
<li id="l55"><pre><span class="comment">-- compile under Ada 2005 or earlier though.</span> </pre></li>
<li id="l56"><pre><span class="comment">--</span> </pre></li>
<li id="l57"><pre><span class="comment">-- Uwe R. Zimmer, September 2013</span> </pre></li>
<li id="l58"><pre><span class="comment">--</span> </pre></li>
<li id="l59"><pre> </pre></li>
<li id="l60"><pre><span class="keyword">with</span> <span class="droplink">GL<ul><li><a href="gl.ads.html#gl.ads:66:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l66" title="To spec">To spec</a></li><li><a href="src_gl.adb.html#l17" title="To body">To body</a></li></ul></span>, </pre></li>
<li id="l61"><pre>     <span class="droplink">GL.Geometry<ul><li><a href="gl-geometry.ads.html#gl-geometry.ads:15:12" title="To API doc">To API doc</a></li><li><a href="src_gl-geometry.ads.html#l15" title="To spec">To spec</a></li><li><a href="src_gl-geometry.adb.html#l18" title="To body">To body</a></li></ul></span>, </pre></li>
<li id="l62"><pre>     <span class="droplink">GL.Frustums<ul><li><a href="gl-frustums.ads.html#gl-frustums.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_gl-frustums.ads.html#l19" title="To spec">To spec</a></li><li><a href="src_gl-frustums.adb.html#l1" title="To body">To body</a></li></ul></span>, </pre></li>
<li id="l63"><pre>     <span class="droplink">GL.Skinned_Geometry<ul><li><a href="gl-skinned_geometry.ads.html#gl-skinned_geometry.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_gl-skinned_geometry.ads.html#l14" title="To spec">To spec</a></li><li><a href="src_gl-skinned_geometry.adb.html#l18" title="To body">To body</a></li></ul></span>, </pre></li>
<li id="l64"><pre>     <span class="droplink">GL.Materials<ul><li><a href="gl-materials.ads.html#gl-materials.ads:1:12" title="To API doc">To API doc</a></li><li><a href="src_gl-materials.ads.html#l1" title="To spec">To spec</a></li><li><a href="src_gl-materials.adb.html#l1" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l65"><pre> </pre></li>
<li id="l66"><pre><span class="keyword">use</span> <span class="droplink">GL<ul><li><a href="gl.ads.html#gl.ads:66:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l66" title="To spec">To spec</a></li><li><a href="src_gl.adb.html#l17" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l67"><pre> </pre></li>
<li id="l68"><pre><span class="keyword">with</span> <span class="droplink">Zip<ul><li><a href="zip.ads.html#zip.ads:45:9" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l45" title="To spec">To spec</a></li><li><a href="src_zip.adb.html#l9" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l69"><pre> </pre></li>
<li id="l70"><pre><span class="keyword">with</span> Ada.Text_IO; </pre></li>
<li id="l71"><pre><span class="keyword">with</span> Ada.Numerics.Generic_Elementary_Functions; </pre></li>
<li id="l72"><pre><span class="keyword">with</span> Ada.Strings.Unbounded; </pre></li>
<li id="l73"><pre><span class="keyword">with</span> Ada.Unchecked_Deallocation; </pre></li>
<li id="l74"><pre><span class="keyword">with</span> Ada.Containers.Hashed_Maps; </pre></li>
<li id="l75"><pre><span class="keyword">with</span> Ada.Strings.Unbounded.Hash; </pre></li>
<li id="l76"><pre> </pre></li>
<li id="l77"><pre><span class="keyword">package</span> <span class="droplink">GLOBE_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:77:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l17" title="To body">To body</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l78"><pre> </pre></li>
<li id="l79"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:79:12" title="defined at globe_3d.ads:79:12">Ident</a> <span class="keyword">is</span> String (1 .. 40); </pre></li>
<li id="l80"><pre>   <span class="comment">-- Identifiers for naming things (textures, objects, . .. )</span> </pre></li>
<li id="l81"><pre>   <span class="comment">-- Identifiers are case insensitive and stored as UPPER_CASE</span> </pre></li>
<li id="l82"><pre> </pre></li>
<li id="l83"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:83:4" title="defined at globe_3d.ads:83:4">empty</a>  : <span class="keyword">constant</span> <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span> := (<span class="keyword">others</span> =&gt; <span class="string">&apos; &apos;</span>); </pre></li>
<li id="l84"><pre> </pre></li>
<li id="l85"><pre>   <span class="comment">-- Set the name of Zip archives containing the data.</span> </pre></li>
<li id="l86"><pre>   <span class="comment">--</span> </pre></li>
<li id="l87"><pre>   <span class="comment">-- If an item is not found in the level (local) data, it is</span> </pre></li>
<li id="l88"><pre>   <span class="comment">-- searched in the global data. The idea is to set the global</span> </pre></li>
<li id="l89"><pre>   <span class="comment">-- data once in the execution of the program, and change the local data</span> </pre></li>
<li id="l90"><pre>   <span class="comment">-- upon context change (e.g., in a game, a change of level).</span> </pre></li>
<li id="l91"><pre>   <span class="keyword">procedure</span> <span class="droplink">Set_local_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:91:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l915" title="To body">To body</a></li></ul></span>  (<a href="globe_3d.ads.html#globe_3d.ads:91:36" title="defined at globe_3d.ads:91:36">s</a> : String); </pre></li>
<li id="l92"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:92:14" title="defined at globe_3d.ads:92:14">Set_level_data_name</a>  (<a href="globe_3d.ads.html#globe_3d.ads:92:36" title="defined at globe_3d.ads:92:36">s</a> : String) <span class="keyword">renames</span> <span class="droplink">Set_local_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:91:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l91" title="To spec">To spec</a></li><li><a href="src_globe_3d.adb.html#l915" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l93"><pre>   <span class="keyword">procedure</span> <span class="droplink">Set_global_data_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:93:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l928" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:93:36" title="defined at globe_3d.ads:93:36">s</a> : String); </pre></li>
<li id="l94"><pre> </pre></li>
<li id="l95"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:95:4" title="defined at globe_3d.ads:95:4">data_file_not_found</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l96"><pre> </pre></li>
<li id="l97"><pre>   <span class="comment">-- List of textures ID&apos;s, correspond to files in</span> </pre></li>
<li id="l98"><pre>   <span class="comment">-- the archives and to GL&apos;s &quot;names&quot;</span> </pre></li>
<li id="l99"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:99:9" title="defined at globe_3d.ads:99:9">Image_ID</a> <span class="keyword">is</span> <span class="keyword">new</span> Integer <span class="keyword">range</span> -1 .. Integer&apos;Last; </pre></li>
<li id="l100"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:100:4" title="defined at globe_3d.ads:100:4">null_image</a> : <span class="keyword">constant</span> <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span> := -1; </pre></li>
<li id="l101"><pre> </pre></li>
<li id="l102"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:102:12" title="defined at globe_3d.ads:102:12">Real</a> <span class="keyword">is</span> <span class="droplink">GL.Double<ul><li><a href="gl.ads.html#gl.ads:128:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l128" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l103"><pre>   <span class="keyword">package</span> <a href="globe_3d.ads.html#globe_3d.ads:103:12" title="defined at globe_3d.ads:103:12">REF</a> <span class="keyword">is</span> <span class="keyword">new</span> Ada.Numerics.Generic_Elementary_Functions (<span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l104"><pre>   <span class="keyword">package</span> <a href="globe_3d.ads.html#globe_3d.ads:104:12" title="defined at globe_3d.ads:104:12">RIO</a> <span class="keyword">is</span> <span class="keyword">new</span> Ada.Text_IO.Float_IO (<span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l105"><pre> </pre></li>
<li id="l106"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:106:12" title="defined at globe_3d.ads:106:12">Vector_3D</a> <span class="keyword">is</span> <span class="droplink">GL.Double_Vector_3D<ul><li><a href="gl.ads.html#gl.ads:155:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l155" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l107"><pre>   <span class="keyword">type</span>  <a href="globe_3d.ads.html#globe_3d.ads:107:10" title="defined at globe_3d.ads:107:10">p_Vector_3D</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="keyword">all</span> <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l108"><pre> </pre></li>
<li id="l109"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:109:9" title="defined at globe_3d.ads:109:9">Vector_4D</a> <span class="keyword">is</span> <span class="keyword">array</span> (0 .. 3) <span class="keyword">of</span> <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l110"><pre> </pre></li>
<li id="l111"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:111:12" title="defined at globe_3d.ads:111:12">Point_3D</a> <span class="keyword">is</span> <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l112"><pre> </pre></li>
<li id="l113"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:113:9" title="defined at globe_3d.ads:113:9">Matrix</a>    <span class="keyword">is</span> <span class="keyword">array</span> (Positive <span class="keyword">range</span> &lt;&gt;, Positive <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="keyword">aliased</span> <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l114"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:114:9" title="defined at globe_3d.ads:114:9">Matrix_33</a> <span class="keyword">is</span> <span class="keyword">new</span> <span class="droplink">Matrix<ul><li><a href="globe_3d.ads.html#globe_3d.ads:113:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l113" title="To spec">To spec</a></li></ul></span> (1 .. 3, 1 .. 3); </pre></li>
<li id="l115"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:115:9" title="defined at globe_3d.ads:115:9">Matrix_44</a> <span class="keyword">is</span> <span class="keyword">new</span> <span class="droplink">Matrix<ul><li><a href="globe_3d.ads.html#globe_3d.ads:113:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l113" title="To spec">To spec</a></li></ul></span> (1 .. 4, 1 .. 4); </pre></li>
<li id="l116"><pre> </pre></li>
<li id="l117"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:117:4" title="defined at globe_3d.ads:117:4">Id_33</a> : <span class="keyword">constant</span> <span class="droplink">Matrix_33<ul><li><a href="globe_3d.ads.html#globe_3d.ads:114:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l114" title="To spec">To spec</a></li></ul></span> := ((1.0, 0.0, 0.0), </pre></li>
<li id="l118"><pre>                                  (0.0, 1.0, 0.0), </pre></li>
<li id="l119"><pre>                                  (0.0, 0.0, 1.0)); </pre></li>
<li id="l120"><pre> </pre></li>
<li id="l121"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:121:9" title="defined at globe_3d.ads:121:9">Point_3D_array</a>   <span class="keyword">is</span> <span class="keyword">array</span> (Positive <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="keyword">aliased</span> <span class="droplink">Point_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:111:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l111" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l122"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:122:9" title="defined at globe_3d.ads:122:9">p_Point_3D_array</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="droplink">Point_3D_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:121:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l121" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l123"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:123:9" title="defined at globe_3d.ads:123:9">Vector_3D_array</a>  <span class="keyword">is</span> <span class="keyword">array</span> (Natural <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l124"><pre> </pre></li>
<li id="l125"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:125:9" title="defined at globe_3d.ads:125:9">Natural_Index_array</a> <span class="keyword">is</span> <span class="keyword">array</span> (Natural <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="keyword">aliased</span> Natural;   <span class="comment">-- tbd : make GL.unsigned_Int (or unsigned_Short)?</span> </pre></li>
<li id="l126"><pre> </pre></li>
<li id="l127"><pre>   <span class="comment">----------------------------------------------------------------</span> </pre></li>
<li id="l128"><pre>   <span class="comment">-- Portal rendering definitions (methods in GLOBE_3D.Portals) --</span> </pre></li>
<li id="l129"><pre>   <span class="comment">----------------------------------------------------------------</span> </pre></li>
<li id="l130"><pre> </pre></li>
<li id="l131"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:131:9" title="defined at globe_3d.ads:131:9">Rectangle</a> <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l132"><pre>      X1, Y1, X2, Y2 : Integer; </pre></li>
<li id="l133"><pre>   <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l134"><pre> </pre></li>
<li id="l135"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:135:12" title="defined at globe_3d.ads:135:12">Clipping_area</a> <span class="keyword">is</span> <span class="droplink">Rectangle<ul><li><a href="globe_3d.ads.html#globe_3d.ads:131:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l131" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l136"><pre> </pre></li>
<li id="l137"><pre>   <span class="comment">-- ^ Cheap but fast portal culling &amp; clipping method with rectangles.</span> </pre></li>
<li id="l138"><pre>   <span class="comment">--   Usually, a bit too much is displayed.</span> </pre></li>
<li id="l139"><pre>   <span class="comment">--   With graphics cards as of 2005 + , it doesn&apos;t matter at all</span> </pre></li>
<li id="l140"><pre>   <span class="comment">--   The important aspect is the culling of the objects when the</span> </pre></li>
<li id="l141"><pre>   <span class="comment">--   intersection is empty.</span> </pre></li>
<li id="l142"><pre> </pre></li>
<li id="l143"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:143:9" title="defined at globe_3d.ads:143:9">Clipping_data</a> <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l144"><pre>      Eye_Position     : <span class="keyword">aliased</span> <span class="droplink">Point_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:111:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l111" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l145"><pre>      view_direction   : <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l146"><pre>      max_dot_product  : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>;         <span class="comment">-- depends on the field of view</span> </pre></li>
<li id="l147"><pre>      main_clipping    : <span class="droplink">Clipping_area<ul><li><a href="globe_3d.ads.html#globe_3d.ads:135:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l135" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l148"><pre>   <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l149"><pre> </pre></li>
<li id="l150"><pre>   <span class="comment">-- Camera</span> </pre></li>
<li id="l151"><pre>   <span class="comment">--</span> </pre></li>
<li id="l152"><pre> </pre></li>
<li id="l153"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:153:4" title="defined at globe_3d.ads:153:4">fairly_Far</a>                   : <span class="keyword">constant</span> := 50_000.0; </pre></li>
<li id="l154"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:154:4" title="defined at globe_3d.ads:154:4">default_field_of_view_Angle</a>  : <span class="keyword">constant</span> :=     55.0; </pre></li>
<li id="l155"><pre> </pre></li>
<li id="l156"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:156:9" title="defined at globe_3d.ads:156:9">Camera</a> <span class="keyword">is</span> <span class="keyword">tagged</span> </pre></li>
<li id="l157"><pre>      <span class="keyword">record</span> </pre></li>
<li id="l158"><pre>         Clipper              : <span class="droplink">Clipping_data<ul><li><a href="globe_3d.ads.html#globe_3d.ads:143:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l143" title="To spec">To spec</a></li></ul></span> := (Eye_Position    =&gt; (0.0,  0.0,  5.0), </pre></li>
<li id="l159"><pre>                                                  view_direction  =&gt; (0.0,  0.0, -1.0), </pre></li>
<li id="l160"><pre>                                                  max_dot_product =&gt; 0.0, </pre></li>
<li id="l161"><pre>                                                  main_clipping   =&gt; (0, 0, 0, 0)); </pre></li>
<li id="l162"><pre>         World_Rotation       : <span class="droplink">Matrix_33<ul><li><a href="globe_3d.ads.html#globe_3d.ads:114:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l114" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Id_33<ul><li><a href="globe_3d.ads.html#globe_3d.ads:117:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l117" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l163"><pre>         Speed                : <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span> := (0.0, 0.0, 0.0); </pre></li>
<li id="l164"><pre>         rotation_Speed       : <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span> := (0.0, 0.0, 0.0); </pre></li>
<li id="l165"><pre>         compose_rotations    : Boolean := True; </pre></li>
<li id="l166"><pre>         <span class="comment">-- True : apply successive rotations from rotation_Speed directly</span> </pre></li>
<li id="l167"><pre>         <span class="comment">--       to world_Rotation. Good for totally free 3D movement, no gravity.</span> </pre></li>
<li id="l168"><pre>         <span class="comment">--       Drawback : rotations around x axis, then y, then x, .. . induce a</span> </pre></li>
<li id="l169"><pre>         <span class="comment">--       rotation around z (the nose) which is x rotated around y.</span> </pre></li>
<li id="l170"><pre>         <span class="comment">-- False : world_Rotation is set as XYZ_rotation of the rotation vector below;</span> </pre></li>
<li id="l171"><pre>         <span class="comment">--        x, y, z keep separate.</span> </pre></li>
<li id="l172"><pre>         <span class="comment">-- Cf implementation in the package Actors</span> </pre></li>
<li id="l173"><pre>         rotation             : <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span> := (0.0, 0.0, 0.0); </pre></li>
<li id="l174"><pre>         <span class="comment">-- ^ this vector is updated, whatever the state of &apos;compose_rotations&apos;</span> </pre></li>
<li id="l175"><pre> </pre></li>
<li id="l176"><pre>         FOVy                 : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>  := <span class="droplink">default_field_of_view_Angle<ul><li><a href="globe_3d.ads.html#globe_3d.ads:154:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l154" title="To spec">To spec</a></li></ul></span>;  <span class="comment">-- field of view angle (deg) in the y direction</span> </pre></li>
<li id="l177"><pre>         Aspect               : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>;                                  <span class="comment">-- x/y aspect ratio</span> </pre></li>
<li id="l178"><pre> </pre></li>
<li id="l179"><pre>         near_plane_Distance  : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>  := 1.0;                          <span class="comment">-- distance to the near clipping plane</span> </pre></li>
<li id="l180"><pre>         near_plane_Width     : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l181"><pre>         near_plane_Height    : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l182"><pre> </pre></li>
<li id="l183"><pre>         far_plane_Distance   : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>  := <span class="droplink">fairly_Far<ul><li><a href="globe_3d.ads.html#globe_3d.ads:153:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l153" title="To spec">To spec</a></li></ul></span>;                   <span class="comment">-- distance to the far clipping plane</span> </pre></li>
<li id="l184"><pre>         far_plane_Width      : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l185"><pre>         far_plane_Height     : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l186"><pre> </pre></li>
<li id="l187"><pre>         Projection_Matrix    : <span class="droplink">Matrix_44<ul><li><a href="globe_3d.ads.html#globe_3d.ads:115:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l115" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l188"><pre> </pre></li>
<li id="l189"><pre>         frustum_Planes       : <span class="droplink">GL.Frustums.plane_Array<ul><li><a href="gl-frustums.ads.html#gl-frustums.ads:23:9" title="To API doc">To API doc</a></li><li><a href="src_gl-frustums.ads.html#l23" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l190"><pre>      <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l191"><pre> </pre></li>
<li id="l192"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:192:9" title="defined at globe_3d.ads:192:9">p_Camera</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="keyword">all</span> <span class="droplink">Camera<ul><li><a href="globe_3d.ads.html#globe_3d.ads:156:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l156" title="To spec">To spec</a></li></ul></span>&apos;Class; </pre></li>
<li id="l193"><pre> </pre></li>
<li id="l194"><pre>   <span class="comment">-- &apos;Visual&apos; class hierarchy</span> </pre></li>
<li id="l195"><pre>   <span class="comment">--</span> </pre></li>
<li id="l196"><pre> </pre></li>
<li id="l197"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:197:9" title="defined at globe_3d.ads:197:9">Visual</a> <span class="keyword">is</span> <span class="keyword">abstract</span> <span class="keyword">tagged</span> </pre></li>
<li id="l198"><pre>      <span class="keyword">record</span> </pre></li>
<li id="l199"><pre>         ID                      : <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span> := <span class="string">&quot;-Nameless-                              &quot;</span>; </pre></li>
<li id="l200"><pre>         <span class="comment">--                                  1234567890123456789012345678901234567890</span> </pre></li>
<li id="l201"><pre> </pre></li>
<li id="l202"><pre>         Centre                  : <span class="droplink">Point_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:111:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l111" title="To spec">To spec</a></li></ul></span>  := (0.0, 0.0, 0.0); <span class="comment">-- vertex coords are relative to the centre.</span> </pre></li>
<li id="l203"><pre>         Centre_Camera_Space     : <span class="droplink">Point_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:111:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l111" title="To spec">To spec</a></li></ul></span>;                     <span class="comment">-- the visuals &apos;centre&apos; in camera space.</span> </pre></li>
<li id="l204"><pre>         rotation                : <span class="droplink">Matrix_33<ul><li><a href="globe_3d.ads.html#globe_3d.ads:114:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l114" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Id_33<ul><li><a href="globe_3d.ads.html#globe_3d.ads:117:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l117" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l205"><pre> </pre></li>
<li id="l206"><pre>         is_Terrain              : Boolean   := False; </pre></li>
<li id="l207"><pre>      <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l208"><pre> </pre></li>
<li id="l209"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:209:9" title="defined at globe_3d.ads:209:9">p_Visual</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="keyword">all</span> <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>&apos;Class; </pre></li>
<li id="l210"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:210:9" title="defined at globe_3d.ads:210:9">Visual_array</a> <span class="keyword">is</span> <span class="keyword">array</span> (Positive <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="droplink">p_Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:209:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l209" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l211"><pre> </pre></li>
<li id="l212"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:212:14" title="defined at globe_3d.ads:212:14">Destroy</a>        (<a href="globe_3d.ads.html#globe_3d.ads:212:30" title="defined at globe_3d.ads:212:30">o</a>      : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l213"><pre>   <span class="keyword">procedure</span> <span class="droplink">Free<ul><li><a href="globe_3d.ads.html#globe_3d.ads:213:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l110" title="To body">To body</a></li></ul></span>           (<a href="globe_3d.ads.html#globe_3d.ads:213:30" title="defined at globe_3d.ads:213:30">o</a>      : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">p_Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:209:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l209" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l214"><pre> </pre></li>
<li id="l215"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:215:14" title="defined at globe_3d.ads:215:14">Pre_calculate</a>  (<a href="globe_3d.ads.html#globe_3d.ads:215:30" title="defined at globe_3d.ads:215:30">o</a>      : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l216"><pre> </pre></li>
<li id="l217"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:217:14" title="defined at globe_3d.ads:217:14">set_Alpha</a>      (<a href="globe_3d.ads.html#globe_3d.ads:217:30" title="defined at globe_3d.ads:217:30">o</a>      : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l218"><pre>                             <a href="globe_3d.ads.html#globe_3d.ads:218:30" title="defined at globe_3d.ads:218:30">Alpha</a>  :        <span class="droplink">GL.Double<ul><li><a href="gl.ads.html#gl.ads:128:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l128" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l219"><pre> </pre></li>
<li id="l220"><pre>   <span class="keyword">function</span>  <a href="globe_3d.ads.html#globe_3d.ads:220:14" title="defined at globe_3d.ads:220:14">is_Transparent</a> (<a href="globe_3d.ads.html#globe_3d.ads:220:30" title="defined at globe_3d.ads:220:30">o</a>      :        <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> Boolean <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l221"><pre>   <span class="comment">--</span> </pre></li>
<li id="l222"><pre>   <span class="comment">-- returns &apos;True&apos; if any part of the &apos;visual&apos; is potentially transparent.</span> </pre></li>
<li id="l223"><pre> </pre></li>
<li id="l224"><pre>   <span class="keyword">function</span> <a href="globe_3d.ads.html#globe_3d.ads:224:13" title="defined at globe_3d.ads:224:13">face_Count</a> (<a href="globe_3d.ads.html#globe_3d.ads:224:25" title="defined at globe_3d.ads:224:25">o</a>  : <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> Natural                   <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l225"><pre>   <span class="keyword">function</span> <a href="globe_3d.ads.html#globe_3d.ads:225:13" title="defined at globe_3d.ads:225:13">Bounds</a>     (<a href="globe_3d.ads.html#globe_3d.ads:225:25" title="defined at globe_3d.ads:225:25">o</a>  : <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> <span class="droplink">GL.Geometry.Bounds_record<ul><li><a href="gl-geometry.ads.html#gl-geometry.ads:43:9" title="To API doc">To API doc</a></li><li><a href="src_gl-geometry.ads.html#l43" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l226"><pre> </pre></li>
<li id="l227"><pre>   <span class="keyword">function</span> <span class="droplink">skinned_Geometrys<ul><li><a href="globe_3d.ads.html#globe_3d.ads:227:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l119" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:227:32" title="defined at globe_3d.ads:227:32">o</a>  : <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> <span class="droplink">GL.Skinned_Geometry.skinned_Geometrys<ul><li><a href="gl-skinned_geometry.ads.html#gl-skinned_geometry.ads:23:9" title="To API doc">To API doc</a></li><li><a href="src_gl-skinned_geometry.ads.html#l23" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l228"><pre> </pre></li>
<li id="l229"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:229:14" title="defined at globe_3d.ads:229:14">Display</a> (<a href="globe_3d.ads.html#globe_3d.ads:229:23" title="defined at globe_3d.ads:229:23">o</a>           : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l230"><pre>                      <a href="globe_3d.ads.html#globe_3d.ads:230:23" title="defined at globe_3d.ads:230:23">clip</a>        :        <span class="droplink">Clipping_data<ul><li><a href="globe_3d.ads.html#globe_3d.ads:143:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l143" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l231"><pre> </pre></li>
<li id="l232"><pre>   <span class="keyword">procedure</span> <span class="droplink">Set_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:232:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l941" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:232:24" title="defined at globe_3d.ads:232:24">o</a> : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>&apos;class; <a href="globe_3d.ads.html#globe_3d.ads:232:49" title="defined at globe_3d.ads:232:49">new_name</a> : String); </pre></li>
<li id="l233"><pre>   <span class="comment">-- Give a new name (no need of space - filling) to the object</span> </pre></li>
<li id="l234"><pre> </pre></li>
<li id="l235"><pre>   <span class="keyword">function</span> <span class="droplink">Get_name<ul><li><a href="globe_3d.ads.html#globe_3d.ads:235:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l951" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:235:23" title="defined at globe_3d.ads:235:23">o</a> : <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>&apos;class) <span class="keyword">return</span> String; </pre></li>
<li id="l236"><pre> </pre></li>
<li id="l237"><pre>   <span class="keyword">function</span> <span class="droplink">Width<ul><li><a href="globe_3d.ads.html#globe_3d.ads:237:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l122" title="To body">To body</a></li></ul></span>  (<a href="globe_3d.ads.html#globe_3d.ads:237:21" title="defined at globe_3d.ads:237:21">o</a> : <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>&apos;class) <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l238"><pre>   <span class="keyword">function</span> <span class="droplink">Height<ul><li><a href="globe_3d.ads.html#globe_3d.ads:238:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l125" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:238:21" title="defined at globe_3d.ads:238:21">o</a> : <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>&apos;class) <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l239"><pre>   <span class="keyword">function</span> <span class="droplink">Depth<ul><li><a href="globe_3d.ads.html#globe_3d.ads:239:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l128" title="To body">To body</a></li></ul></span>  (<a href="globe_3d.ads.html#globe_3d.ads:239:21" title="defined at globe_3d.ads:239:21">o</a> : <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span>&apos;class) <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l240"><pre> </pre></li>
<li id="l241"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:241:4" title="defined at globe_3d.ads:241:4">null_Visuals</a>  : <span class="keyword">constant</span> <span class="droplink">Visual_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:210:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l210" title="To spec">To spec</a></li></ul></span> (1 .. 0) := (<span class="keyword">others</span> =&gt; <span class="keyword">null</span>); </pre></li>
<li id="l242"><pre> </pre></li>
<li id="l243"><pre>   <span class="keyword">procedure</span> <span class="droplink">render<ul><li><a href="globe_3d.ads.html#globe_3d.ads:243:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1069" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:243:22" title="defined at globe_3d.ads:243:22">the_Visuals</a>  : <span class="droplink">Visual_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:210:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l210" title="To spec">To spec</a></li></ul></span>; <span class="droplink">the_Camera<ul><li><a href="globe_3d.ads.html#globe_3d.ads:243:51" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1069" title="To body">To body</a></li></ul></span>  : <span class="droplink">Camera<ul><li><a href="globe_3d.ads.html#globe_3d.ads:156:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l156" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l244"><pre>   <span class="comment">--</span> </pre></li>
<li id="l245"><pre>   <span class="comment">-- clears the color buffer and renders each of the visuals.</span> </pre></li>
<li id="l246"><pre> </pre></li>
<li id="l247"><pre>   <span class="comment">-- Map_of_Visuals</span> </pre></li>
<li id="l248"><pre>   <span class="comment">--</span> </pre></li>
<li id="l249"><pre>   <span class="comment">-- We define here a way of finding quickly a Visual&apos;s access</span> </pre></li>
<li id="l250"><pre>   <span class="comment">-- through its identifier.</span> </pre></li>
<li id="l251"><pre>   <span class="comment">--</span> </pre></li>
<li id="l252"><pre>   <span class="keyword">type</span> <span class="droplink">Map_of_Visuals<ul><li><a href="globe_3d.ads.html#globe_3d.ads:252:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l604" title="To body">To body</a></li></ul></span> <span class="keyword">is</span> <span class="keyword">private</span>; </pre></li>
<li id="l253"><pre>   <span class="comment">-- One can begin with empty_map, then Add Visuals one per one:</span> </pre></li>
<li id="l254"><pre>   <span class="keyword">function</span> <span class="droplink">empty_map<ul><li><a href="globe_3d.ads.html#globe_3d.ads:254:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1269" title="To body">To body</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Map_of_Visuals<ul><li><a href="globe_3d.ads.html#globe_3d.ads:252:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l252" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l604" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l255"><pre>   <span class="keyword">procedure</span> <span class="droplink">Add<ul><li><a href="globe_3d.ads.html#globe_3d.ads:255:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1276" title="To body">To body</a></li></ul></span> (<span class="droplink">to_map<ul><li><a href="globe_3d.ads.html#globe_3d.ads:255:19" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1276" title="To body">To body</a></li></ul></span> : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Map_of_Visuals<ul><li><a href="globe_3d.ads.html#globe_3d.ads:252:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l252" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l604" title="To body">To body</a></li></ul></span>; <a href="globe_3d.ads.html#globe_3d.ads:255:51" title="defined at globe_3d.ads:255:51">what</a> : <span class="droplink">p_Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:209:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l209" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l256"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:256:4" title="defined at globe_3d.ads:256:4">Duplicate_name</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l257"><pre>   <span class="comment">-- One can also get a map of an array of visuals in one go:</span> </pre></li>
<li id="l258"><pre>   <span class="keyword">function</span> <span class="droplink">Map_of<ul><li><a href="globe_3d.ads.html#globe_3d.ads:258:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1292" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:258:21" title="defined at globe_3d.ads:258:21">va</a> : <span class="droplink">Visual_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:210:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l210" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> <span class="droplink">Map_of_Visuals<ul><li><a href="globe_3d.ads.html#globe_3d.ads:252:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l252" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l604" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l259"><pre> </pre></li>
<li id="l260"><pre>   <span class="comment">-- original G3D Object class</span> </pre></li>
<li id="l261"><pre>   <span class="comment">--</span> </pre></li>
<li id="l262"><pre> </pre></li>
<li id="l263"><pre>   <span class="keyword">type</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l264"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:264:9" title="defined at globe_3d.ads:264:9">p_Object_3D</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="keyword">all</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>&apos;Class; </pre></li>
<li id="l265"><pre> </pre></li>
<li id="l266"><pre>   <span class="comment">-------------------</span> </pre></li>
<li id="l267"><pre>   <span class="comment">-- Define a face --</span> </pre></li>
<li id="l268"><pre>   <span class="comment">-------------------</span> </pre></li>
<li id="l269"><pre> </pre></li>
<li id="l270"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:270:9" title="defined at globe_3d.ads:270:9">Skin_Type</a> <span class="keyword">is</span> (texture_only, </pre></li>
<li id="l271"><pre>                      colour_only, </pre></li>
<li id="l272"><pre>                      coloured_texture, </pre></li>
<li id="l273"><pre>                      material_only, </pre></li>
<li id="l274"><pre>                      material_texture, </pre></li>
<li id="l275"><pre>                      invisible); </pre></li>
<li id="l276"><pre> </pre></li>
<li id="l277"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:277:9" title="defined at globe_3d.ads:277:9">Set_of_Skin</a> <span class="keyword">is</span> <span class="keyword">array</span> (<span class="droplink">Skin_Type<ul><li><a href="globe_3d.ads.html#globe_3d.ads:270:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l270" title="To spec">To spec</a></li></ul></span>) <span class="keyword">of</span> Boolean; </pre></li>
<li id="l278"><pre> </pre></li>
<li id="l279"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:279:4" title="defined at globe_3d.ads:279:4">is_textured</a> : <span class="keyword">constant</span> <span class="droplink">Set_of_Skin<ul><li><a href="globe_3d.ads.html#globe_3d.ads:277:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l277" title="To spec">To spec</a></li></ul></span> := </pre></li>
<li id="l280"><pre>     (texture_only | coloured_texture | material_texture =&gt; True, </pre></li>
<li id="l281"><pre>      <span class="keyword">others</span> =&gt; False); </pre></li>
<li id="l282"><pre> </pre></li>
<li id="l283"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:283:4" title="defined at globe_3d.ads:283:4">null_colour</a> : <span class="keyword">constant</span> <span class="droplink">GL.Material_Float_vector<ul><li><a href="gl.ads.html#gl.ads:154:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l154" title="To spec">To spec</a></li></ul></span> := (0.0, 0.0, 0.0, 0.0); </pre></li>
<li id="l284"><pre> </pre></li>
<li id="l285"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:285:12" title="defined at globe_3d.ads:285:12">Idx_3_array</a> <span class="keyword">is</span> <span class="droplink">Natural_Index_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:125:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l125" title="To spec">To spec</a></li></ul></span> (1 .. 3); </pre></li>
<li id="l286"><pre> </pre></li>
<li id="l287"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:287:12" title="defined at globe_3d.ads:287:12">Idx_4_array</a> <span class="keyword">is</span> <span class="droplink">Natural_Index_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:125:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l125" title="To spec">To spec</a></li></ul></span> (1 .. 4); </pre></li>
<li id="l288"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:288:9" title="defined at globe_3d.ads:288:9">Idx_4_array_array</a> <span class="keyword">is</span> <span class="keyword">array</span> (Positive <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="droplink">Idx_4_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:287:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l287" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l289"><pre> </pre></li>
<li id="l290"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:290:9" title="defined at globe_3d.ads:290:9">Map_idx_pair</a> <span class="keyword">is</span> <span class="keyword">record</span> U, V : <span class="keyword">aliased</span> <span class="droplink">GL.Double<ul><li><a href="gl.ads.html#gl.ads:128:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l128" title="To spec">To spec</a></li></ul></span>; <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l291"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:291:9" title="defined at globe_3d.ads:291:9">Map_idx_pair_array</a> <span class="keyword">is</span> <span class="keyword">array</span> (Natural <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="droplink">Map_idx_pair<ul><li><a href="globe_3d.ads.html#globe_3d.ads:290:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l290" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l292"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:292:12" title="defined at globe_3d.ads:292:12">Map_idx_pair_4_array</a> <span class="keyword">is</span> <span class="droplink">Map_idx_pair_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:291:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l291" title="To spec">To spec</a></li></ul></span> (1 .. 4); </pre></li>
<li id="l293"><pre> </pre></li>
<li id="l294"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:294:9" title="defined at globe_3d.ads:294:9">Face_type</a> <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l295"><pre>      P             : <span class="droplink">Idx_4_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:287:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l287" title="To spec">To spec</a></li></ul></span>;  <span class="comment">-- indices of the edges (anticlockwise)</span> </pre></li>
<li id="l296"><pre>      <span class="comment">-- one of them can be 0 (triangle); then the</span> </pre></li>
<li id="l297"><pre>      <span class="comment">-- &quot;missing&quot; edge indicates how to put texture</span> </pre></li>
<li id="l298"><pre>      <span class="comment">-- *** Portals :</span> </pre></li>
<li id="l299"><pre>      connecting    : <span class="droplink">p_Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:264:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l264" title="To spec">To spec</a></li></ul></span> := <span class="keyword">null</span>; <span class="comment">-- object behind - if there is one</span> </pre></li>
<li id="l300"><pre> </pre></li>
<li id="l301"><pre>      <span class="comment">-- *** Surface</span> </pre></li>
<li id="l302"><pre>      skin          : <span class="droplink">Skin_Type<ul><li><a href="globe_3d.ads.html#globe_3d.ads:270:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l270" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l303"><pre>      mirror        : Boolean := False;  <span class="comment">-- mirror just behind the skin ?</span> </pre></li>
<li id="l304"><pre>      alpha         : <span class="droplink">GL.Double<ul><li><a href="gl.ads.html#gl.ads:128:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l128" title="To spec">To spec</a></li></ul></span> := 1.0; </pre></li>
<li id="l305"><pre>      <span class="comment">-- alpha in [0;1] for blending colours and textures.</span> </pre></li>
<li id="l306"><pre>      <span class="comment">-- NB : when this value (or all of material colours) is equal to</span> </pre></li>
<li id="l307"><pre>      <span class="comment">--     one, the blending for transparency is switched off to gain</span> </pre></li>
<li id="l308"><pre>      <span class="comment">--     speed; GLOBE_3D can switch on the blending again when loading</span> </pre></li>
<li id="l309"><pre>      <span class="comment">--     a texture that has an alpha layer</span> </pre></li>
<li id="l310"><pre>      <span class="comment">-- *** &gt; colour part (data ignored when irrelevant):</span> </pre></li>
<li id="l311"><pre>      colour        : <span class="droplink">GL.RGB_Color<ul><li><a href="gl.ads.html#gl.ads:157:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l157" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l312"><pre>      <span class="comment">-- *** &gt; material part (data ignored when irrelevant):</span> </pre></li>
<li id="l313"><pre>      material      : <span class="droplink">GL.Materials.Material_type<ul><li><a href="gl-materials.ads.html#gl-materials.ads:25:8" title="To API doc">To API doc</a></li><li><a href="src_gl-materials.ads.html#l25" title="To spec">To spec</a></li></ul></span> := </pre></li>
<li id="l314"><pre>        <span class="droplink">GL.Materials.neutral_material<ul><li><a href="gl-materials.ads.html#gl-materials.ads:35:3" title="To API doc">To API doc</a></li><li><a href="src_gl-materials.ads.html#l35" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l315"><pre>      <span class="comment">-- *** &gt; texture - mapping part (data ignored when irrelevant):</span> </pre></li>
<li id="l316"><pre>      texture       : <span class="droplink">Image_ID<ul><li><a href="globe_3d.ads.html#globe_3d.ads:99:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l99" title="To spec">To spec</a></li></ul></span> := <span class="droplink">null_image<ul><li><a href="globe_3d.ads.html#globe_3d.ads:100:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l100" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l317"><pre>      <span class="comment">--  Alternative to setting an Image_id, if it is not known at</span> </pre></li>
<li id="l318"><pre>      <span class="comment">--  time of building the object : use Texture_name_hint, then</span> </pre></li>
<li id="l319"><pre>      <span class="comment">--  Rebuild_links</span> </pre></li>
<li id="l320"><pre>      <span class="comment">--</span> </pre></li>
<li id="l321"><pre>      <span class="comment">--    Whole texture or part of one ?</span> </pre></li>
<li id="l322"><pre>      whole_texture : Boolean := True; </pre></li>
<li id="l323"><pre>      <span class="comment">--    - in case of a whole texture, automatic mapping, we just need</span> </pre></li>
<li id="l324"><pre>      <span class="comment">--      to know how many times is it tiled:</span> </pre></li>
<li id="l325"><pre>      repeat_U, </pre></li>
<li id="l326"><pre>      repeat_V      : Positive := 1; </pre></li>
<li id="l327"><pre>      <span class="comment">--    - in case of a partial texture (e.g. for a texture spread</span> </pre></li>
<li id="l328"><pre>      <span class="comment">--      across several faces), we need a deterministic mapping:</span> </pre></li>
<li id="l329"><pre>      texture_edge_map : </pre></li>
<li id="l330"><pre>      <span class="droplink">Map_idx_pair_4_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:292:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l292" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l331"><pre>   <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l332"><pre> </pre></li>
<li id="l333"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:333:9" title="defined at globe_3d.ads:333:9">Face_array</a> <span class="keyword">is</span> <span class="keyword">array</span> (Natural <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="keyword">aliased</span> <span class="droplink">Face_type<ul><li><a href="globe_3d.ads.html#globe_3d.ads:294:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l294" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l334"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:334:9" title="defined at globe_3d.ads:334:9">p_Face_array</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="droplink">Face_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:333:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l333" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l335"><pre> </pre></li>
<li id="l336"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:336:12" title="defined at globe_3d.ads:336:12">Edge_count</a> <span class="keyword">is</span> Positive <span class="keyword">range</span> 3 .. 4; </pre></li>
<li id="l337"><pre> </pre></li>
<li id="l338"><pre>   <span class="comment">-- Invariants : things that don&apos;t change during the object&apos;s life</span> </pre></li>
<li id="l339"><pre> </pre></li>
<li id="l340"><pre>   <span class="keyword">type</span> <span class="droplink">Face_invariant_type<ul><li><a href="globe_3d.ads.html#globe_3d.ads:340:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l544" title="To body">To body</a></li></ul></span> <span class="keyword">is</span> <span class="keyword">private</span>; <span class="comment">-- GLOBE_3D - internal, nothing for users</span> </pre></li>
<li id="l341"><pre> </pre></li>
<li id="l342"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:342:9" title="defined at globe_3d.ads:342:9">Face_invariant_array</a> <span class="keyword">is</span> <span class="keyword">array</span> (Natural <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="droplink">Face_invariant_type<ul><li><a href="globe_3d.ads.html#globe_3d.ads:340:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l340" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l544" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l343"><pre> </pre></li>
<li id="l344"><pre>   <span class="keyword">type</span> <span class="droplink">Object_3D_list<ul><li><a href="globe_3d.ads.html#globe_3d.ads:344:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l346" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l345"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:345:9" title="defined at globe_3d.ads:345:9">p_Object_3D_list</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="droplink">Object_3D_list<ul><li><a href="globe_3d.ads.html#globe_3d.ads:344:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l344" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l346" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l346"><pre>   <span class="keyword">type</span> <span class="droplink">Object_3D_list<ul><li><a href="globe_3d.ads.html#globe_3d.ads:344:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l344" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l347"><pre>      objc : <span class="droplink">p_Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:264:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l264" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l348"><pre>      next : <span class="droplink">p_Object_3D_list<ul><li><a href="globe_3d.ads.html#globe_3d.ads:345:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l345" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l349"><pre>   <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l350"><pre> </pre></li>
<li id="l351"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:351:9" title="defined at globe_3d.ads:351:9">Object_3D_array</a> <span class="keyword">is</span> <span class="keyword">array</span> (Positive <span class="keyword">range</span> &lt;&gt;) <span class="keyword">of</span> <span class="droplink">p_Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:264:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l264" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l352"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:352:9" title="defined at globe_3d.ads:352:9">p_Object_3D_array</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="droplink">Object_3D_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:351:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l351" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l353"><pre> </pre></li>
<li id="l354"><pre>   <span class="comment">-----------------------------------</span> </pre></li>
<li id="l355"><pre>   <span class="comment">-- Now : the Object_3D definition --</span> </pre></li>
<li id="l356"><pre>   <span class="comment">-----------------------------------</span> </pre></li>
<li id="l357"><pre> </pre></li>
<li id="l358"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:358:9" title="defined at globe_3d.ads:358:9">List_Cases</a>  <span class="keyword">is</span> (No_List, Generate_List, Is_List); </pre></li>
<li id="l359"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:359:12" title="defined at globe_3d.ads:359:12">List_Ids</a> <span class="keyword">is</span> Positive; </pre></li>
<li id="l360"><pre> </pre></li>
<li id="l361"><pre>   <span class="comment">--</span> </pre></li>
<li id="l362"><pre>   <span class="comment">-- Added &quot;List_status&quot; and &quot;List_Id&quot; to the Object_3D.</span> </pre></li>
<li id="l363"><pre>   <span class="comment">-- by default the Display_One routine will now generate a GL command list</span> </pre></li>
<li id="l364"><pre>   <span class="comment">-- instead of sending the command each time explicitely.</span> </pre></li>
<li id="l365"><pre>   <span class="comment">-- To disable this feature, set Object_3D.List_Status to &quot;No_List&quot;.</span> </pre></li>
<li id="l366"><pre>   <span class="comment">-- If memory is not sufficient to hold a list, the Display_One routine will</span> </pre></li>
<li id="l367"><pre>   <span class="comment">-- automatically default back to &quot;No_List&quot;.</span> </pre></li>
<li id="l368"><pre>   <span class="comment">--</span> </pre></li>
<li id="l369"><pre>   <span class="comment">-- Uwe R. Zimmer, July 2011</span> </pre></li>
<li id="l370"><pre>   <span class="comment">--</span> </pre></li>
<li id="l371"><pre>   <span class="keyword">type</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li></ul></span> (Max_points, Max_faces : Integer) <span class="keyword">is</span> <span class="keyword">new</span> <span class="droplink">Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:197:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l197" title="To spec">To spec</a></li></ul></span> <span class="keyword">with</span> <span class="keyword">record</span> </pre></li>
<li id="l372"><pre>      Point           : <span class="droplink">Point_3D_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:121:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l121" title="To spec">To spec</a></li></ul></span>  (1 .. Max_points);  <span class="comment">-- vertices</span> </pre></li>
<li id="l373"><pre>      edge_vector     : <span class="droplink">Vector_3D_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:123:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l123" title="To spec">To spec</a></li></ul></span> (1 .. Max_points);  <span class="comment">-- normals for lighting</span> </pre></li>
<li id="l374"><pre>      face            : <span class="droplink">Face_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:333:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l333" title="To spec">To spec</a></li></ul></span> (1 .. Max_faces); </pre></li>
<li id="l375"><pre>      sub_objects     : <span class="droplink">p_Object_3D_list<ul><li><a href="globe_3d.ads.html#globe_3d.ads:345:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l345" title="To spec">To spec</a></li></ul></span> := <span class="keyword">null</span>; </pre></li>
<li id="l376"><pre>      <span class="comment">-- List of objects to be drawn AFTER the</span> </pre></li>
<li id="l377"><pre>      <span class="comment">-- object itself e.g., things inside a room</span> </pre></li>
<li id="l378"><pre>      pre_calculated  : Boolean := False; </pre></li>
<li id="l379"><pre>      List_Status     : <span class="droplink">List_Cases<ul><li><a href="globe_3d.ads.html#globe_3d.ads:358:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l358" title="To spec">To spec</a></li></ul></span> := Generate_List; </pre></li>
<li id="l380"><pre>      <span class="comment">-- private:</span> </pre></li>
<li id="l381"><pre>      List_Id         : <span class="droplink">List_Ids<ul><li><a href="globe_3d.ads.html#globe_3d.ads:359:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l359" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l382"><pre>      Face_Invariant  : <span class="droplink">Face_invariant_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:342:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l342" title="To spec">To spec</a></li></ul></span> (1 .. Max_faces); </pre></li>
<li id="l383"><pre>      Bounds          : <span class="droplink">GL.Geometry.Bounds_record<ul><li><a href="gl-geometry.ads.html#gl-geometry.ads:43:9" title="To API doc">To API doc</a></li><li><a href="src_gl-geometry.ads.html#l43" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l384"><pre>      transparent     : Boolean := False; </pre></li>
<li id="l385"><pre>   <span class="keyword">end</span> <span class="keyword">record</span>; <span class="comment">-- Object_3D</span> </pre></li>
<li id="l386"><pre> </pre></li>
<li id="l387"><pre>   <span class="keyword">overriding</span> <span class="keyword">procedure</span> <span class="droplink">Destroy<ul><li><a href="globe_3d.ads.html#globe_3d.ads:387:25" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l790" title="To body">To body</a></li></ul></span>        (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:387:41" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l790" title="To body">To body</a></li></ul></span>  : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l388"><pre>   <span class="keyword">overriding</span> <span class="keyword">procedure</span> <span class="droplink">set_Alpha<ul><li><a href="globe_3d.ads.html#globe_3d.ads:388:25" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l801" title="To body">To body</a></li></ul></span>      (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:388:41" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l801" title="To body">To body</a></li></ul></span>  : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>; <a href="globe_3d.ads.html#globe_3d.ads:388:64" title="defined at globe_3d.ads:388:64">Alpha</a>  : <span class="droplink">GL.Double<ul><li><a href="gl.ads.html#gl.ads:128:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l128" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l389"><pre>   <span class="keyword">overriding</span> <span class="keyword">function</span>  <span class="droplink">is_Transparent<ul><li><a href="globe_3d.ads.html#globe_3d.ads:389:25" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l809" title="To body">To body</a></li></ul></span> (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:389:41" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l809" title="To body">To body</a></li></ul></span>  :        <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>) <span class="keyword">return</span> Boolean; </pre></li>
<li id="l390"><pre>   <span class="keyword">overriding</span> <span class="keyword">function</span>  <span class="droplink">face_Count<ul><li><a href="globe_3d.ads.html#globe_3d.ads:390:25" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l815" title="To body">To body</a></li></ul></span>     (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:390:41" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l815" title="To body">To body</a></li></ul></span>  :        <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>) <span class="keyword">return</span> Natural; </pre></li>
<li id="l391"><pre>   <span class="keyword">overriding</span> <span class="keyword">function</span>  <span class="droplink">Bounds<ul><li><a href="globe_3d.ads.html#globe_3d.ads:391:25" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l821" title="To body">To body</a></li></ul></span>         (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:391:41" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l821" title="To body">To body</a></li></ul></span>  :        <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>) <span class="keyword">return</span> <span class="droplink">GL.Geometry.Bounds_record<ul><li><a href="gl-geometry.ads.html#gl-geometry.ads:43:9" title="To API doc">To API doc</a></li><li><a href="src_gl-geometry.ads.html#l43" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l392"><pre> </pre></li>
<li id="l393"><pre>   <span class="keyword">procedure</span> <span class="droplink">Check_object<ul><li><a href="globe_3d.ads.html#globe_3d.ads:393:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l137" title="To body">To body</a></li></ul></span> (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:393:28" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l137" title="To body">To body</a></li></ul></span> : <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l394"><pre>   <span class="comment">-- Check object for invalid or duplicate vertices</span> </pre></li>
<li id="l395"><pre> </pre></li>
<li id="l396"><pre>   <span class="keyword">procedure</span> <span class="droplink">Texture_name_hint<ul><li><a href="globe_3d.ads.html#globe_3d.ads:396:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1025" title="To body">To body</a></li></ul></span> ( </pre></li>
<li id="l397"><pre>                                <span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:397:33" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1025" title="To body">To body</a></li></ul></span>    : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l398"><pre>                                <a href="globe_3d.ads.html#globe_3d.ads:398:33" title="defined at globe_3d.ads:398:33">face</a> :        Positive; </pre></li>
<li id="l399"><pre>                                <a href="globe_3d.ads.html#globe_3d.ads:399:33" title="defined at globe_3d.ads:399:33">name</a> :        String </pre></li>
<li id="l400"><pre>                               ); </pre></li>
<li id="l401"><pre>   <span class="comment">-- Indicate a texture&apos;s name that can be resolved later by Rebuild_links</span> </pre></li>
<li id="l402"><pre> </pre></li>
<li id="l403"><pre>   <span class="keyword">procedure</span> <span class="droplink">Portal_name_hint<ul><li><a href="globe_3d.ads.html#globe_3d.ads:403:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1038" title="To body">To body</a></li></ul></span> ( </pre></li>
<li id="l404"><pre>                               <span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:404:32" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l1038" title="To body">To body</a></li></ul></span>    : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l405"><pre>                               <a href="globe_3d.ads.html#globe_3d.ads:405:32" title="defined at globe_3d.ads:405:32">face</a> :        Positive; </pre></li>
<li id="l406"><pre>                               <a href="globe_3d.ads.html#globe_3d.ads:406:32" title="defined at globe_3d.ads:406:32">name</a> :        String </pre></li>
<li id="l407"><pre>                              ); </pre></li>
<li id="l408"><pre>   <span class="comment">-- Indicate a portal&apos;s name that can be resolved later by Rebuild_links</span> </pre></li>
<li id="l409"><pre> </pre></li>
<li id="l410"><pre>   <span class="keyword">procedure</span> <span class="droplink">Rebuild_links<ul><li><a href="globe_3d.ads.html#globe_3d.ads:410:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l957" title="To body">To body</a></li></ul></span> ( </pre></li>
<li id="l411"><pre>                            <a href="globe_3d.ads.html#globe_3d.ads:411:29" title="defined at globe_3d.ads:411:29">o</a>            : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>&apos;Class; <span class="comment">-- object to be relinked</span> </pre></li>
<li id="l412"><pre>                            <span class="droplink">neighbouring<ul><li><a href="globe_3d.ads.html#globe_3d.ads:412:29" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l958" title="To body">To body</a></li></ul></span> :        <span class="droplink">Map_of_Visuals<ul><li><a href="globe_3d.ads.html#globe_3d.ads:252:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l252" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l604" title="To body">To body</a></li></ul></span>;  <span class="comment">-- neighbourhood</span> </pre></li>
<li id="l413"><pre>                            <a href="globe_3d.ads.html#globe_3d.ads:413:29" title="defined at globe_3d.ads:413:29">tolerant_obj</a> :        Boolean;         <span class="comment">-- tolerant on missing objects</span> </pre></li>
<li id="l414"><pre>                            <a href="globe_3d.ads.html#globe_3d.ads:414:29" title="defined at globe_3d.ads:414:29">tolerant_tex</a> :        Boolean          <span class="comment">-- tolerant on missing textures</span> </pre></li>
<li id="l415"><pre>                           ); </pre></li>
<li id="l416"><pre>   <span class="comment">-- Does nothing when texture or object name is empty</span> </pre></li>
<li id="l417"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:417:4" title="defined at globe_3d.ads:417:4">Portal_connection_failed</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l418"><pre> </pre></li>
<li id="l419"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:419:4" title="defined at globe_3d.ads:419:4">bad_vertex_number</a>, <a href="globe_3d.ads.html#globe_3d.ads:419:23" title="defined at globe_3d.ads:419:23">duplicated_vertex</a>, </pre></li>
<li id="l420"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:420:4" title="defined at globe_3d.ads:420:4">duplicated_vertex_location</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l421"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:421:4" title="defined at globe_3d.ads:421:4">point_unmatched</a>, <a href="globe_3d.ads.html#globe_3d.ads:421:21" title="defined at globe_3d.ads:421:21">too_many_adjacences</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l422"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:422:4" title="defined at globe_3d.ads:422:4">bad_edge_number</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l423"><pre> </pre></li>
<li id="l424"><pre>   <span class="keyword">overriding</span> <span class="keyword">procedure</span> <span class="droplink">Pre_calculate<ul><li><a href="globe_3d.ads.html#globe_3d.ads:424:25" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l194" title="To body">To body</a></li></ul></span> (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:424:40" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l194" title="To body">To body</a></li></ul></span> : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l425"><pre>   <span class="comment">-- Done automatically at first display, but sometimes</span> </pre></li>
<li id="l426"><pre>   <span class="comment">-- it&apos;s better to do it before : operation can be long!</span> </pre></li>
<li id="l427"><pre> </pre></li>
<li id="l428"><pre>   <span class="comment">------------------------------------------------------------</span> </pre></li>
<li id="l429"><pre>   <span class="comment">-- Display of a whole scene, viewed from a certain object --</span> </pre></li>
<li id="l430"><pre>   <span class="comment">------------------------------------------------------------</span> </pre></li>
<li id="l431"><pre> </pre></li>
<li id="l432"><pre>   <span class="keyword">overriding</span> <span class="keyword">procedure</span> <span class="droplink">Display<ul><li><a href="globe_3d.ads.html#globe_3d.ads:432:25" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l664" title="To body">To body</a></li></ul></span> ( </pre></li>
<li id="l433"><pre>                                 <span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:433:34" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l664" title="To body">To body</a></li></ul></span>           : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l434"><pre>                                 <span class="droplink">clip<ul><li><a href="globe_3d.ads.html#globe_3d.ads:434:34" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l665" title="To body">To body</a></li></ul></span>        :        <span class="droplink">Clipping_data<ul><li><a href="globe_3d.ads.html#globe_3d.ads:143:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l143" title="To spec">To spec</a></li></ul></span> </pre></li>
<li id="l435"><pre>                                ); </pre></li>
<li id="l436"><pre>   <span class="comment">-- - &quot;out&quot; for o because object might be pre_calculated if not yet</span> </pre></li>
<li id="l437"><pre>   <span class="comment">-- - clip:</span> </pre></li>
<li id="l438"><pre>   <span class="comment">--     allows to cull rendering of neighbouring objects that are not</span> </pre></li>
<li id="l439"><pre>   <span class="comment">--     visible from current point of view; also avoids infinite</span> </pre></li>
<li id="l440"><pre>   <span class="comment">--     recursion in case of mutually connected objects.</span> </pre></li>
<li id="l441"><pre>   <span class="comment">-- - neighbouring objects being drawn more than once, e.g. two parts</span> </pre></li>
<li id="l442"><pre>   <span class="comment">--     visible through two portals, is admissible with adequate clipping.</span> </pre></li>
<li id="l443"><pre> </pre></li>
<li id="l444"><pre>   <span class="comment">--------------------------------</span> </pre></li>
<li id="l445"><pre>   <span class="comment">-- Display of a single object --</span> </pre></li>
<li id="l446"><pre>   <span class="comment">--------------------------------</span> </pre></li>
<li id="l447"><pre> </pre></li>
<li id="l448"><pre>   <span class="keyword">procedure</span> <span class="droplink">Display_one<ul><li><a href="globe_3d.ads.html#globe_3d.ads:448:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l401" title="To body">To body</a></li></ul></span> (<span class="droplink">o<ul><li><a href="globe_3d.ads.html#globe_3d.ads:448:27" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l401" title="To body">To body</a></li></ul></span> : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Object_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:263:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l263" title="To spec">To spec</a></li><li><a href="src_globe_3d.ads.html#l371" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l449"><pre>   <span class="comment">-- Display only this object and not connected objects</span> </pre></li>
<li id="l450"><pre>   <span class="comment">-- &quot;out&quot; for o because object might be pre_calculated if not yet</span> </pre></li>
<li id="l451"><pre> </pre></li>
<li id="l452"><pre>   <span class="comment">-- Abstract windowing management</span> </pre></li>
<li id="l453"><pre>   <span class="comment">--</span> </pre></li>
<li id="l454"><pre> </pre></li>
<li id="l455"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:455:9" title="defined at globe_3d.ads:455:9">Window</a> <span class="keyword">is</span> <span class="keyword">abstract</span> <span class="keyword">tagged</span> </pre></li>
<li id="l456"><pre>      <span class="keyword">record</span> </pre></li>
<li id="l457"><pre>         Camera  : <span class="keyword">aliased</span> <span class="droplink">GLOBE_3D.Camera<ul><li><a href="globe_3d.ads.html#globe_3d.ads:156:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l156" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l458"><pre>      <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l459"><pre> </pre></li>
<li id="l460"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:460:9" title="defined at globe_3d.ads:460:9">p_Window</a> <span class="keyword">is</span> <span class="keyword">access</span> <span class="keyword">all</span> <span class="droplink">Window<ul><li><a href="globe_3d.ads.html#globe_3d.ads:455:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l455" title="To spec">To spec</a></li></ul></span>&apos;Class; <span class="keyword">pragma</span> No_Strict_Aliasing (<span class="droplink">p_Window<ul><li><a href="globe_3d.ads.html#globe_3d.ads:460:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l460" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l461"><pre> </pre></li>
<li id="l462"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:462:14" title="defined at globe_3d.ads:462:14">Enable</a>  (<a href="globe_3d.ads.html#globe_3d.ads:462:23" title="defined at globe_3d.ads:462:23">Self</a>       : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Window<ul><li><a href="globe_3d.ads.html#globe_3d.ads:455:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l455" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l463"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:463:14" title="defined at globe_3d.ads:463:14">Freshen</a> (<a href="globe_3d.ads.html#globe_3d.ads:463:23" title="defined at globe_3d.ads:463:23">Self</a>       : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Window<ul><li><a href="globe_3d.ads.html#globe_3d.ads:455:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l455" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l464"><pre>                      <a href="globe_3d.ads.html#globe_3d.ads:464:23" title="defined at globe_3d.ads:464:23">time_Step</a>  :        <span class="droplink">GLOBE_3D.Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l465"><pre>                      <a href="globe_3d.ads.html#globe_3d.ads:465:23" title="defined at globe_3d.ads:465:23">Extras</a>     :        <span class="droplink">GLOBE_3D.Visual_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:210:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l210" title="To spec">To spec</a></li></ul></span> := <span class="droplink">GLOBE_3D.null_Visuals<ul><li><a href="globe_3d.ads.html#globe_3d.ads:241:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l241" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> <span class="keyword">abstract</span>; </pre></li>
<li id="l466"><pre> </pre></li>
<li id="l467"><pre>   <span class="comment">-- Exceptions</span> </pre></li>
<li id="l468"><pre>   <span class="comment">--</span> </pre></li>
<li id="l469"><pre> </pre></li>
<li id="l470"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:470:4" title="defined at globe_3d.ads:470:4">Missing_level_data</a>  : <span class="keyword">exception</span>; </pre></li>
<li id="l471"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:471:4" title="defined at globe_3d.ads:471:4">Missing_global_data</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l472"><pre> </pre></li>
<li id="l473"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:473:4" title="defined at globe_3d.ads:473:4">Missing_texture</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l474"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:474:4" title="defined at globe_3d.ads:474:4">Missing_object</a>  : <span class="keyword">exception</span>; </pre></li>
<li id="l475"><pre> </pre></li>
<li id="l476"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:476:4" title="defined at globe_3d.ads:476:4">zero_normal</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l477"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:477:4" title="defined at globe_3d.ads:477:4">zero_summed_normal</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l478"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:478:4" title="defined at globe_3d.ads:478:4">zero_averaged_normal</a> : <span class="keyword">exception</span>; </pre></li>
<li id="l479"><pre> </pre></li>
<li id="l480"><pre>   <span class="comment">--------------</span> </pre></li>
<li id="l481"><pre>   <span class="comment">-- Lighting --</span> </pre></li>
<li id="l482"><pre>   <span class="comment">--------------</span> </pre></li>
<li id="l483"><pre> </pre></li>
<li id="l484"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:484:12" title="defined at globe_3d.ads:484:12">Light_count</a> <span class="keyword">is</span> Natural <span class="keyword">range</span> 0 .. 8; </pre></li>
<li id="l485"><pre>   <span class="comment">-- GL supports up to 8 sources.</span> </pre></li>
<li id="l486"><pre>   <span class="keyword">subtype</span> <a href="globe_3d.ads.html#globe_3d.ads:486:12" title="defined at globe_3d.ads:486:12">Light_ident</a> <span class="keyword">is</span> <span class="droplink">Light_count<ul><li><a href="globe_3d.ads.html#globe_3d.ads:484:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l484" title="To spec">To spec</a></li></ul></span> <span class="keyword">range</span> 1 .. <span class="droplink">Light_count<ul><li><a href="globe_3d.ads.html#globe_3d.ads:484:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l484" title="To spec">To spec</a></li></ul></span>&apos;Last; </pre></li>
<li id="l487"><pre> </pre></li>
<li id="l488"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:488:9" title="defined at globe_3d.ads:488:9">Light_definition</a> <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l489"><pre>      position, ambient, diffuse, specular : <span class="droplink">GL.Light_Float_vector<ul><li><a href="gl.ads.html#gl.ads:153:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l153" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l490"><pre>   <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l491"><pre> </pre></li>
<li id="l492"><pre>   <span class="keyword">procedure</span> <span class="droplink">Define<ul><li><a href="globe_3d.ads.html#globe_3d.ads:492:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l833" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:492:22" title="defined at globe_3d.ads:492:22">which</a> : <span class="droplink">Light_ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:486:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l486" title="To spec">To spec</a></li></ul></span>; <span class="droplink">as<ul><li><a href="globe_3d.ads.html#globe_3d.ads:492:43" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l833" title="To body">To body</a></li></ul></span> : <span class="droplink">Light_definition<ul><li><a href="globe_3d.ads.html#globe_3d.ads:488:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l488" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l493"><pre> </pre></li>
<li id="l494"><pre>   <span class="keyword">procedure</span> <span class="droplink">Switch_lights<ul><li><a href="globe_3d.ads.html#globe_3d.ads:494:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l846" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:494:29" title="defined at globe_3d.ads:494:29">on</a> : Boolean); </pre></li>
<li id="l495"><pre>   <span class="keyword">procedure</span> <span class="droplink">Switch_light<ul><li><a href="globe_3d.ads.html#globe_3d.ads:495:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l860" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:495:28" title="defined at globe_3d.ads:495:28">which</a> : <span class="droplink">Light_ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:486:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l486" title="To spec">To spec</a></li></ul></span>; <a href="globe_3d.ads.html#globe_3d.ads:495:49" title="defined at globe_3d.ads:495:49">on</a> : Boolean); </pre></li>
<li id="l496"><pre> </pre></li>
<li id="l497"><pre>   <span class="keyword">procedure</span> <span class="droplink">Reverse_light_switch<ul><li><a href="globe_3d.ads.html#globe_3d.ads:497:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l878" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:497:36" title="defined at globe_3d.ads:497:36">which</a> : <span class="droplink">Light_ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:486:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l486" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l498"><pre> </pre></li>
<li id="l499"><pre>   <span class="keyword">function</span> <span class="droplink">Is_light_switched<ul><li><a href="globe_3d.ads.html#globe_3d.ads:499:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l872" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:499:32" title="defined at globe_3d.ads:499:32">which</a> : <span class="droplink">Light_ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:486:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l486" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> Boolean; </pre></li>
<li id="l500"><pre> </pre></li>
<li id="l501"><pre>   <span class="comment">----------</span> </pre></li>
<li id="l502"><pre>   <span class="comment">-- Misc --</span> </pre></li>
<li id="l503"><pre>   <span class="comment">----------</span> </pre></li>
<li id="l504"><pre> </pre></li>
<li id="l505"><pre>   <span class="keyword">function</span> <span class="droplink">Image<ul><li><a href="globe_3d.ads.html#globe_3d.ads:505:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l24" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:505:20" title="defined at globe_3d.ads:505:20">r</a> : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> String; </pre></li>
<li id="l506"><pre> </pre></li>
<li id="l507"><pre>   <span class="keyword">function</span> <span class="droplink">Coords<ul><li><a href="globe_3d.ads.html#globe_3d.ads:507:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l36" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:507:21" title="defined at globe_3d.ads:507:21">p</a> : <span class="droplink">Point_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:111:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l111" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> String; </pre></li>
<li id="l508"><pre> </pre></li>
<li id="l509"><pre>   <span class="keyword">procedure</span> <span class="droplink">Angles_modulo_360<ul><li><a href="globe_3d.ads.html#globe_3d.ads:509:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l888" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:509:33" title="defined at globe_3d.ads:509:33">v</a> : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l510"><pre> </pre></li>
<li id="l511"><pre>   <span class="comment">--------------------------------</span> </pre></li>
<li id="l512"><pre>   <span class="comment">-- Free heap - allocated memory --</span> </pre></li>
<li id="l513"><pre>   <span class="comment">--------------------------------</span> </pre></li>
<li id="l514"><pre> </pre></li>
<li id="l515"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:515:14" title="defined at globe_3d.ads:515:14">Dispose</a> <span class="keyword">is</span> </pre></li>
<li id="l516"><pre>     <span class="keyword">new</span> Ada.Unchecked_Deallocation (<span class="droplink">Point_3D_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:121:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l121" title="To spec">To spec</a></li></ul></span>, <span class="droplink">p_Point_3D_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:122:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l122" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l517"><pre> </pre></li>
<li id="l518"><pre>   <span class="keyword">procedure</span> <a href="globe_3d.ads.html#globe_3d.ads:518:14" title="defined at globe_3d.ads:518:14">Dispose</a> <span class="keyword">is</span> </pre></li>
<li id="l519"><pre>     <span class="keyword">new</span> Ada.Unchecked_Deallocation (<span class="droplink">Face_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:333:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l333" title="To spec">To spec</a></li></ul></span>, <span class="droplink">p_Face_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:334:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l334" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l520"><pre> </pre></li>
<li id="l521"><pre>   <span class="comment">---------------------------------------------------------------</span> </pre></li>
<li id="l522"><pre>   <span class="comment">-- Trash : provisory variables for some development checkings --</span> </pre></li>
<li id="l523"><pre>   <span class="comment">---------------------------------------------------------------</span> </pre></li>
<li id="l524"><pre> </pre></li>
<li id="l525"><pre>   <span class="comment">-- info_?_ .. .  : ?= letter; change letter to clean - up debug infos</span> </pre></li>
<li id="l526"><pre> </pre></li>
<li id="l527"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:527:4" title="defined at globe_3d.ads:527:4">info_b_real1</a>, </pre></li>
<li id="l528"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:528:4" title="defined at globe_3d.ads:528:4">info_b_real2</a> : <span class="droplink">Real<ul><li><a href="globe_3d.ads.html#globe_3d.ads:102:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l102" title="To spec">To spec</a></li></ul></span> := 123.0; </pre></li>
<li id="l529"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:529:4" title="defined at globe_3d.ads:529:4">info_b_vect</a>  : <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span> := (<span class="keyword">others</span> =&gt; 123.0); </pre></li>
<li id="l530"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:530:4" title="defined at globe_3d.ads:530:4">info_b_bool1</a>, </pre></li>
<li id="l531"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:531:4" title="defined at globe_3d.ads:531:4">info_b_bool2</a> : Boolean := False; </pre></li>
<li id="l532"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:532:4" title="defined at globe_3d.ads:532:4">info_b_clip</a>  : <span class="droplink">Clipping_area<ul><li><a href="globe_3d.ads.html#globe_3d.ads:135:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l135" title="To spec">To spec</a></li></ul></span> := (0, 0, 0, 0); </pre></li>
<li id="l533"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:533:4" title="defined at globe_3d.ads:533:4">info_b_pnt</a>   : <span class="keyword">array</span> (0 .. 4) <span class="keyword">of</span> <span class="droplink">Point_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:111:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l111" title="To spec">To spec</a></li></ul></span> := (<span class="keyword">others</span> =&gt; (<span class="keyword">others</span> =&gt; 123.0)); </pre></li>
<li id="l534"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:534:4" title="defined at globe_3d.ads:534:4">info_b_ntl1</a>, </pre></li>
<li id="l535"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:535:4" title="defined at globe_3d.ads:535:4">info_b_ntl2</a>, </pre></li>
<li id="l536"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:536:4" title="defined at globe_3d.ads:536:4">info_b_ntl3</a>  : Natural := 0; </pre></li>
<li id="l537"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:537:4" title="defined at globe_3d.ads:537:4">info_b_str1</a>  : Ada.Strings.Unbounded.Unbounded_String := </pre></li>
<li id="l538"><pre>     Ada.Strings.Unbounded.Null_Unbounded_String; </pre></li>
<li id="l539"><pre> </pre></li>
<li id="l540"><pre><span class="keyword">private</span> </pre></li>
<li id="l541"><pre> </pre></li>
<li id="l542"><pre>   <span class="keyword">type</span> <a href="globe_3d.ads.html#globe_3d.ads:542:9" title="defined at globe_3d.ads:542:9">p_String</a> <span class="keyword">is</span> <span class="keyword">access</span> String; </pre></li>
<li id="l543"><pre> </pre></li>
<li id="l544"><pre>   <span class="keyword">type</span> <span class="droplink">Face_invariant_type<ul><li><a href="globe_3d.ads.html#globe_3d.ads:340:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l340" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> <span class="keyword">record</span> </pre></li>
<li id="l545"><pre>      P_compact    : <span class="droplink">Idx_4_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:287:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l287" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l546"><pre>      <span class="comment">-- indices of the edges (anticlockwise),</span> </pre></li>
<li id="l547"><pre>      <span class="comment">-- in compact range  : 1 .. 3 for triangle</span> </pre></li>
<li id="l548"><pre>      last_edge    : <span class="droplink">Edge_count<ul><li><a href="globe_3d.ads.html#globe_3d.ads:336:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l336" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l549"><pre>      UV_extrema   : <span class="droplink">Map_idx_pair_4_array<ul><li><a href="globe_3d.ads.html#globe_3d.ads:292:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l292" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l550"><pre>      <span class="comment">-- mapping of texture edges according to an eventual</span> </pre></li>
<li id="l551"><pre>      <span class="comment">-- 0 in P (triangle). Compact range  : 1 .. 3 for triangle</span> </pre></li>
<li id="l552"><pre>      normal       : <span class="droplink">Vector_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:106:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l106" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l553"><pre>      blending     : Boolean; <span class="comment">-- is any alpha &lt; 1 ?</span> </pre></li>
<li id="l554"><pre>      connect_name : <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span> := <span class="droplink">empty<ul><li><a href="globe_3d.ads.html#globe_3d.ads:83:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l83" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l555"><pre>      <span class="comment">-- ^ Used for loading connected objects.</span> </pre></li>
<li id="l556"><pre>      <span class="comment">--   When the object group has been loaded, that name is set;</span> </pre></li>
<li id="l557"><pre>      <span class="comment">--   the face (f).connecting accesses can be resolved using</span> </pre></li>
<li id="l558"><pre>      <span class="comment">--   the face_invariant (f).connect_name .</span> </pre></li>
<li id="l559"><pre>      texture_name : <span class="droplink">Ident<ul><li><a href="globe_3d.ads.html#globe_3d.ads:79:12" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l79" title="To spec">To spec</a></li></ul></span> := <span class="droplink">empty<ul><li><a href="globe_3d.ads.html#globe_3d.ads:83:4" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l83" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l560"><pre>      <span class="comment">-- ^ face (f).texture must be resolved using</span> </pre></li>
<li id="l561"><pre>      <span class="comment">--   face_invariant (f).texture_name .</span> </pre></li>
<li id="l562"><pre>      portal_seen  : Boolean := False; </pre></li>
<li id="l563"><pre>      <span class="comment">-- ^ always False, except during Display to avoid possible infinite</span> </pre></li>
<li id="l564"><pre>      <span class="comment">--   recursion; reset to False at the end of Display.</span> </pre></li>
<li id="l565"><pre>   <span class="keyword">end</span> <span class="keyword">record</span>; </pre></li>
<li id="l566"><pre> </pre></li>
<li id="l567"><pre>   <span class="comment">-- A few global variables - shocking! Don&apos;t look, it&apos;s private here : - )</span> </pre></li>
<li id="l568"><pre> </pre></li>
<li id="l569"><pre>   <span class="comment">-- Name of Zip archives containing the Level / Global data</span> </pre></li>
<li id="l570"><pre>   <span class="comment">-- If an item is not found in the level data, it is</span> </pre></li>
<li id="l571"><pre>   <span class="comment">-- searched in the global one</span> </pre></li>
<li id="l572"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:572:4" title="defined at globe_3d.ads:572:4">level_data_name</a>   : Ada.Strings.Unbounded.Unbounded_String := </pre></li>
<li id="l573"><pre>     Ada.Strings.Unbounded.To_Unbounded_String (<span class="string">&quot;*undefined_level_data*&quot;</span>); </pre></li>
<li id="l574"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:574:4" title="defined at globe_3d.ads:574:4">global_data_name</a>  : Ada.Strings.Unbounded.Unbounded_String := </pre></li>
<li id="l575"><pre>     Ada.Strings.Unbounded.To_Unbounded_String (<span class="string">&quot;*undefined_global_data*&quot;</span>); </pre></li>
<li id="l576"><pre> </pre></li>
<li id="l577"><pre>   <span class="comment">-- Corresponding zip file infos for quick search</span> </pre></li>
<li id="l578"><pre>   <a href="globe_3d.ads.html#globe_3d.ads:578:4" title="defined at globe_3d.ads:578:4">zif_level</a>, <a href="globe_3d.ads.html#globe_3d.ads:578:15" title="defined at globe_3d.ads:578:15">zif_global</a> : <span class="droplink">Zip.Zip_info<ul><li><a href="zip.ads.html#zip.ads:53:8" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l53" title="To spec">To spec</a></li><li><a href="src_zip.ads.html#l308" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l579"><pre> </pre></li>
<li id="l580"><pre>   <span class="keyword">procedure</span> <span class="droplink">Load_if_needed<ul><li><a href="globe_3d.ads.html#globe_3d.ads:580:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l902" title="To body">To body</a></li></ul></span> (<span class="droplink">zif<ul><li><a href="globe_3d.ads.html#globe_3d.ads:580:30" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l902" title="To body">To body</a></li></ul></span> : <span class="keyword">in</span> <span class="keyword">out</span> <span class="droplink">Zip.Zip_info<ul><li><a href="zip.ads.html#zip.ads:53:8" title="To API doc">To API doc</a></li><li><a href="src_zip.ads.html#l53" title="To spec">To spec</a></li><li><a href="src_zip.ads.html#l308" title="To body">To body</a></li></ul></span>; <a href="globe_3d.ads.html#globe_3d.ads:580:57" title="defined at globe_3d.ads:580:57">name</a> : String); </pre></li>
<li id="l581"><pre> </pre></li>
<li id="l582"><pre>   <span class="comment">-- General support functions available to child packages . ..</span> </pre></li>
<li id="l583"><pre>   <span class="comment">--</span> </pre></li>
<li id="l584"><pre> </pre></li>
<li id="l585"><pre>   <span class="comment">-- blending support</span> </pre></li>
<li id="l586"><pre>   <span class="comment">--</span> </pre></li>
<li id="l587"><pre>   <span class="keyword">function</span> <span class="droplink">Is_to_blend<ul><li><a href="globe_3d.ads.html#globe_3d.ads:587:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l82" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:587:26" title="defined at globe_3d.ads:587:26">m</a> : <span class="droplink">GL.Double<ul><li><a href="gl.ads.html#gl.ads:128:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l128" title="To spec">To spec</a></li></ul></span>)                  <span class="keyword">return</span> Boolean; </pre></li>
<li id="l588"><pre>   <span class="keyword">function</span> <span class="droplink">Is_to_blend<ul><li><a href="globe_3d.ads.html#globe_3d.ads:588:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l84" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:588:26" title="defined at globe_3d.ads:588:26">m</a> : <span class="droplink">GL.C_Float<ul><li><a href="gl.ads.html#gl.ads:126:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l126" title="To spec">To spec</a></li></ul></span>)                 <span class="keyword">return</span> Boolean; </pre></li>
<li id="l589"><pre>   <span class="keyword">function</span> <span class="droplink">Is_to_blend<ul><li><a href="globe_3d.ads.html#globe_3d.ads:589:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l86" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:589:26" title="defined at globe_3d.ads:589:26">m</a> : <span class="droplink">GL.Material_Float_vector<ul><li><a href="gl.ads.html#gl.ads:154:9" title="To API doc">To API doc</a></li><li><a href="src_gl.ads.html#l154" title="To spec">To spec</a></li></ul></span>)   <span class="keyword">return</span> Boolean; </pre></li>
<li id="l590"><pre>   <span class="keyword">function</span> <span class="droplink">Is_to_blend<ul><li><a href="globe_3d.ads.html#globe_3d.ads:590:13" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l88" title="To body">To body</a></li></ul></span> (<a href="globe_3d.ads.html#globe_3d.ads:590:26" title="defined at globe_3d.ads:590:26">m</a> : <span class="droplink">GL.Materials.Material_type<ul><li><a href="gl-materials.ads.html#gl-materials.ads:25:8" title="To API doc">To API doc</a></li><li><a href="src_gl-materials.ads.html#l25" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> Boolean; </pre></li>
<li id="l591"><pre> </pre></li>
<li id="l592"><pre>   <span class="comment">-- material support</span> </pre></li>
<li id="l593"><pre>   <span class="comment">--</span> </pre></li>
<li id="l594"><pre>   <span class="keyword">procedure</span> <span class="droplink">Set_Material<ul><li><a href="globe_3d.ads.html#globe_3d.ads:594:14" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l97" title="To body">To body</a></li></ul></span> (<span class="droplink">m<ul><li><a href="globe_3d.ads.html#globe_3d.ads:594:28" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.adb.html#l97" title="To body">To body</a></li></ul></span> : <span class="droplink">GL.Materials.Material_type<ul><li><a href="gl-materials.ads.html#gl-materials.ads:25:8" title="To API doc">To API doc</a></li><li><a href="src_gl-materials.ads.html#l25" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l595"><pre> </pre></li>
<li id="l596"><pre>   <span class="comment">-- Maps of Visuals - quick dictionary search</span> </pre></li>
<li id="l597"><pre>   <span class="comment">--</span> </pre></li>
<li id="l598"><pre>   <span class="keyword">package</span> <a href="globe_3d.ads.html#globe_3d.ads:598:12" title="defined at globe_3d.ads:598:12">Visuals_Mapping</a> <span class="keyword">is</span> <span class="keyword">new</span> Ada.Containers.Hashed_Maps </pre></li>
<li id="l599"><pre>     (Key_Type        =&gt; Ada.Strings.Unbounded.Unbounded_String, </pre></li>
<li id="l600"><pre>      Element_Type    =&gt; <span class="droplink">p_Visual<ul><li><a href="globe_3d.ads.html#globe_3d.ads:209:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l209" title="To spec">To spec</a></li></ul></span>, </pre></li>
<li id="l601"><pre>      Hash            =&gt; Ada.Strings.Unbounded.Hash, </pre></li>
<li id="l602"><pre>      Equivalent_Keys =&gt; Ada.Strings.Unbounded.&quot;=&quot;); </pre></li>
<li id="l603"><pre> </pre></li>
<li id="l604"><pre>   <span class="keyword">type</span> <span class="droplink">Map_of_Visuals<ul><li><a href="globe_3d.ads.html#globe_3d.ads:252:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l252" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> <span class="keyword">new</span> Visuals_Mapping.Map <span class="keyword">with</span> <span class="keyword">null</span> <span class="keyword">record</span>; </pre></li>
<li id="l605"><pre> </pre></li>
<li id="l606"><pre><span class="keyword">end</span> <span class="droplink">GLOBE_3D<ul><li><a href="globe_3d.ads.html#globe_3d.ads:77:9" title="To API doc">To API doc</a></li><li><a href="src_globe_3d.ads.html#l77" title="To spec">To spec</a></li><li><a href="src_globe_3d.adb.html#l17" title="To body">To body</a></li></ul></span>; </pre></li>
</ol></div>
</div>

</body>
</html>
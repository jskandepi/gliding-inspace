<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript"/>

  <title>
    File: swarm_control.adb
  </title>
  <link rel='stylesheet' href='support/docgen.css' type='text/css'/>
  <link rel='stylesheet' href='support/tags.css' type='text/css'/>
  <script src='support/docgen.js' type='text/javascript' charset='utf-8'></script>
</head>
<body onload="onloadDoc();">

<div id='leftSide'>
  <div id='leftSideInside'>
  <div id='header'>
    <h2 class="button">Documentation</h2>
    <a href='toc.html'><div class="button2">Table of Contents</div></a>

    <a href='tree.html'><div class="button2">Class Inheritance Tree</div></a>

  </div>
  </div>
</div> <!-- leftSide -->

<div class='subprograms'>
  <div class='details'><ol><li id="l1"><pre><span class="comment">--</span> </pre></li>
<li id="l2"><pre><span class="comment">-- Jan &amp; Uwe R. Zimmer, Australia, 2013</span> </pre></li>
<li id="l3"><pre><span class="comment">--</span> </pre></li>
<li id="l4"><pre> </pre></li>
<li id="l5"><pre><span class="keyword">with</span> Ada.Containers;                    <span class="keyword">use</span> Ada.Containers; </pre></li>
<li id="l6"><pre><span class="keyword">with</span> Ada.Numerics;                      <span class="keyword">use</span> Ada.Numerics; </pre></li>
<li id="l7"><pre><span class="keyword">with</span> Ada.Numerics.Float_Random;         <span class="keyword">use</span> Ada.Numerics.Float_Random; </pre></li>
<li id="l8"><pre><span class="keyword">with</span> Ada.Real_Time;                     <span class="keyword">use</span> Ada.Real_Time; </pre></li>
<li id="l9"><pre><span class="keyword">with</span> Ada.Text_IO;                       <span class="keyword">use</span> Ada.Text_IO; </pre></li>
<li id="l10"><pre><span class="keyword">with</span> <span class="droplink">Graphics_Configuration<ul><li><a href="graphics_configuration.ads.html#graphics_configuration.ads:14:9" title="To API doc">To API doc</a></li><li><a href="src_graphics_configuration.ads.html#l14" title="To spec">To spec</a></li></ul></span>;            <span class="keyword">use</span> <span class="droplink">Graphics_Configuration<ul><li><a href="graphics_configuration.ads.html#graphics_configuration.ads:14:9" title="To API doc">To API doc</a></li><li><a href="src_graphics_configuration.ads.html#l14" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l11"><pre><span class="keyword">with</span> <span class="droplink">Rotations<ul><li><a href="rotations.ads.html#rotations.ads:12:9" title="To API doc">To API doc</a></li><li><a href="src_rotations.ads.html#l12" title="To spec">To spec</a></li><li><a href="src_rotations.adb.html#l7" title="To body">To body</a></li></ul></span>;                         <span class="keyword">use</span> <span class="droplink">Rotations<ul><li><a href="rotations.ads.html#rotations.ads:12:9" title="To API doc">To API doc</a></li><li><a href="src_rotations.ads.html#l12" title="To spec">To spec</a></li><li><a href="src_rotations.adb.html#l7" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l12"><pre><span class="keyword">with</span> <span class="droplink">Swarm_Data<ul><li><a href="swarm_data.ads.html#swarm_data.ads:10:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l10" title="To spec">To spec</a></li></ul></span>;                        <span class="keyword">use</span> <span class="droplink">Swarm_Data<ul><li><a href="swarm_data.ads.html#swarm_data.ads:10:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l10" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l13"><pre><span class="keyword">with</span> <span class="droplink">Vectors_Conversions<ul><li><a href="vectors_conversions.ads.html#vectors_conversions.ads:8:9" title="To API doc">To API doc</a></li><li><a href="src_vectors_conversions.ads.html#l8" title="To spec">To spec</a></li><li><a href="src_vectors_conversions.adb.html#l3" title="To body">To body</a></li></ul></span>;               <span class="keyword">use</span> <span class="droplink">Vectors_Conversions<ul><li><a href="vectors_conversions.ads.html#vectors_conversions.ads:8:9" title="To API doc">To API doc</a></li><li><a href="src_vectors_conversions.ads.html#l8" title="To spec">To spec</a></li><li><a href="src_vectors_conversions.adb.html#l3" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l14"><pre><span class="keyword">with</span> <span class="droplink">Vectors_3D_LF<ul><li><a href="vectors_3d_lf.ads.html#vectors_3d_lf.ads:7:9" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d_lf.ads.html#l7" title="To spec">To spec</a></li><li><a href="src_vectors_3d_lf.adb.html#l5" title="To body">To body</a></li></ul></span>;                     <span class="keyword">use</span> <span class="droplink">Vectors_3D_LF<ul><li><a href="vectors_3d_lf.ads.html#vectors_3d_lf.ads:7:9" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d_lf.ads.html#l7" title="To spec">To spec</a></li><li><a href="src_vectors_3d_lf.adb.html#l5" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l15"><pre><span class="keyword">with</span> <span class="droplink">Vehicle_Message_Type<ul><li><a href="vehicle_message_type.ads.html#vehicle_message_type.ads:6:9" title="To API doc">To API doc</a></li><li><a href="src_vehicle_message_type.ads.html#l6" title="To spec">To spec</a></li></ul></span>;              <span class="keyword">use</span> <span class="droplink">Vehicle_Message_Type<ul><li><a href="vehicle_message_type.ads.html#vehicle_message_type.ads:6:9" title="To API doc">To API doc</a></li><li><a href="src_vehicle_message_type.ads.html#l6" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l16"><pre><span class="keyword">with</span> <span class="droplink">Vehicle_Task_Type<ul><li><a href="vehicle_task_type.ads.html#vehicle_task_type.ads:3:9" title="To API doc">To API doc</a></li><li><a href="src_vehicle_task_type.ads.html#l3" title="To spec">To spec</a></li><li><a href="src_vehicle_task_type.adb.html#l15" title="To body">To body</a></li></ul></span>;                 <span class="keyword">use</span> <span class="droplink">Vehicle_Task_Type<ul><li><a href="vehicle_task_type.ads.html#vehicle_task_type.ads:3:9" title="To API doc">To API doc</a></li><li><a href="src_vehicle_task_type.ads.html#l3" title="To spec">To spec</a></li><li><a href="src_vehicle_task_type.adb.html#l15" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l17"><pre> </pre></li>
<li id="l18"><pre><span class="keyword">package</span> <span class="keyword">body</span> <span class="droplink">Swarm_Control<ul><li><a href="swarm_control.ads.html#swarm_control.ads:13:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l13" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l19"><pre> </pre></li>
<li id="l20"><pre>   <span class="keyword">use</span> <span class="droplink">Real_Elementary_Functions<ul><li><a href="real_type.ads.html#real_type.ads:7:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l7" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l21"><pre>   <span class="keyword">use</span> <span class="droplink">Swarm_Vectors<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:110:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l110" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l22"><pre> </pre></li>
<li id="l23"><pre>   <span class="keyword">protected</span> <span class="keyword">body</span> <span class="droplink">Swarm_Monitor<ul><li><a href="swarm_control.ads.html#swarm_control.ads:17:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l17" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l24"><pre> </pre></li>
<li id="l25"><pre>      <span class="keyword">function</span> <span class="droplink">Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:19:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l19" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l26"><pre> </pre></li>
<li id="l27"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l28"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l29"><pre>            <span class="keyword">if</span> Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Process_Id = Current_Task <span class="keyword">then</span> </pre></li>
<li id="l30"><pre>               <span class="keyword">return</span> (Element_Index); </pre></li>
<li id="l31"><pre>            <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l32"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l33"><pre>         <span class="keyword">raise</span> <span class="droplink">No_Such_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:50:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l50" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l34"><pre>      <span class="keyword">end</span> <span class="droplink">Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:19:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l19" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l25" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l35"><pre> </pre></li>
<li id="l36"><pre>      <span class="keyword">function</span> <span class="droplink">Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> : Task_Id) <span class="keyword">return</span> <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l37"><pre> </pre></li>
<li id="l38"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l39"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l40"><pre>            <span class="keyword">if</span> Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Process_Id = <span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l41"><pre>               <span class="keyword">return</span> (Element_Index); </pre></li>
<li id="l42"><pre>            <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l43"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l44"><pre>         <span class="keyword">raise</span> <span class="droplink">No_Such_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:50:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l50" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l45"><pre>      <span class="keyword">end</span> <span class="droplink">Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l36" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l46"><pre> </pre></li>
<li id="l47"><pre>      <span class="keyword">function</span> <span class="droplink">Position<ul><li><a href="swarm_control.ads.html#swarm_control.ads:22:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l22" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> : Task_Id) <span class="keyword">return</span> <span class="droplink">Protected_Point_3D.Monitor_Ptr<ul><li><a href="generic_protected.ads.html#generic_protected.ads:28:9" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l28" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l48"><pre>         (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Swarm_Monitor.Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l36" title="To body">To body</a></li></ul></span> (Current_Task)).Position); </pre></li>
<li id="l49"><pre> </pre></li>
<li id="l50"><pre>      <span class="keyword">function</span> <span class="droplink">Velocity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:23:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l23" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> : Task_Id) <span class="keyword">return</span> <span class="droplink">Protected_Vector_3D.Monitor_Ptr<ul><li><a href="generic_protected.ads.html#generic_protected.ads:28:9" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l28" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l51"><pre>         (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Swarm_Monitor.Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l36" title="To body">To body</a></li></ul></span> (Current_Task)).Velocity); </pre></li>
<li id="l52"><pre> </pre></li>
<li id="l53"><pre>      <span class="keyword">function</span> <span class="droplink">Acceleration<ul><li><a href="swarm_control.ads.html#swarm_control.ads:24:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l24" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> : Task_Id) <span class="keyword">return</span> <span class="droplink">Protected_Vector_3D.Monitor_Ptr<ul><li><a href="generic_protected.ads.html#generic_protected.ads:28:9" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l28" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l54"><pre>        (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Swarm_Monitor.Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l36" title="To body">To body</a></li></ul></span> (Current_Task)).Acceleration); </pre></li>
<li id="l55"><pre> </pre></li>
<li id="l56"><pre>      <span class="keyword">function</span> <span class="droplink">Controls<ul><li><a href="swarm_control.ads.html#swarm_control.ads:25:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l25" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> : Task_Id) <span class="keyword">return</span> <span class="droplink">Vehicle_Controls_P<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:88:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l88" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l57"><pre>         (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Swarm_Monitor.Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l36" title="To body">To body</a></li></ul></span> (Current_Task)).Controls); </pre></li>
<li id="l58"><pre> </pre></li>
<li id="l59"><pre>      <span class="keyword">function</span> <span class="droplink">Comms<ul><li><a href="swarm_control.ads.html#swarm_control.ads:26:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l26" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> : Task_Id) <span class="keyword">return</span> <span class="droplink">Vehicle_Comms_P<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:87:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l87" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l60"><pre>        (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Swarm_Monitor.Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l36" title="To body">To body</a></li></ul></span> (Current_Task)).Comms); </pre></li>
<li id="l61"><pre> </pre></li>
<li id="l62"><pre>      <span class="keyword">function</span> <span class="droplink">Charge<ul><li><a href="swarm_control.ads.html#swarm_control.ads:27:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l27" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:25" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li></ul></span> : Task_Id) <span class="keyword">return</span> <span class="droplink">Charge_Info<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:79:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l79" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l63"><pre>        (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Swarm_Monitor.Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:20:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l20" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l36" title="To body">To body</a></li></ul></span> (Current_Task)).Charge); </pre></li>
<li id="l64"><pre> </pre></li>
<li id="l65"><pre>      <span class="keyword">function</span> <span class="droplink">Process_abort<ul><li><a href="swarm_control.ads.html#swarm_control.ads:28:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l28" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Barrier_Ptr<ul><li><a href="barrier_type.ads.html#barrier_type.ads:20:9" title="To API doc">To API doc</a></li><li><a href="src_barrier_type.ads.html#l20" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l66"><pre>        (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Swarm_Monitor.Id_Task<ul><li><a href="swarm_control.ads.html#swarm_control.ads:19:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l19" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l25" title="To body">To body</a></li></ul></span>).Process_abort); </pre></li>
<li id="l67"><pre>      <span class="comment">--</span> </pre></li>
<li id="l68"><pre>      <span class="comment">--</span> </pre></li>
<li id="l69"><pre>      <span class="comment">--</span> </pre></li>
<li id="l70"><pre> </pre></li>
<li id="l71"><pre>      <span class="keyword">procedure</span> <span class="droplink">Append_Random_Swarm<ul><li><a href="swarm_control.ads.html#swarm_control.ads:30:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l30" title="To spec">To spec</a></li></ul></span> (<span class="droplink">No_Of_Swarm_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:30:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l30" title="To spec">To spec</a></li></ul></span> : Positive  := <span class="droplink">Initial_No_of_Elements<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:24:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l24" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l72"><pre>                                     <span class="droplink">Centre<ul><li><a href="swarm_control.ads.html#swarm_control.ads:31:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l31" title="To spec">To spec</a></li></ul></span>               : Positions := <span class="droplink">Initial_Swarm_Position<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:25:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l25" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l73"><pre>                                     <span class="droplink">Volume_Edge_Length<ul><li><a href="swarm_control.ads.html#swarm_control.ads:32:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l32" title="To spec">To spec</a></li></ul></span>   : <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>      := <span class="droplink">Initual_Edge_Length<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:26:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l26" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l74"><pre> </pre></li>
<li id="l75"><pre>         Random_Float : Generator; </pre></li>
<li id="l76"><pre> </pre></li>
<li id="l77"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l78"><pre>         Reset (<a href="src_swarm_control.adb.html#l75" title="defined at swarm_control.adb:75:10">Random_Float</a>); </pre></li>
<li id="l79"><pre>         Reserve_Capacity (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) + Count_Type (<span class="droplink">No_Of_Swarm_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:30:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l30" title="To spec">To spec</a></li></ul></span>)); </pre></li>
<li id="l80"><pre>         <span class="keyword">for</span> i <span class="keyword">in</span> 1 .. <span class="droplink">No_Of_Swarm_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:30:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l30" title="To spec">To spec</a></li></ul></span> <span class="keyword">loop</span> </pre></li>
<li id="l81"><pre>            <span class="keyword">select</span> </pre></li>
<li id="l82"><pre>               <span class="keyword">pragma</span> Warnings (Off, <span class="string">&quot;potentially blocking operation in protected operation&quot;</span>); </pre></li>
<li id="l83"><pre>               <span class="keyword">delay</span> <span class="droplink">Tolerated_Vehicle_Activation_Delay<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:71:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l71" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l84"><pre>               <span class="keyword">pragma</span> Warnings (On,  <span class="string">&quot;potentially blocking operation in protected operation&quot;</span>); </pre></li>
<li id="l85"><pre>               <span class="keyword">raise</span> <span class="droplink">Vehicle_could_not_be_created<ul><li><a href="swarm_control.ads.html#swarm_control.ads:48:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l48" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l86"><pre>            <span class="keyword">then</span> <span class="keyword">abort</span> </pre></li>
<li id="l87"><pre>               <span class="keyword">declare</span> </pre></li>
<li id="l88"><pre>                  New_Element : <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := </pre></li>
<li id="l89"><pre>                    (Position      =&gt; <span class="droplink">Protected_Point_3D.Allocate<ul><li><a href="generic_protected.ads.html#generic_protected.ads:30:13" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l30" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l27" title="To body">To body</a></li></ul></span> </pre></li>
<li id="l90"><pre>                       ((<span class="droplink">Centre<ul><li><a href="swarm_control.ads.html#swarm_control.ads:31:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l31" title="To spec">To spec</a></li></ul></span> (x) + (<span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (Random (<a href="src_swarm_control.adb.html#l75" title="defined at swarm_control.adb:75:10">Random_Float</a>)) * <span class="droplink">Volume_Edge_Length<ul><li><a href="swarm_control.ads.html#swarm_control.ads:32:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l32" title="To spec">To spec</a></li></ul></span>) - <span class="droplink">Volume_Edge_Length<ul><li><a href="swarm_control.ads.html#swarm_control.ads:32:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l32" title="To spec">To spec</a></li></ul></span> / 2.0, </pre></li>
<li id="l91"><pre>                         <span class="droplink">Centre<ul><li><a href="swarm_control.ads.html#swarm_control.ads:31:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l31" title="To spec">To spec</a></li></ul></span> (y) + (<span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (Random (<a href="src_swarm_control.adb.html#l75" title="defined at swarm_control.adb:75:10">Random_Float</a>)) * <span class="droplink">Volume_Edge_Length<ul><li><a href="swarm_control.ads.html#swarm_control.ads:32:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l32" title="To spec">To spec</a></li></ul></span>) - <span class="droplink">Volume_Edge_Length<ul><li><a href="swarm_control.ads.html#swarm_control.ads:32:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l32" title="To spec">To spec</a></li></ul></span> / 2.0, </pre></li>
<li id="l92"><pre>                         <span class="droplink">Centre<ul><li><a href="swarm_control.ads.html#swarm_control.ads:31:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l31" title="To spec">To spec</a></li></ul></span> (z) + (<span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (Random (<a href="src_swarm_control.adb.html#l75" title="defined at swarm_control.adb:75:10">Random_Float</a>)) * <span class="droplink">Volume_Edge_Length<ul><li><a href="swarm_control.ads.html#swarm_control.ads:32:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l32" title="To spec">To spec</a></li></ul></span>) - <span class="droplink">Volume_Edge_Length<ul><li><a href="swarm_control.ads.html#swarm_control.ads:32:38" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l32" title="To spec">To spec</a></li></ul></span> / 2.0)), </pre></li>
<li id="l93"><pre>                     Rotation      =&gt; <span class="droplink">Protected_Rotation.Allocate<ul><li><a href="generic_protected.ads.html#generic_protected.ads:30:13" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l30" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l27" title="To body">To body</a></li></ul></span> (<span class="droplink">Zero_Rotation<ul><li><a href="rotations.ads.html#rotations.ads:41:13" title="To API doc">To API doc</a></li><li><a href="src_rotations.ads.html#l41" title="To spec">To spec</a></li><li><a href="src_rotations.adb.html#l19" title="To body">To body</a></li></ul></span>), </pre></li>
<li id="l94"><pre>                     Velocity      =&gt; <span class="droplink">Protected_Vector_3D.Allocate<ul><li><a href="generic_protected.ads.html#generic_protected.ads:30:13" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l30" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l27" title="To body">To body</a></li></ul></span> (<span class="droplink">Zero_Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:16:4" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l16" title="To spec">To spec</a></li></ul></span>), </pre></li>
<li id="l95"><pre>                     Acceleration  =&gt; <span class="droplink">Protected_Vector_3D.Allocate<ul><li><a href="generic_protected.ads.html#generic_protected.ads:30:13" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l30" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l27" title="To body">To body</a></li></ul></span> (<span class="droplink">Zero_Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:16:4" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l16" title="To spec">To spec</a></li></ul></span>), </pre></li>
<li id="l96"><pre>                     Charge        =&gt; (Level =&gt; <span class="droplink">Full_Charge<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:29:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l29" title="To spec">To spec</a></li></ul></span>, Charge_Time =&gt; <span class="droplink">Protected_Time.Allocate<ul><li><a href="generic_protected.ads.html#generic_protected.ads:30:13" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l30" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l27" title="To body">To body</a></li></ul></span> (Clock), Charge_No =&gt; 0, Globes_Touched =&gt; <span class="droplink">No_Globes_Touched<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:75:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l75" title="To spec">To spec</a></li></ul></span>), </pre></li>
<li id="l97"><pre>                     Neighbours    =&gt; <span class="keyword">new</span> Distance_Vectors.Vector, </pre></li>
<li id="l98"><pre>                     Controls      =&gt; <span class="keyword">new</span> <span class="droplink">Vehicle_Controls<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:63:19" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l63" title="To spec">To spec</a></li></ul></span>, </pre></li>
<li id="l99"><pre>                     Comms         =&gt; <span class="keyword">new</span> <span class="droplink">Vehicle_Comms<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:51:19" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l51" title="To spec">To spec</a></li></ul></span>, </pre></li>
<li id="l100"><pre>                     Process       =&gt; <span class="keyword">new</span> <span class="droplink">Vehicle_Task<ul><li><a href="vehicle_task_type.ads.html#vehicle_task_type.ads:5:14" title="To API doc">To API doc</a></li><li><a href="src_vehicle_task_type.ads.html#l5" title="To spec">To spec</a></li><li><a href="src_vehicle_task_type.adb.html#l17" title="To body">To body</a></li></ul></span>, </pre></li>
<li id="l101"><pre>                     Process_abort =&gt; <span class="keyword">new</span> <span class="droplink">Barrier<ul><li><a href="barrier_type.ads.html#barrier_type.ads:9:19" title="To API doc">To API doc</a></li><li><a href="src_barrier_type.ads.html#l9" title="To spec">To spec</a></li></ul></span>, </pre></li>
<li id="l102"><pre>                     Process_Id    =&gt; Null_Task_Id, </pre></li>
<li id="l103"><pre>                     Vehicle_Id    =&gt; Natural&apos;Succ (<span class="droplink">Last_Vehicle_Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:44:7" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l44" title="To spec">To spec</a></li></ul></span>), </pre></li>
<li id="l104"><pre>                     Last_Update   =&gt; Clock); </pre></li>
<li id="l105"><pre>               <span class="keyword">begin</span> </pre></li>
<li id="l106"><pre>                  <span class="droplink">Last_Vehicle_Id<ul><li><a href="swarm_control.ads.html#swarm_control.ads:44:7" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l44" title="To spec">To spec</a></li></ul></span> := New_Element.Vehicle_Id; </pre></li>
<li id="l107"><pre>                  <span class="keyword">pragma</span> Warnings (Off, <span class="string">&quot;potentially blocking operation in protected operation&quot;</span>); </pre></li>
<li id="l108"><pre>                  <span class="comment">-- Freshly created vehicle tasks need to respond to this call.</span> </pre></li>
<li id="l109"><pre>                  <span class="keyword">select</span> </pre></li>
<li id="l110"><pre>                     New_Element.Process.<span class="keyword">all</span>.<span class="droplink">Identify<ul><li><a href="vehicle_task_type.ads.html#vehicle_task_type.ads:6:13" title="To API doc">To API doc</a></li><li><a href="src_vehicle_task_type.ads.html#l6" title="To spec">To spec</a></li><li><a href="src_vehicle_task_type.adb.html#l28" title="To body">To body</a></li></ul></span> (New_Element.Vehicle_Id, New_Element.Process_Id); </pre></li>
<li id="l111"><pre>                  <span class="keyword">or</span> <span class="keyword">delay</span> <span class="droplink">Tolerated_Identify_Call_Delay<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:72:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l72" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l112"><pre>                     <span class="keyword">raise</span> <span class="droplink">Task_did_not_repond_to_Identfiy_Call<ul><li><a href="swarm_control.ads.html#swarm_control.ads:49:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l49" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l113"><pre>                  <span class="keyword">end</span> <span class="keyword">select</span>; </pre></li>
<li id="l114"><pre>                  <span class="keyword">pragma</span> Warnings (On,  <span class="string">&quot;potentially blocking operation in protected operation&quot;</span>); </pre></li>
<li id="l115"><pre>                  Append (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, New_Element); </pre></li>
<li id="l116"><pre>               <span class="keyword">end</span>; </pre></li>
<li id="l117"><pre>            <span class="keyword">end</span> <span class="keyword">select</span>; </pre></li>
<li id="l118"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l119"><pre>      <span class="keyword">end</span> <span class="droplink">Append_Random_Swarm<ul><li><a href="swarm_control.ads.html#swarm_control.ads:30:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l30" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l71" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l120"><pre> </pre></li>
<li id="l121"><pre>      <span class="comment">--</span> </pre></li>
<li id="l122"><pre>      <span class="comment">--</span> </pre></li>
<li id="l123"><pre>      <span class="comment">--</span> </pre></li>
<li id="l124"><pre> </pre></li>
<li id="l125"><pre>      <span class="keyword">procedure</span> <span class="droplink">Remove_Vehicle<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Element_Ix<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:33" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l126"><pre> </pre></li>
<li id="l127"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l128"><pre>         <span class="keyword">if</span> Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) &gt; 1 <span class="keyword">and</span> <span class="keyword">then</span> <span class="droplink">Element_Ix<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:33" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li></ul></span> &gt;= First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">and</span> <span class="keyword">then</span> <span class="droplink">Element_Ix<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:33" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li></ul></span> &lt;= Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">then</span> </pre></li>
<li id="l129"><pre>            <span class="keyword">declare</span> </pre></li>
<li id="l130"><pre>               This_Element : <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Ix<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:33" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l131"><pre>            <span class="keyword">begin</span> </pre></li>
<li id="l132"><pre>               <span class="droplink">Free_Process<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:115:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l115" title="To spec">To spec</a></li></ul></span>             (This_Element.Process); </pre></li>
<li id="l133"><pre>               <span class="droplink">Free<ul><li><a href="barrier_type.ads.html#barrier_type.ads:22:14" title="To API doc">To API doc</a></li><li><a href="src_barrier_type.ads.html#l22" title="To spec">To spec</a></li></ul></span>                     (This_Element.Process_abort); </pre></li>
<li id="l134"><pre>               <span class="droplink">Free_Neighbours<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:112:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l112" title="To spec">To spec</a></li></ul></span>          (This_Element.Neighbours); </pre></li>
<li id="l135"><pre>               <span class="droplink">Free_Comms<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:114:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l114" title="To spec">To spec</a></li></ul></span>               (This_Element.Comms); </pre></li>
<li id="l136"><pre>               <span class="droplink">Free_Controls<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:113:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l113" title="To spec">To spec</a></li></ul></span>            (This_Element.Controls); </pre></li>
<li id="l137"><pre>               <span class="droplink">Protected_Time.Free<ul><li><a href="generic_protected.ads.html#generic_protected.ads:32:14" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l32" title="To spec">To spec</a></li></ul></span>      (This_Element.Charge.Charge_Time); </pre></li>
<li id="l138"><pre>               <span class="droplink">Protected_Point_3D.Free<ul><li><a href="generic_protected.ads.html#generic_protected.ads:32:14" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l32" title="To spec">To spec</a></li></ul></span>  (This_Element.Position); </pre></li>
<li id="l139"><pre>               <span class="droplink">Protected_Rotation.Free<ul><li><a href="generic_protected.ads.html#generic_protected.ads:32:14" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l32" title="To spec">To spec</a></li></ul></span>  (This_Element.Rotation); </pre></li>
<li id="l140"><pre>               <span class="droplink">Protected_Vector_3D.Free<ul><li><a href="generic_protected.ads.html#generic_protected.ads:32:14" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l32" title="To spec">To spec</a></li></ul></span> (This_Element.Velocity); </pre></li>
<li id="l141"><pre>               <span class="droplink">Protected_Vector_3D.Free<ul><li><a href="generic_protected.ads.html#generic_protected.ads:32:14" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l32" title="To spec">To spec</a></li></ul></span> (This_Element.Acceleration); </pre></li>
<li id="l142"><pre>               Delete (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Ix<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:33" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l143"><pre>            <span class="keyword">end</span>; </pre></li>
<li id="l144"><pre>         <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l145"><pre>      <span class="keyword">end</span> <span class="droplink">Remove_Vehicle<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l125" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l146"><pre> </pre></li>
<li id="l147"><pre>      <span class="comment">--</span> </pre></li>
<li id="l148"><pre>      <span class="comment">--</span> </pre></li>
<li id="l149"><pre>      <span class="comment">--</span> </pre></li>
<li id="l150"><pre> </pre></li>
<li id="l151"><pre>      <span class="keyword">function</span> <span class="droplink">Centre_Of_Gravity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:36:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l36" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l152"><pre> </pre></li>
<li id="l153"><pre>         Acc_Positions : <span class="droplink">Vector_3D_LF<ul><li><a href="vectors_3d_lf.ads.html#vectors_3d_lf.ads:13:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d_lf.ads.html#l13" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Zero_Vector_3D_LF<ul><li><a href="vectors_3d_lf.ads.html#vectors_3d_lf.ads:15:4" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d_lf.ads.html#l15" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l154"><pre> </pre></li>
<li id="l155"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l156"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l157"><pre>            <a href="src_swarm_control.adb.html#l153" title="defined at swarm_control.adb:153:10">Acc_Positions</a> := <a href="src_swarm_control.adb.html#l153" title="defined at swarm_control.adb:153:10">Acc_Positions</a> + <span class="droplink">To_Vector_3D_LF<ul><li><a href="vectors_conversions.ads.html#vectors_conversions.ads:11:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_conversions.ads.html#l11" title="To spec">To spec</a></li><li><a href="src_vectors_conversions.adb.html#l18" title="To body">To body</a></li></ul></span> (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l158"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l159"><pre>         <span class="keyword">return</span> <span class="droplink">To_Vector_3D<ul><li><a href="vectors_conversions.ads.html#vectors_conversions.ads:10:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_conversions.ads.html#l10" title="To spec">To spec</a></li><li><a href="src_vectors_conversions.adb.html#l9" title="To body">To body</a></li></ul></span> ((1.0 / Long_Float (Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>))) * <a href="src_swarm_control.adb.html#l153" title="defined at swarm_control.adb:153:10">Acc_Positions</a>); </pre></li>
<li id="l160"><pre>      <span class="keyword">end</span> <span class="droplink">Centre_Of_Gravity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:36:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l36" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l151" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l161"><pre> </pre></li>
<li id="l162"><pre>      <span class="comment">--</span> </pre></li>
<li id="l163"><pre>      <span class="comment">--</span> </pre></li>
<li id="l164"><pre>      <span class="comment">--</span> </pre></li>
<li id="l165"><pre> </pre></li>
<li id="l166"><pre>      <span class="keyword">function</span> <span class="droplink">Mean_Velocity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:37:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l37" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l167"><pre> </pre></li>
<li id="l168"><pre>         Acc_Velocity : <span class="droplink">Vector_3D_LF<ul><li><a href="vectors_3d_lf.ads.html#vectors_3d_lf.ads:13:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d_lf.ads.html#l13" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Zero_Vector_3D_LF<ul><li><a href="vectors_3d_lf.ads.html#vectors_3d_lf.ads:15:4" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d_lf.ads.html#l15" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l169"><pre> </pre></li>
<li id="l170"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l171"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l172"><pre>            <a href="src_swarm_control.adb.html#l168" title="defined at swarm_control.adb:168:10">Acc_Velocity</a> := <a href="src_swarm_control.adb.html#l168" title="defined at swarm_control.adb:168:10">Acc_Velocity</a> + <span class="droplink">To_Vector_3D_LF<ul><li><a href="vectors_conversions.ads.html#vectors_conversions.ads:11:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_conversions.ads.html#l11" title="To spec">To spec</a></li><li><a href="src_vectors_conversions.adb.html#l18" title="To body">To body</a></li></ul></span> (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l173"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l174"><pre>         <span class="keyword">return</span> <span class="droplink">To_Vector_3D<ul><li><a href="vectors_conversions.ads.html#vectors_conversions.ads:10:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_conversions.ads.html#l10" title="To spec">To spec</a></li><li><a href="src_vectors_conversions.adb.html#l9" title="To body">To body</a></li></ul></span> ((1.0 / Long_Float (Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>))) * <a href="src_swarm_control.adb.html#l168" title="defined at swarm_control.adb:168:10">Acc_Velocity</a>); </pre></li>
<li id="l175"><pre>      <span class="keyword">end</span> <span class="droplink">Mean_Velocity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:37:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l37" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l166" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l176"><pre> </pre></li>
<li id="l177"><pre>      <span class="comment">--</span> </pre></li>
<li id="l178"><pre>      <span class="comment">--</span> </pre></li>
<li id="l179"><pre>      <span class="comment">--</span> </pre></li>
<li id="l180"><pre> </pre></li>
<li id="l181"><pre>      <span class="keyword">function</span> <span class="droplink">Mean_Velocity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:38:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l38" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l182"><pre> </pre></li>
<li id="l183"><pre>         Acc_Velocity : <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := 0.0; </pre></li>
<li id="l184"><pre> </pre></li>
<li id="l185"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l186"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l187"><pre>            <a href="src_swarm_control.adb.html#l183" title="defined at swarm_control.adb:183:10">Acc_Velocity</a> := <a href="src_swarm_control.adb.html#l183" title="defined at swarm_control.adb:183:10">Acc_Velocity</a> + <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (<span class="keyword">abs</span> (<span class="droplink">To_Vector_3D_LF<ul><li><a href="vectors_conversions.ads.html#vectors_conversions.ads:11:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_conversions.ads.html#l11" title="To spec">To spec</a></li><li><a href="src_vectors_conversions.adb.html#l18" title="To body">To body</a></li></ul></span> (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>))); </pre></li>
<li id="l188"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l189"><pre>         <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (<a href="src_swarm_control.adb.html#l183" title="defined at swarm_control.adb:183:10">Acc_Velocity</a> / <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>))); </pre></li>
<li id="l190"><pre>      <span class="keyword">end</span> <span class="droplink">Mean_Velocity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:38:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l38" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l181" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l191"><pre> </pre></li>
<li id="l192"><pre>      <span class="comment">--</span> </pre></li>
<li id="l193"><pre>      <span class="comment">--</span> </pre></li>
<li id="l194"><pre>      <span class="comment">--</span> </pre></li>
<li id="l195"><pre> </pre></li>
<li id="l196"><pre>      <span class="keyword">function</span> <span class="droplink">Maximal_Radius<ul><li><a href="swarm_control.ads.html#swarm_control.ads:39:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l39" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l197"><pre> </pre></li>
<li id="l198"><pre>         CoG    : <span class="keyword">constant</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Centre_Of_Gravity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:36:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l36" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l151" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l199"><pre> </pre></li>
<li id="l200"><pre>         Radius : <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := 0.0; </pre></li>
<li id="l201"><pre> </pre></li>
<li id="l202"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l203"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l204"><pre>            <span class="keyword">declare</span> </pre></li>
<li id="l205"><pre>               Distance_from_CoG : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := <span class="keyword">abs</span> (<a href="src_swarm_control.adb.html#l198" title="defined at swarm_control.adb:198:10">CoG</a> - Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l206"><pre>            <span class="keyword">begin</span> </pre></li>
<li id="l207"><pre>               <a href="src_swarm_control.adb.html#l200" title="defined at swarm_control.adb:200:10">Radius</a> := <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>&apos;Max (<a href="src_swarm_control.adb.html#l200" title="defined at swarm_control.adb:200:10">Radius</a>, Distance_from_CoG); </pre></li>
<li id="l208"><pre>            <span class="keyword">end</span>; </pre></li>
<li id="l209"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l210"><pre>         <span class="keyword">return</span> <a href="src_swarm_control.adb.html#l200" title="defined at swarm_control.adb:200:10">Radius</a>; </pre></li>
<li id="l211"><pre>      <span class="keyword">end</span> <span class="droplink">Maximal_Radius<ul><li><a href="swarm_control.ads.html#swarm_control.ads:39:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l39" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l196" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l212"><pre> </pre></li>
<li id="l213"><pre>      <span class="comment">--</span> </pre></li>
<li id="l214"><pre>      <span class="comment">--</span> </pre></li>
<li id="l215"><pre>      <span class="comment">--</span> </pre></li>
<li id="l216"><pre> </pre></li>
<li id="l217"><pre>      <span class="keyword">function</span> <span class="droplink">Mean_Radius<ul><li><a href="swarm_control.ads.html#swarm_control.ads:40:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l40" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l218"><pre> </pre></li>
<li id="l219"><pre>         CoG : <span class="keyword">constant</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Centre_Of_Gravity<ul><li><a href="swarm_control.ads.html#swarm_control.ads:36:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l36" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l151" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l220"><pre> </pre></li>
<li id="l221"><pre>         Acc_Radius : <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := 0.0; </pre></li>
<li id="l222"><pre> </pre></li>
<li id="l223"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l224"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l225"><pre>            <span class="keyword">declare</span> </pre></li>
<li id="l226"><pre>               Distance_from_CoG : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := <span class="keyword">abs</span> (<a href="src_swarm_control.adb.html#l219" title="defined at swarm_control.adb:219:10">CoG</a> - Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l227"><pre>            <span class="keyword">begin</span> </pre></li>
<li id="l228"><pre>               <a href="src_swarm_control.adb.html#l221" title="defined at swarm_control.adb:221:10">Acc_Radius</a> := <a href="src_swarm_control.adb.html#l221" title="defined at swarm_control.adb:221:10">Acc_Radius</a> + Distance_from_CoG; </pre></li>
<li id="l229"><pre>            <span class="keyword">end</span>; </pre></li>
<li id="l230"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l231"><pre>         <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (<a href="src_swarm_control.adb.html#l221" title="defined at swarm_control.adb:221:10">Acc_Radius</a> / <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>))); </pre></li>
<li id="l232"><pre>      <span class="keyword">end</span> <span class="droplink">Mean_Radius<ul><li><a href="swarm_control.ads.html#swarm_control.ads:40:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l40" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l217" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l233"><pre> </pre></li>
<li id="l234"><pre>      <span class="comment">--</span> </pre></li>
<li id="l235"><pre>      <span class="comment">--</span> </pre></li>
<li id="l236"><pre>      <span class="comment">--</span> </pre></li>
<li id="l237"><pre> </pre></li>
<li id="l238"><pre>      <span class="keyword">function</span> <span class="droplink">Mean_Closest_Distance<ul><li><a href="swarm_control.ads.html#swarm_control.ads:41:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l41" title="To spec">To spec</a></li></ul></span> <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l239"><pre> </pre></li>
<li id="l240"><pre>         Acc_Distance : <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := 0.0; </pre></li>
<li id="l241"><pre> </pre></li>
<li id="l242"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l243"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l244"><pre>            <span class="keyword">declare</span> </pre></li>
<li id="l245"><pre>               This_Element     : <span class="keyword">constant</span> <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span>     := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index); </pre></li>
<li id="l246"><pre>               Neighbours       : <span class="keyword">constant</span> Distance_Vectors.Vector := This_Element.Neighbours.<span class="keyword">all</span>; </pre></li>
<li id="l247"><pre>            <span class="keyword">begin</span> </pre></li>
<li id="l248"><pre>               <span class="keyword">if</span> Distance_Vectors.Length (Neighbours) &gt; 0 <span class="keyword">then</span> </pre></li>
<li id="l249"><pre>                  <span class="keyword">declare</span> </pre></li>
<li id="l250"><pre>                     Closest_Distance : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>                    := </pre></li>
<li id="l251"><pre>                       Distance_Vectors.Element (Neighbours, Distance_Vectors.First_Index (Neighbours)).Distance; </pre></li>
<li id="l252"><pre>                  <span class="keyword">begin</span> </pre></li>
<li id="l253"><pre>                     <a href="src_swarm_control.adb.html#l240" title="defined at swarm_control.adb:240:10">Acc_Distance</a> := <a href="src_swarm_control.adb.html#l240" title="defined at swarm_control.adb:240:10">Acc_Distance</a> + Closest_Distance; </pre></li>
<li id="l254"><pre>                  <span class="keyword">end</span>; </pre></li>
<li id="l255"><pre>               <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l256"><pre>            <span class="keyword">end</span>; </pre></li>
<li id="l257"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l258"><pre>         <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (<a href="src_swarm_control.adb.html#l240" title="defined at swarm_control.adb:240:10">Acc_Distance</a> / <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>))); </pre></li>
<li id="l259"><pre>      <span class="keyword">end</span> <span class="droplink">Mean_Closest_Distance<ul><li><a href="swarm_control.ads.html#swarm_control.ads:41:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l41" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l238" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l260"><pre> </pre></li>
<li id="l261"><pre>      <span class="comment">--</span> </pre></li>
<li id="l262"><pre> </pre></li>
<li id="l263"><pre>   <span class="keyword">end</span> <span class="droplink">Swarm_Monitor<ul><li><a href="swarm_control.ads.html#swarm_control.ads:17:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l17" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l264"><pre> </pre></li>
<li id="l265"><pre>   <span class="comment">--</span> </pre></li>
<li id="l266"><pre>   <span class="comment">--</span> </pre></li>
<li id="l267"><pre>   <span class="comment">--</span> </pre></li>
<li id="l268"><pre> </pre></li>
<li id="l269"><pre>   <span class="keyword">procedure</span> Remove_Vehicle_in_Stages (Element_Ix : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l270"><pre> </pre></li>
<li id="l271"><pre>      Tolerated_Termination_Time : <span class="keyword">constant</span> Duration := To_Duration (Milliseconds (100)); </pre></li>
<li id="l272"><pre> </pre></li>
<li id="l273"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l274"><pre>      Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l269" title="defined at swarm_control.adb:269:40">Element_Ix</a>).Process_abort.<span class="keyword">all</span>.<span class="droplink">Open<ul><li><a href="barrier_type.ads.html#barrier_type.ads:12:17" title="To API doc">To API doc</a></li><li><a href="src_barrier_type.ads.html#l12" title="To spec">To spec</a></li><li><a href="src_barrier_type.adb.html#l23" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l275"><pre>      <span class="keyword">select</span> </pre></li>
<li id="l276"><pre>         <span class="keyword">delay</span> <a href="src_swarm_control.adb.html#l271" title="defined at swarm_control.adb:271:7">Tolerated_Termination_Time</a>; </pre></li>
<li id="l277"><pre>         Put_Line (Current_Error, <span class="string">&quot;Warning: Vehicle task termination request ignored - attempting task abort now&quot;</span>); </pre></li>
<li id="l278"><pre>         <span class="keyword">select</span> </pre></li>
<li id="l279"><pre>            <span class="keyword">delay</span> <a href="src_swarm_control.adb.html#l271" title="defined at swarm_control.adb:271:7">Tolerated_Termination_Time</a>; </pre></li>
<li id="l280"><pre>            Put_Line (Current_Error, <span class="string">&quot;Error: Vehicle task stuck in non-abortable code region - task abort failed&quot;</span>); </pre></li>
<li id="l281"><pre>         <span class="keyword">then</span> <span class="keyword">abort</span> </pre></li>
<li id="l282"><pre>            Abort_Task (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l269" title="defined at swarm_control.adb:269:40">Element_Ix</a>).Process_Id); </pre></li>
<li id="l283"><pre>            <span class="keyword">loop</span> </pre></li>
<li id="l284"><pre>               <span class="keyword">exit</span> <span class="keyword">when</span> Is_Terminated (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l269" title="defined at swarm_control.adb:269:40">Element_Ix</a>).Process_Id); </pre></li>
<li id="l285"><pre>               <span class="keyword">delay</span> 0.0; </pre></li>
<li id="l286"><pre>            <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l287"><pre>         <span class="keyword">end</span> <span class="keyword">select</span>; </pre></li>
<li id="l288"><pre>      <span class="keyword">then</span> <span class="keyword">abort</span> </pre></li>
<li id="l289"><pre>         <span class="keyword">loop</span> </pre></li>
<li id="l290"><pre>            <span class="keyword">exit</span> <span class="keyword">when</span> Is_Terminated (Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l269" title="defined at swarm_control.adb:269:40">Element_Ix</a>).Process_Id); </pre></li>
<li id="l291"><pre>            <span class="keyword">delay</span> 0.0; </pre></li>
<li id="l292"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l293"><pre>      <span class="keyword">end</span> <span class="keyword">select</span>; </pre></li>
<li id="l294"><pre>      <span class="droplink">Swarm_Monitor.Remove_Vehicle<ul><li><a href="swarm_control.ads.html#swarm_control.ads:34:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l34" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l125" title="To body">To body</a></li></ul></span> (<a href="src_swarm_control.adb.html#l269" title="defined at swarm_control.adb:269:40">Element_Ix</a>); </pre></li>
<li id="l295"><pre>   <span class="keyword">end</span> <span class="droplink">Remove_Vehicle_in_Stages<ul><li><a href="src_swarm_control.adb.html#l269" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l269" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l296"><pre> </pre></li>
<li id="l297"><pre>   <span class="keyword">procedure</span> <span class="droplink">Remove_Vehicles<ul><li><a href="swarm_control.ads.html#swarm_control.ads:52:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l52" title="To spec">To spec</a></li></ul></span> (<span class="droplink">No_Of_Swarm_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:52:31" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l52" title="To spec">To spec</a></li></ul></span> : Positive  := 1) <span class="keyword">is</span> </pre></li>
<li id="l298"><pre> </pre></li>
<li id="l299"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l300"><pre>      <span class="keyword">if</span> Natural (Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>)) &gt;= <span class="droplink">No_Of_Swarm_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:52:31" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l52" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l301"><pre>         <span class="keyword">for</span> Element_Index <span class="keyword">in</span> Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) - <span class="droplink">No_Of_Swarm_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:52:31" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l52" title="To spec">To spec</a></li></ul></span> + 1 .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l302"><pre>            <span class="droplink">Remove_Vehicle_in_Stages<ul><li><a href="src_swarm_control.adb.html#l269" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l269" title="To body">To body</a></li></ul></span> (Element_Index); </pre></li>
<li id="l303"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l304"><pre>      <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l305"><pre>   <span class="keyword">end</span> <span class="droplink">Remove_Vehicles<ul><li><a href="swarm_control.ads.html#swarm_control.ads:52:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l52" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l297" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l306"><pre> </pre></li>
<li id="l307"><pre>   <span class="comment">--</span> </pre></li>
<li id="l308"><pre>   <span class="comment">--</span> </pre></li>
<li id="l309"><pre>   <span class="comment">--</span> </pre></li>
<li id="l310"><pre> </pre></li>
<li id="l311"><pre>   <span class="keyword">procedure</span> Sorted_Close_Distances (Close_Dist    : <span class="keyword">in</span> <span class="keyword">out</span> Distance_Vectors.Vector; </pre></li>
<li id="l312"><pre>                                     Element_Index : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l313"><pre>                                     Max_Distance  : <span class="droplink">Distances<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:12:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l12" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l314"><pre> </pre></li>
<li id="l315"><pre>      This_Element  : <span class="keyword">constant</span> <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l312" title="defined at swarm_control.adb:312:38">Element_Index</a>); </pre></li>
<li id="l316"><pre>      This_Position : <span class="keyword">constant</span> Positions           := This_Element.Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l317"><pre> </pre></li>
<li id="l318"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l319"><pre>      Distance_Vectors.Clear (<a href="src_swarm_control.adb.html#l311" title="defined at swarm_control.adb:311:38">Close_Dist</a>); </pre></li>
<li id="l320"><pre>      Distance_Vectors.Reserve_Capacity (<a href="src_swarm_control.adb.html#l311" title="defined at swarm_control.adb:311:38">Close_Dist</a>, Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) - 1); </pre></li>
<li id="l321"><pre>      <span class="keyword">for</span> Scan_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l322"><pre>         <span class="keyword">if</span> <a href="src_swarm_control.adb.html#l312" title="defined at swarm_control.adb:312:38">Element_Index</a> /= Scan_Index <span class="keyword">then</span> </pre></li>
<li id="l323"><pre>            <span class="keyword">declare</span> </pre></li>
<li id="l324"><pre>               Test_Element   : <span class="keyword">constant</span> <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Scan_Index); </pre></li>
<li id="l325"><pre>               Test_Position  : <span class="keyword">constant</span> Positions           := Test_Element.Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l326"><pre>               Test_Direction : <span class="keyword">constant</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span>           := <a href="src_swarm_control.adb.html#l316" title="defined at swarm_control.adb:316:7">This_Position</a> - Test_Position; </pre></li>
<li id="l327"><pre>               Test_Distance  : <span class="keyword">constant</span> <span class="droplink">Distances<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:12:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l12" title="To spec">To spec</a></li></ul></span>           := <span class="keyword">abs</span> (Test_Direction); </pre></li>
<li id="l328"><pre>            <span class="keyword">begin</span> </pre></li>
<li id="l329"><pre>               <span class="keyword">if</span> Test_Distance &lt;= <a href="src_swarm_control.adb.html#l313" title="defined at swarm_control.adb:313:38">Max_Distance</a> <span class="keyword">then</span> </pre></li>
<li id="l330"><pre>                  Distance_Vectors.Append (<a href="src_swarm_control.adb.html#l311" title="defined at swarm_control.adb:311:38">Close_Dist</a>, (Index         =&gt; Scan_Index, </pre></li>
<li id="l331"><pre>                                                        Distance      =&gt; Test_Distance, </pre></li>
<li id="l332"><pre>                                                        Position_Diff =&gt; Test_Direction, </pre></li>
<li id="l333"><pre>                                                        Velocity_Diff =&gt; This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span> - Test_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>)); </pre></li>
<li id="l334"><pre>               <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l335"><pre>            <span class="keyword">end</span>; </pre></li>
<li id="l336"><pre>         <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l337"><pre>      <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l338"><pre>      Sort_Distances.Sort (<a href="src_swarm_control.adb.html#l311" title="defined at swarm_control.adb:311:38">Close_Dist</a>); </pre></li>
<li id="l339"><pre>   <span class="keyword">end</span> <span class="droplink">Sorted_Close_Distances<ul><li><a href="src_swarm_control.adb.html#l311" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l311" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l340"><pre> </pre></li>
<li id="l341"><pre>   <span class="comment">--</span> </pre></li>
<li id="l342"><pre>   <span class="comment">--</span> </pre></li>
<li id="l343"><pre>   <span class="comment">--</span> </pre></li>
<li id="l344"><pre> </pre></li>
<li id="l345"><pre>   <span class="keyword">procedure</span> <span class="droplink">Set_Acceleration<ul><li><a href="swarm_control.ads.html#swarm_control.ads:54:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l54" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:54:32" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l54" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l346"><pre> </pre></li>
<li id="l347"><pre>      This_Element  : <span class="keyword">constant</span> <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:54:32" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l54" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l348"><pre>      Acceleration  :          <span class="droplink">Accelerations<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:17:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l17" title="To spec">To spec</a></li></ul></span>       := <span class="droplink">Zero_Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:16:4" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l16" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l349"><pre> </pre></li>
<li id="l350"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l351"><pre>      <span class="droplink">Sorted_Close_Distances<ul><li><a href="src_swarm_control.adb.html#l311" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l311" title="To body">To body</a></li></ul></span> (This_Element.Neighbours.<span class="keyword">all</span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:54:32" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l54" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Detection_Range<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:44:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l44" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l352"><pre>      <span class="keyword">for</span> Distance_Index <span class="keyword">in</span> Distance_Vectors.First_Index (This_Element.Neighbours.<span class="keyword">all</span>) .. Distance_Vectors.Last_Index (This_Element.Neighbours.<span class="keyword">all</span>) <span class="keyword">loop</span> </pre></li>
<li id="l353"><pre>         <span class="keyword">declare</span> </pre></li>
<li id="l354"><pre>            Distance_Entry : <span class="keyword">constant</span> <span class="droplink">Distance_Entries<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:26:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l26" title="To spec">To spec</a></li></ul></span> := Distance_Vectors.Element (This_Element.Neighbours.<span class="keyword">all</span>, Distance_Index); </pre></li>
<li id="l355"><pre>         <span class="keyword">begin</span> </pre></li>
<li id="l356"><pre> </pre></li>
<li id="l357"><pre>            <span class="comment">-- Uncontrolled vehicles</span> </pre></li>
<li id="l358"><pre>            <span class="keyword">if</span> This_Element.Controls.<span class="keyword">all</span>.<span class="droplink">Read_Throttle<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:67:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l67" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l73" title="To body">To body</a></li></ul></span> = 0.0 <span class="keyword">then</span> </pre></li>
<li id="l359"><pre> </pre></li>
<li id="l360"><pre>               <span class="comment">-- Attraction and repulsion forces between vehicles</span> </pre></li>
<li id="l361"><pre>               <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> := <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> + <span class="droplink">Inter_Swarm_Acceleration<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:76:13" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l76" title="To spec">To spec</a></li><li><a href="src_swarm_configuration.adb.html#l34" title="To body">To body</a></li></ul></span> (Distance_Entry.Distance) * <span class="droplink">Norm<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:20:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l20" title="To spec">To spec</a></li></ul></span> (Distance_Entry.Position_Diff); </pre></li>
<li id="l362"><pre> </pre></li>
<li id="l363"><pre>               <span class="comment">-- Alignment forces</span> </pre></li>
<li id="l364"><pre>               <span class="keyword">if</span> Distance_Entry.Distance &lt;= <span class="droplink">Velocity_Matching_Range<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:47:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l47" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l365"><pre>                  <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> := <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> + <span class="droplink">Velocity_Matching<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:82:13" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l82" title="To spec">To spec</a></li><li><a href="src_swarm_configuration.adb.html#l59" title="To body">To body</a></li></ul></span> (This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>, Distance_Entry.Velocity_Diff); </pre></li>
<li id="l366"><pre>               <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l367"><pre> </pre></li>
<li id="l368"><pre>               <span class="comment">-- Controlled vehicles</span> </pre></li>
<li id="l369"><pre>            <span class="keyword">elsif</span> Distance_Entry.Distance &lt;= <span class="droplink">Unconditional_Repulse_Dist<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:31:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l31" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l370"><pre> </pre></li>
<li id="l371"><pre>               <span class="comment">-- Unconditional repulsion for controlled vehicles</span> </pre></li>
<li id="l372"><pre>               <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> := <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> + <span class="droplink">Inter_Swarm_Repulsion<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:75:13" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l75" title="To spec">To spec</a></li><li><a href="src_swarm_configuration.adb.html#l24" title="To body">To body</a></li></ul></span> (Distance_Entry.Distance) * <span class="droplink">Norm<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:20:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l20" title="To spec">To spec</a></li></ul></span> (Distance_Entry.Position_Diff); </pre></li>
<li id="l373"><pre> </pre></li>
<li id="l374"><pre>            <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l375"><pre> </pre></li>
<li id="l376"><pre>         <span class="keyword">end</span>; </pre></li>
<li id="l377"><pre>      <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l378"><pre> </pre></li>
<li id="l379"><pre>      <span class="comment">-- Controlled vehicles</span> </pre></li>
<li id="l380"><pre>      <span class="keyword">if</span> This_Element.Controls.<span class="keyword">all</span>.<span class="droplink">Read_Throttle<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:67:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l67" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l73" title="To body">To body</a></li></ul></span> /= 0.0 <span class="keyword">then</span> </pre></li>
<li id="l381"><pre> </pre></li>
<li id="l382"><pre>         <span class="comment">-- Approach the set target</span> </pre></li>
<li id="l383"><pre>         <span class="keyword">declare</span> </pre></li>
<li id="l384"><pre>            Target_Vector                     : <span class="keyword">constant</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> := This_Element.Controls.<span class="keyword">all</span>.<span class="droplink">Read_Steering<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:66:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l66" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l71" title="To body">To body</a></li></ul></span> - This_Element.Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l385"><pre>            Norm_Target_Vector                : <span class="keyword">constant</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Norm<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:20:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l20" title="To spec">To spec</a></li></ul></span> (Target_Vector); </pre></li>
<li id="l386"><pre>            Abs_Target_Vector                 : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := <span class="keyword">abs</span> (Target_Vector); </pre></li>
<li id="l387"><pre>            Abs_Velocity                      : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := <span class="keyword">abs</span> (This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l388"><pre>            Angle_Between_Target_and_Velocity : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Angle_Between<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:29:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l29" title="To spec">To spec</a></li></ul></span> (Target_Vector, This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l389"><pre>         <span class="keyword">begin</span> </pre></li>
<li id="l390"><pre>            <span class="keyword">if</span> Abs_Target_Vector &lt; <span class="droplink">Target_Fetch_Range<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:42:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l42" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l391"><pre>               <span class="comment">-- Target reached, switch to idle throttle</span> </pre></li>
<li id="l392"><pre>               This_Element.Controls.<span class="keyword">all</span>.<span class="droplink">Set_Throttle<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:65:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l65" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l63" title="To body">To body</a></li></ul></span> (<span class="droplink">Idle_Throttle<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:22:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l22" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l393"><pre>            <span class="keyword">else</span> </pre></li>
<li id="l394"><pre>               <span class="comment">-- Accelerate to constant speed towards target, dampen lateral velocities</span> </pre></li>
<li id="l395"><pre>               <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> := <a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> </pre></li>
<li id="l396"><pre>                 + (This_Element.Controls.<span class="keyword">all</span>.<span class="droplink">Read_Throttle<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:67:16" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l67" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l73" title="To body">To body</a></li></ul></span> </pre></li>
<li id="l397"><pre>                    * <span class="droplink">Approach_Acceleration<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:78:13" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l78" title="To spec">To spec</a></li><li><a href="src_swarm_configuration.adb.html#l51" title="To body">To body</a></li></ul></span> (Abs_Velocity * Cos (Angle_Between_Target_and_Velocity)) </pre></li>
<li id="l398"><pre>                    * Norm_Target_Vector) </pre></li>
<li id="l399"><pre>                 - <span class="droplink">Norm<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:20:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l20" title="To spec">To spec</a></li></ul></span> (This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>) * (<span class="droplink">Intented_Framerate<ul><li><a href="graphics_configuration.ads.html#graphics_configuration.ads:16:4" title="To API doc">To API doc</a></li><li><a href="src_graphics_configuration.ads.html#l16" title="To spec">To spec</a></li></ul></span> / 5.0) * Abs_Velocity * Sin (Angle_Between_Target_and_Velocity); </pre></li>
<li id="l400"><pre>            <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l401"><pre>         <span class="keyword">end</span>; </pre></li>
<li id="l402"><pre>      <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l403"><pre> </pre></li>
<li id="l404"><pre>      <span class="comment">-- Friction</span> </pre></li>
<li id="l405"><pre>      This_Element.Acceleration.<span class="keyword">all</span>.<span class="droplink">Write<ul><li><a href="generic_protected.ads.html#generic_protected.ads:18:17" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l18" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l11" title="To body">To body</a></li></ul></span> (<a href="src_swarm_control.adb.html#l348" title="defined at swarm_control.adb:348:7">Acceleration</a> - <span class="droplink">Norm<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:20:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l20" title="To spec">To spec</a></li></ul></span> (This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>) * (<span class="keyword">abs</span> (This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>) * <span class="droplink">Friction<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:50:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l50" title="To spec">To spec</a></li></ul></span>)**2); </pre></li>
<li id="l406"><pre> </pre></li>
<li id="l407"><pre>      Replace_Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:54:32" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l54" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l347" title="defined at swarm_control.adb:347:7">This_Element</a>); </pre></li>
<li id="l408"><pre>   <span class="keyword">end</span> <span class="droplink">Set_Acceleration<ul><li><a href="swarm_control.ads.html#swarm_control.ads:54:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l54" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l345" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l409"><pre> </pre></li>
<li id="l410"><pre>   <span class="comment">--</span> </pre></li>
<li id="l411"><pre>   <span class="comment">--</span> </pre></li>
<li id="l412"><pre>   <span class="comment">--</span> </pre></li>
<li id="l413"><pre> </pre></li>
<li id="l414"><pre>   <span class="keyword">procedure</span> <span class="droplink">Set_All_Accelerations<ul><li><a href="swarm_control.ads.html#swarm_control.ads:55:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l55" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l415"><pre> </pre></li>
<li id="l416"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l417"><pre>      <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l418"><pre>         <span class="droplink">Set_Acceleration<ul><li><a href="swarm_control.ads.html#swarm_control.ads:54:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l54" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l345" title="To body">To body</a></li></ul></span> (Element_Index); </pre></li>
<li id="l419"><pre>      <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l420"><pre>   <span class="keyword">end</span> <span class="droplink">Set_All_Accelerations<ul><li><a href="swarm_control.ads.html#swarm_control.ads:55:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l55" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l414" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l421"><pre> </pre></li>
<li id="l422"><pre>   <span class="comment">--</span> </pre></li>
<li id="l423"><pre>   <span class="comment">--</span> </pre></li>
<li id="l424"><pre>   <span class="comment">--</span> </pre></li>
<li id="l425"><pre> </pre></li>
<li id="l426"><pre>   <span class="keyword">procedure</span> <span class="droplink">Forward_Messages<ul><li><a href="swarm_control.ads.html#swarm_control.ads:57:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l57" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:57:32" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l57" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l427"><pre> </pre></li>
<li id="l428"><pre>      This_Element              : <span class="keyword">constant</span> <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:57:32" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l57" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l429"><pre>      Message_To_Be_Distributed : <span class="droplink">Inter_Vehicle_Messages<ul><li><a href="vehicle_message_type.ads.html#vehicle_message_type.ads:10:9" title="To API doc">To API doc</a></li><li><a href="src_vehicle_message_type.ads.html#l10" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l430"><pre> </pre></li>
<li id="l431"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l432"><pre>      <span class="keyword">while</span> This_Element.Comms.<span class="keyword">all</span>.<span class="droplink">Has_Outgoing_Messages<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:57:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l57" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l37" title="To body">To body</a></li></ul></span> <span class="keyword">loop</span> </pre></li>
<li id="l433"><pre>         This_Element.Comms.<span class="keyword">all</span>.<span class="droplink">Fetch_Message<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:55:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l55" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l27" title="To body">To body</a></li></ul></span> (<a href="src_swarm_control.adb.html#l429" title="defined at swarm_control.adb:429:7">Message_To_Be_Distributed</a>); </pre></li>
<li id="l434"><pre>         Check_Neighbours : <span class="keyword">for</span> Distance_Index <span class="keyword">in</span> Distance_Vectors.First_Index (This_Element.Neighbours.<span class="keyword">all</span>) .. Distance_Vectors.Last_Index (This_Element.Neighbours.<span class="keyword">all</span>) <span class="keyword">loop</span> </pre></li>
<li id="l435"><pre>            <span class="keyword">declare</span> </pre></li>
<li id="l436"><pre>               Distance_Entry : <span class="keyword">constant</span> <span class="droplink">Distance_Entries<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:26:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l26" title="To spec">To spec</a></li></ul></span> := Distance_Vectors.Element (This_Element.Neighbours.<span class="keyword">all</span>, Distance_Index); </pre></li>
<li id="l437"><pre>            <span class="keyword">begin</span> </pre></li>
<li id="l438"><pre>               <span class="keyword">if</span> Distance_Entry.Distance &lt;= <span class="droplink">Comms_Range<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:45:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l45" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l439"><pre>                  Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Distance_Entry.Index).Comms.<span class="keyword">all</span>.<span class="droplink">Push_Message<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:54:17" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l54" title="To spec">To spec</a></li><li><a href="src_swarm_structures.adb.html#l19" title="To body">To body</a></li></ul></span> (<a href="src_swarm_control.adb.html#l429" title="defined at swarm_control.adb:429:7">Message_To_Be_Distributed</a>); </pre></li>
<li id="l440"><pre>               <span class="keyword">else</span> </pre></li>
<li id="l441"><pre>                  <span class="keyword">exit</span> Check_Neighbours; </pre></li>
<li id="l442"><pre>               <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l443"><pre>            <span class="keyword">end</span>; </pre></li>
<li id="l444"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span> Check_Neighbours; </pre></li>
<li id="l445"><pre>      <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l446"><pre>   <span class="keyword">end</span> <span class="droplink">Forward_Messages<ul><li><a href="swarm_control.ads.html#swarm_control.ads:57:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l57" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l426" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l447"><pre> </pre></li>
<li id="l448"><pre>   <span class="comment">--</span> </pre></li>
<li id="l449"><pre>   <span class="comment">--</span> </pre></li>
<li id="l450"><pre>   <span class="comment">--</span> </pre></li>
<li id="l451"><pre> </pre></li>
<li id="l452"><pre>   <span class="keyword">procedure</span> <span class="droplink">Forward_All_Messages<ul><li><a href="swarm_control.ads.html#swarm_control.ads:58:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l58" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l453"><pre> </pre></li>
<li id="l454"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l455"><pre>      <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l456"><pre>         <span class="droplink">Forward_Messages<ul><li><a href="swarm_control.ads.html#swarm_control.ads:57:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l57" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l426" title="To body">To body</a></li></ul></span> (Element_Index); </pre></li>
<li id="l457"><pre>      <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l458"><pre>   <span class="keyword">end</span> <span class="droplink">Forward_All_Messages<ul><li><a href="swarm_control.ads.html#swarm_control.ads:58:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l58" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l452" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l459"><pre> </pre></li>
<li id="l460"><pre>   <span class="comment">--</span> </pre></li>
<li id="l461"><pre>   <span class="comment">--</span> </pre></li>
<li id="l462"><pre>   <span class="comment">--</span> </pre></li>
<li id="l463"><pre> </pre></li>
<li id="l464"><pre>   <span class="keyword">procedure</span> <span class="droplink">Move_Element<ul><li><a href="swarm_control.ads.html#swarm_control.ads:60:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l60" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:60:28" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l60" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l465"><pre> </pre></li>
<li id="l466"><pre>      This_Element : <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:60:28" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l60" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l467"><pre>      Interval     : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>       := <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>&apos;Min (<span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (To_Duration (Clock - This_Element.Last_Update)), <span class="droplink">Max_Update_Interval<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:55:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l55" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l468"><pre> </pre></li>
<li id="l469"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l470"><pre>      This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Write<ul><li><a href="generic_protected.ads.html#generic_protected.ads:18:17" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l18" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l11" title="To body">To body</a></li></ul></span> (This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span> + (<a href="src_swarm_control.adb.html#l467" title="defined at swarm_control.adb:467:7">Interval</a> * This_Element.Acceleration.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>)); </pre></li>
<li id="l471"><pre> </pre></li>
<li id="l472"><pre>      <span class="keyword">declare</span> </pre></li>
<li id="l473"><pre>         Move_Start : <span class="keyword">constant</span> Positions := This_Element.Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l474"><pre>         Move_End   : <span class="keyword">constant</span> Positions := Move_Start + (<a href="src_swarm_control.adb.html#l467" title="defined at swarm_control.adb:467:7">Interval</a> * This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>); </pre></li>
<li id="l475"><pre>      <span class="keyword">begin</span> </pre></li>
<li id="l476"><pre>         This_Element.Position.<span class="keyword">all</span>.<span class="droplink">Write<ul><li><a href="generic_protected.ads.html#generic_protected.ads:18:17" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l18" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l11" title="To body">To body</a></li></ul></span> (Move_End); </pre></li>
<li id="l477"><pre> </pre></li>
<li id="l478"><pre>         This_Element.Charge.Level := <span class="droplink">Vehicle_Charges<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:25:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l25" title="To spec">To spec</a></li></ul></span> </pre></li>
<li id="l479"><pre>           (<span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>&apos;Max (<span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Empty_Charge<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:27:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l27" title="To spec">To spec</a></li></ul></span>), </pre></li>
<li id="l480"><pre>            <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>&apos;Min (<span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Full_Charge<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:29:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l29" title="To spec">To spec</a></li></ul></span>), </pre></li>
<li id="l481"><pre>              <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> (This_Element.Charge.Level) </pre></li>
<li id="l482"><pre>              - (<a href="src_swarm_control.adb.html#l467" title="defined at swarm_control.adb:467:7">Interval</a> </pre></li>
<li id="l483"><pre>                * (Charging_Setup.Constant_Discharge_Rate_Per_Sec </pre></li>
<li id="l484"><pre>                  + Charging_Setup.Propulsion_Discharge_Rate_Per_Sec * <span class="keyword">abs</span> (This_Element.Acceleration.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>)))))); </pre></li>
<li id="l485"><pre> </pre></li>
<li id="l486"><pre>         <span class="keyword">for</span> Globe_Ix <span class="keyword">in</span> <span class="droplink">Globes<ul><li><a href="swarm_data.ads.html#swarm_data.ads:19:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l19" title="To spec">To spec</a></li></ul></span>&apos;Range <span class="keyword">loop</span> </pre></li>
<li id="l487"><pre> </pre></li>
<li id="l488"><pre>            <span class="keyword">declare</span> </pre></li>
<li id="l489"><pre>               Globe_Pos    : <span class="keyword">constant</span> Positions := <span class="droplink">Globes<ul><li><a href="swarm_data.ads.html#swarm_data.ads:19:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l19" title="To spec">To spec</a></li></ul></span> (Globe_Ix).Position.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l490"><pre>               Interratio   : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>      := (Globe_Pos - Move_Start) * ((Move_End - Move_Start) / (<span class="keyword">abs</span> (Move_End - Move_Start))); </pre></li>
<li id="l491"><pre>               Intersection : <span class="keyword">constant</span> Positions := Move_Start + Interratio * (Move_End - Move_Start); </pre></li>
<li id="l492"><pre>               Touching     : <span class="keyword">constant</span> Boolean   := <span class="droplink">Globes<ul><li><a href="swarm_data.ads.html#swarm_data.ads:19:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l19" title="To spec">To spec</a></li></ul></span> (Globe_Ix).Active <span class="keyword">and</span> <span class="keyword">then</span> <span class="keyword">abs</span> (Intersection - Globe_Pos) &lt;= <span class="droplink">Energy_Globe_Detection<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:58:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l58" title="To spec">To spec</a></li></ul></span> <span class="keyword">and</span> <span class="keyword">then</span> Interratio &gt;= 0.0 <span class="keyword">and</span> <span class="keyword">then</span> Interratio &lt;= 1.0; </pre></li>
<li id="l493"><pre>               Slot_Passed  : <span class="keyword">constant</span> Boolean   := Clock - This_Element.Charge.Charge_Time.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span> &gt; Charging_Setup.Max_Globe_Interval; </pre></li>
<li id="l494"><pre>            <span class="keyword">begin</span> </pre></li>
<li id="l495"><pre>               <span class="keyword">if</span> (<span class="keyword">not</span> This_Element.Charge.Globes_Touched (Globe_Ix) <span class="keyword">or</span> <span class="keyword">else</span> Slot_Passed) <span class="keyword">and</span> <span class="keyword">then</span> Touching <span class="keyword">then</span> </pre></li>
<li id="l496"><pre> </pre></li>
<li id="l497"><pre>                  <span class="keyword">if</span> Slot_Passed <span class="keyword">then</span> </pre></li>
<li id="l498"><pre>                     This_Element.Charge.Globes_Touched := <span class="droplink">No_Globes_Touched<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:75:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l75" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l499"><pre>                     This_Element.Charge.Charge_No      := 0; </pre></li>
<li id="l500"><pre>                  <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l501"><pre> </pre></li>
<li id="l502"><pre>                  This_Element.Charge.Charge_No                 := This_Element.Charge.Charge_No + 1; </pre></li>
<li id="l503"><pre>                  This_Element.Charge.Globes_Touched (Globe_Ix) := True; </pre></li>
<li id="l504"><pre>                  This_Element.Charge.Charge_Time.<span class="keyword">all</span>.<span class="droplink">Write<ul><li><a href="generic_protected.ads.html#generic_protected.ads:18:17" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l18" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l11" title="To body">To body</a></li></ul></span> (Clock); </pre></li>
<li id="l505"><pre> </pre></li>
<li id="l506"><pre>                  <span class="keyword">if</span> This_Element.Charge.Charge_No = Charging_Setup.Globes_Required <span class="keyword">then</span> </pre></li>
<li id="l507"><pre>                     This_Element.Charge.Level          := <span class="droplink">Full_Charge<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:29:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l29" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l508"><pre>                     This_Element.Charge.Charge_No      := 0; </pre></li>
<li id="l509"><pre>                     This_Element.Charge.Globes_Touched := <span class="droplink">No_Globes_Touched<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:75:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l75" title="To spec">To spec</a></li></ul></span>; </pre></li>
<li id="l510"><pre>                  <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l511"><pre> </pre></li>
<li id="l512"><pre>               <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l513"><pre>            <span class="keyword">end</span>; </pre></li>
<li id="l514"><pre>         <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l515"><pre>      <span class="keyword">end</span>; </pre></li>
<li id="l516"><pre> </pre></li>
<li id="l517"><pre>      This_Element.Last_Update := Clock; </pre></li>
<li id="l518"><pre>      Replace_Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:60:28" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l60" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l466" title="defined at swarm_control.adb:466:7">This_Element</a>); </pre></li>
<li id="l519"><pre>   <span class="keyword">end</span> <span class="droplink">Move_Element<ul><li><a href="swarm_control.ads.html#swarm_control.ads:60:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l60" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l464" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l520"><pre> </pre></li>
<li id="l521"><pre>   <span class="comment">--</span> </pre></li>
<li id="l522"><pre>   <span class="comment">--</span> </pre></li>
<li id="l523"><pre>   <span class="comment">--</span> </pre></li>
<li id="l524"><pre> </pre></li>
<li id="l525"><pre>   <span class="keyword">procedure</span> <span class="droplink">Move_All_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:61:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l61" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l526"><pre> </pre></li>
<li id="l527"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l528"><pre>      <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l529"><pre>         <span class="droplink">Move_Element<ul><li><a href="swarm_control.ads.html#swarm_control.ads:60:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l60" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l464" title="To body">To body</a></li></ul></span> (Element_Index); </pre></li>
<li id="l530"><pre>      <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l531"><pre>   <span class="keyword">end</span> <span class="droplink">Move_All_Elements<ul><li><a href="swarm_control.ads.html#swarm_control.ads:61:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l61" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l525" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l532"><pre> </pre></li>
<li id="l533"><pre>   <span class="comment">--</span> </pre></li>
<li id="l534"><pre>   <span class="comment">--</span> </pre></li>
<li id="l535"><pre>   <span class="comment">--</span> </pre></li>
<li id="l536"><pre> </pre></li>
<li id="l537"><pre>   <span class="keyword">procedure</span> <span class="droplink">Update_Rotation<ul><li><a href="swarm_control.ads.html#swarm_control.ads:63:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l63" title="To spec">To spec</a></li></ul></span> (<span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:63:31" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l63" title="To spec">To spec</a></li></ul></span> : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span>) <span class="keyword">is</span> </pre></li>
<li id="l538"><pre> </pre></li>
<li id="l539"><pre>      <span class="keyword">function</span> Vector_Yaw (In_Vector : <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l540"><pre>        (<span class="keyword">if</span> <a href="src_swarm_control.adb.html#l539" title="defined at swarm_control.adb:539:28">In_Vector</a> (x) = 0.0 <span class="keyword">and</span> <span class="keyword">then</span> <a href="src_swarm_control.adb.html#l539" title="defined at swarm_control.adb:539:28">In_Vector</a> (z) = 0.0 </pre></li>
<li id="l541"><pre>         <span class="keyword">then</span> 0.0 </pre></li>
<li id="l542"><pre>         <span class="keyword">else</span> Arctan (<a href="src_swarm_control.adb.html#l539" title="defined at swarm_control.adb:539:28">In_Vector</a> (x), <a href="src_swarm_control.adb.html#l539" title="defined at swarm_control.adb:539:28">In_Vector</a> (z))); </pre></li>
<li id="l543"><pre> </pre></li>
<li id="l544"><pre>      <span class="keyword">function</span> Vector_Pitch (In_Vector : <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span>) <span class="keyword">return</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l545"><pre>        ((Pi / 2.0) - <span class="droplink">Angle_Between<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:29:13" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l29" title="To spec">To spec</a></li></ul></span> (<a href="src_swarm_control.adb.html#l544" title="defined at swarm_control.adb:544:30">In_Vector</a>, (0.0, 1.0, 0.0))); </pre></li>
<li id="l546"><pre> </pre></li>
<li id="l547"><pre>      This_Element : <span class="keyword">constant</span> <span class="droplink">Swarm_Element_State<ul><li><a href="swarm_structures.ads.html#swarm_structures.ads:93:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures.ads.html#l93" title="To spec">To spec</a></li></ul></span> := Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:63:31" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l63" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l548"><pre> </pre></li>
<li id="l549"><pre>      Velocity      : <span class="keyword">constant</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> := This_Element.Velocity.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l550"><pre>      Element_Yaw   : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>      := <a href="src_swarm_control.adb.html#l539" title="defined at swarm_control.adb:539:16">Vector_Yaw</a>   (<a href="src_swarm_control.adb.html#l549" title="defined at swarm_control.adb:549:7">Velocity</a>); </pre></li>
<li id="l551"><pre>      Element_Pitch : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>      := <a href="src_swarm_control.adb.html#l544" title="defined at swarm_control.adb:544:16">Vector_Pitch</a> (<a href="src_swarm_control.adb.html#l549" title="defined at swarm_control.adb:549:7">Velocity</a>); </pre></li>
<li id="l552"><pre> </pre></li>
<li id="l553"><pre>      Rotation      : <span class="keyword">constant</span> <span class="droplink">Quaternion_Rotation<ul><li><a href="rotations.ads.html#rotations.ads:20:12" title="To API doc">To API doc</a></li><li><a href="src_rotations.ads.html#l20" title="To spec">To spec</a></li></ul></span> := <span class="droplink">To_Rotation<ul><li><a href="rotations.ads.html#rotations.ads:37:13" title="To API doc">To API doc</a></li><li><a href="src_rotations.ads.html#l37" title="To spec">To spec</a></li><li><a href="src_rotations.adb.html#l50" title="To body">To body</a></li></ul></span> (0.0, -<a href="src_swarm_control.adb.html#l551" title="defined at swarm_control.adb:551:7">Element_Pitch</a>, <a href="src_swarm_control.adb.html#l550" title="defined at swarm_control.adb:550:7">Element_Yaw</a> + Pi); </pre></li>
<li id="l554"><pre>      Norm_Acc      : <span class="keyword">constant</span> <span class="droplink">Vector_3D<ul><li><a href="vectors_3d.ads.html#vectors_3d.ads:14:12" title="To API doc">To API doc</a></li><li><a href="src_vectors_3d.ads.html#l14" title="To spec">To spec</a></li></ul></span> := <span class="droplink">Rotate<ul><li><a href="rotations.ads.html#rotations.ads:49:13" title="To API doc">To API doc</a></li><li><a href="src_rotations.ads.html#l49" title="To spec">To spec</a></li><li><a href="src_rotations.adb.html#l204" title="To body">To body</a></li></ul></span> (This_Element.Acceleration.<span class="keyword">all</span>.<span class="droplink">Read<ul><li><a href="generic_protected.ads.html#generic_protected.ads:16:16" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l16" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l9" title="To body">To body</a></li></ul></span>, <a href="src_swarm_control.adb.html#l553" title="defined at swarm_control.adb:553:7">Rotation</a>); </pre></li>
<li id="l555"><pre>      Lateral_Acc   : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>      := <a href="src_swarm_control.adb.html#l554" title="defined at swarm_control.adb:554:7">Norm_Acc</a> (x) * <span class="keyword">abs</span> (<a href="src_swarm_control.adb.html#l549" title="defined at swarm_control.adb:549:7">Velocity</a>); </pre></li>
<li id="l556"><pre>      Element_Roll  : <span class="keyword">constant</span> <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span> := </pre></li>
<li id="l557"><pre>        <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>&apos;Max (-Pi / 2.0, </pre></li>
<li id="l558"><pre>                  <span class="droplink">Real<ul><li><a href="real_type.ads.html#real_type.ads:5:12" title="To API doc">To API doc</a></li><li><a href="src_real_type.ads.html#l5" title="To spec">To spec</a></li></ul></span>&apos;Min (Pi / 2.0, </pre></li>
<li id="l559"><pre>                    <a href="src_swarm_control.adb.html#l555" title="defined at swarm_control.adb:555:7">Lateral_Acc</a> * (Pi / 2.0) / <span class="droplink">Max_Assumed_Acceleration<ul><li><a href="swarm_configuration.ads.html#swarm_configuration.ads:54:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_configuration.ads.html#l54" title="To spec">To spec</a></li></ul></span>)); </pre></li>
<li id="l560"><pre> </pre></li>
<li id="l561"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l562"><pre>      This_Element.Rotation.<span class="keyword">all</span>.<span class="droplink">Write<ul><li><a href="generic_protected.ads.html#generic_protected.ads:18:17" title="To API doc">To API doc</a></li><li><a href="src_generic_protected.ads.html#l18" title="To spec">To spec</a></li><li><a href="src_generic_protected.adb.html#l11" title="To body">To body</a></li></ul></span> (<span class="droplink">To_Rotation<ul><li><a href="rotations.ads.html#rotations.ads:37:13" title="To API doc">To API doc</a></li><li><a href="src_rotations.ads.html#l37" title="To spec">To spec</a></li><li><a href="src_rotations.adb.html#l50" title="To body">To body</a></li></ul></span> (<a href="src_swarm_control.adb.html#l556" title="defined at swarm_control.adb:556:7">Element_Roll</a>, -<a href="src_swarm_control.adb.html#l551" title="defined at swarm_control.adb:551:7">Element_Pitch</a>, -<a href="src_swarm_control.adb.html#l550" title="defined at swarm_control.adb:550:7">Element_Yaw</a> + Pi)); </pre></li>
<li id="l563"><pre>      Replace_Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, <span class="droplink">Element_Index<ul><li><a href="swarm_control.ads.html#swarm_control.ads:63:31" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l63" title="To spec">To spec</a></li></ul></span>, <a href="src_swarm_control.adb.html#l547" title="defined at swarm_control.adb:547:7">This_Element</a>); </pre></li>
<li id="l564"><pre>   <span class="keyword">end</span> <span class="droplink">Update_Rotation<ul><li><a href="swarm_control.ads.html#swarm_control.ads:63:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l63" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l537" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l565"><pre> </pre></li>
<li id="l566"><pre>   <span class="comment">---</span> </pre></li>
<li id="l567"><pre>   <span class="comment">---</span> </pre></li>
<li id="l568"><pre>   <span class="comment">---</span> </pre></li>
<li id="l569"><pre> </pre></li>
<li id="l570"><pre>   <span class="keyword">procedure</span> <span class="droplink">Update_All_Rotations<ul><li><a href="swarm_control.ads.html#swarm_control.ads:64:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l64" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l571"><pre> </pre></li>
<li id="l572"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l573"><pre>      <span class="keyword">for</span> Element_Index <span class="keyword">in</span> First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) .. Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">loop</span> </pre></li>
<li id="l574"><pre>         <span class="droplink">Update_Rotation<ul><li><a href="swarm_control.ads.html#swarm_control.ads:63:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l63" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l537" title="To body">To body</a></li></ul></span> (Element_Index); </pre></li>
<li id="l575"><pre>      <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l576"><pre>   <span class="keyword">end</span> <span class="droplink">Update_All_Rotations<ul><li><a href="swarm_control.ads.html#swarm_control.ads:64:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l64" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l570" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l577"><pre> </pre></li>
<li id="l578"><pre>   <span class="comment">--</span> </pre></li>
<li id="l579"><pre>   <span class="comment">--</span> </pre></li>
<li id="l580"><pre>   <span class="comment">--</span> </pre></li>
<li id="l581"><pre> </pre></li>
<li id="l582"><pre>   <span class="keyword">procedure</span> <span class="droplink">Remove_Empties<ul><li><a href="swarm_control.ads.html#swarm_control.ads:66:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l66" title="To spec">To spec</a></li></ul></span> <span class="keyword">is</span> </pre></li>
<li id="l583"><pre> </pre></li>
<li id="l584"><pre>   <span class="keyword">begin</span> </pre></li>
<li id="l585"><pre>      <span class="keyword">if</span> Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) &gt; 1 <span class="keyword">then</span> </pre></li>
<li id="l586"><pre>         <span class="keyword">declare</span> </pre></li>
<li id="l587"><pre>            Element_Index : <span class="droplink">Swarm_Element_Index<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:19:12" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l19" title="To spec">To spec</a></li></ul></span> := First_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>); </pre></li>
<li id="l588"><pre>         <span class="keyword">begin</span> </pre></li>
<li id="l589"><pre>            <span class="keyword">while</span> Element_Index &lt;= Last_Index (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) <span class="keyword">and</span> <span class="keyword">then</span> Length (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>) &gt; 1 <span class="keyword">loop</span> </pre></li>
<li id="l590"><pre>               <span class="keyword">if</span> Element (<span class="droplink">Swarm_State<ul><li><a href="swarm_data.ads.html#swarm_data.ads:17:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_data.ads.html#l17" title="To spec">To spec</a></li></ul></span>, Element_Index).Charge.Level = <span class="droplink">Empty_Charge<ul><li><a href="swarm_structures_base.ads.html#swarm_structures_base.ads:27:4" title="To API doc">To API doc</a></li><li><a href="src_swarm_structures_base.ads.html#l27" title="To spec">To spec</a></li></ul></span> <span class="keyword">then</span> </pre></li>
<li id="l591"><pre>                  <span class="droplink">Remove_Vehicle_in_Stages<ul><li><a href="src_swarm_control.adb.html#l269" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l269" title="To body">To body</a></li></ul></span> (Element_Index); </pre></li>
<li id="l592"><pre>               <span class="keyword">else</span> </pre></li>
<li id="l593"><pre>                  Element_Index := Element_Index + 1; </pre></li>
<li id="l594"><pre>               <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l595"><pre>            <span class="keyword">end</span> <span class="keyword">loop</span>; </pre></li>
<li id="l596"><pre>         <span class="keyword">end</span>; </pre></li>
<li id="l597"><pre>      <span class="keyword">end</span> <span class="keyword">if</span>; </pre></li>
<li id="l598"><pre>   <span class="keyword">end</span> <span class="droplink">Remove_Empties<ul><li><a href="swarm_control.ads.html#swarm_control.ads:66:14" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l66" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l582" title="To body">To body</a></li></ul></span>; </pre></li>
<li id="l599"><pre> </pre></li>
<li id="l600"><pre><span class="keyword">end</span> <span class="droplink">Swarm_Control<ul><li><a href="swarm_control.ads.html#swarm_control.ads:13:9" title="To API doc">To API doc</a></li><li><a href="src_swarm_control.ads.html#l13" title="To spec">To spec</a></li><li><a href="src_swarm_control.adb.html#l18" title="To body">To body</a></li></ul></span>; </pre></li>
</ol></div>
</div>

</body>
</html>